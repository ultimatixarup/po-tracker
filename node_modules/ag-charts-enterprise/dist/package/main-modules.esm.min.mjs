var bd=Object.defineProperty,Dd=Object.getOwnPropertyDescriptor,p=(e,t,i,s)=>{for(var o=s>1?void 0:s?Dd(t,i):t,a=e.length-1,n;a>=0;a--)(n=e[a])&&(o=(s?n(t,i,o):n(o))||o);return s&&o&&bd(t,i,o),o};import{_ModuleSupport as vd}from"ag-charts-community";import{_ModuleSupport as kd}from"ag-charts-community";import{_ModuleSupport as Id}from"ag-charts-community";import{isNumberEqual as Or}from"ag-charts-core";function Ma(e,t,i){const s=(a,n,r,l)=>{let c=e[0];for(let h=a;r>0?h<=n:h>n;h+=r){const u=e[h];if(l(c,u))return!0;c=u}return!1},o=Math.floor(e.length/2);return s(t,o,t,i)?!0:s(e.length-t,o,-t,i)}import{_ModuleSupport as Ad}from"ag-charts-community";var{AxisInterval:Md,Property:Nd}=Ad,Na=class extends Md{};p([Nd],Na.prototype,"minSpacing",2);import{_ModuleSupport as Ys}from"ag-charts-community";import{countFractionDigits as Ld,isNumberEqual as Li}from"ag-charts-core";import{_ModuleSupport as Fr}from"ag-charts-community";import{isNumberEqual as Br}from"ag-charts-core";import{_ModuleSupport as Td}from"ag-charts-community";import{createId as Rd}from"ag-charts-core";var{BaseProperties:Gr,ChartAxisDirection:Pd,Property:Ne,Group:La,FONT_SIZE:Cd}=Td,Dt=class extends Gr{constructor(){super(...arguments),this.fontSize=Cd.LARGE,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};p([Ne],Dt.prototype,"enabled",2),p([Ne],Dt.prototype,"text",2),p([Ne],Dt.prototype,"fontStyle",2),p([Ne],Dt.prototype,"fontWeight",2),p([Ne],Dt.prototype,"fontSize",2),p([Ne],Dt.prototype,"fontFamily",2),p([Ne],Dt.prototype,"padding",2),p([Ne],Dt.prototype,"color",2),p([Ne],Dt.prototype,"parallel",2);var Qe=class extends Gr{constructor(){super(...arguments),this.id=Rd(this),this.defaultColorRange=[],this.shape="polygon",this.label=new Dt,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=Pd.Angle,this.axisInnerRadius=0,this.axisOuterRadius=0,this.lineGroup=new La({name:this.id}),this.rangeGroup=new La({name:this.id}),this.labelGroup=new La({name:this.id}),this._isRange=void 0}assignCrossLineGroup(e,t){e!==this._isRange&&(e?this.rangeGroup.appendChild(t):this.lineGroup.appendChild(t)),this._isRange=e}setSectorNodeProps(e){e.fill=this.fill,e.fillOpacity=this.fillOpacity??1,e.stroke=this.stroke,e.strokeOpacity=this.strokeOpacity??1,e.strokeWidth=this.strokeWidth??1,e.lineDash=this.lineDash}setLabelNodeProps(e,t,i,s,o){const{label:a}=this;e.x=t,e.y=i,e.text=a.text,e.textAlign="center",e.textBaseline=s,e.rotation=o,e.rotationCenterX=t,e.rotationCenterY=i,e.fill=a.color,e.fontFamily=a.fontFamily,e.fontSize=a.fontSize,e.fontStyle=a.fontStyle,e.visible=!0}};p([Ne],Qe.prototype,"enabled",2),p([Ne],Qe.prototype,"type",2),p([Ne],Qe.prototype,"range",2),p([Ne],Qe.prototype,"value",2),p([Ne],Qe.prototype,"defaultColorRange",2),p([Ne],Qe.prototype,"fill",2),p([Ne],Qe.prototype,"fillOpacity",2),p([Ne],Qe.prototype,"stroke",2),p([Ne],Qe.prototype,"strokeWidth",2),p([Ne],Qe.prototype,"strokeOpacity",2),p([Ne],Qe.prototype,"lineDash",2),p([Ne],Qe.prototype,"shape",2),p([Ne],Qe.prototype,"label",2);var{ChartAxisDirection:_d,getCrossLineValue:wd,validateCrossLineValue:Ed,normalizeAngle360:Ta,Group:Od,Path:Vr,Sector:Fd,RotatableText:Bd,ContinuousScale:Gd}=Fr,Ra=class extends Qe{constructor(){super(),this.direction=_d.Angle,this.polygonNode=new Vr,this.sectorNode=new Fd,this.lineNode=new Vr,this.crossLineRange=new Od,this.labelNode=new Bd,this.ticks=[],this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.crossLineRange.append(this.lineNode),this.labelGroup.append(this.labelNode)}visibilityCheck(){if(!Gd.is(this.scale))return!0;const[e,t]=this.scale.domain,i=wd(this);if(this.type==="range"){const[s,o]=i;return s>=e&&s<=t&&o>=s&&o<=t}else return i>=e&&i<=t}update(e){const{scale:t}=this;if(!t||!Ed(this,t)||!this.visibilityCheck()){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(e){const{scale:t,type:i,value:s,lineNode:o}=this;if(!e||i!=="line"||!t){o.visible=!1;return}const a=t.convert(s);if(isNaN(a)){o.visible=!1;return}const{axisInnerRadius:n,axisOuterRadius:r}=this;o.visible=!0,o.stroke=this.stroke,o.strokeOpacity=this.strokeOpacity??1,o.strokeWidth=this.strokeWidth??1,o.fill=void 0,o.lineDash=this.lineDash;const l=r*Math.cos(a),c=r*Math.sin(a),h=n*Math.cos(a),u=n*Math.sin(a);o.path.clear(!0),o.path.moveTo(h,u),o.path.lineTo(l,c),this.assignCrossLineGroup(!1,this.crossLineRange)}updatePolygonNode(e){const{polygonNode:t,range:i,scale:s,shape:o,type:a,ticks:n}=this;if(!e||a!=="range"||o!=="polygon"||!s||!i){t.visible=!1;return}const{axisInnerRadius:r,axisOuterRadius:l}=this,c=n.indexOf(i[0]),h=n.indexOf(i[1]),d=(c<=h?n.slice(c,h+1):n.slice(c).concat(n.slice(0,h+1))).map(y=>s.convert(y));t.visible=!0,this.setSectorNodeProps(t);const{path:g}=t;g.clear(!0),d.forEach((y,f)=>{const m=l*Math.cos(y),S=l*Math.sin(y);f===0?g.moveTo(m,S):g.lineTo(m,S)}),r===0?g.lineTo(0,0):d.slice().reverse().forEach(y=>{const f=r*Math.cos(y),m=r*Math.sin(y);g.lineTo(f,m)}),t.path.closePath(),this.assignCrossLineGroup(!0,this.crossLineRange)}updateSectorNode(e){const{sectorNode:t,range:i,scale:s,shape:o,type:a}=this;if(!e||a!=="range"||o!=="circle"||!s||!i){t.visible=!1;return}const{axisInnerRadius:n,axisOuterRadius:r}=this,l=i.map(u=>s.convert(u)),c=s.step??0,h=s instanceof Fr.BandScale?c/2:0;t.visible=!0,this.setSectorNodeProps(t),t.centerX=0,t.centerY=0,t.innerRadius=n,t.outerRadius=r,t.startAngle=l[0]-h,t.endAngle=l[1]+h,this.assignCrossLineGroup(!0,this.crossLineRange)}updateLabelNode(e){const{label:t,labelNode:i,range:s,scale:o,type:a,ticks:n}=this;if(!e||t.enabled===!1||!t.text||!o||a==="range"&&!s){i.visible=!1;return}i.visible=!0;const{axisInnerRadius:r,axisOuterRadius:l}=this;let c,h,u,d;if(a==="line"){const g=Ta(o.convert(this.value)),y=1.5*Math.PI,f=Br(g,y)||g>y||g<Math.PI/2,m=(r+l)/2*Math.cos(g),S=(r+l)/2*Math.sin(g);c=m+t.padding*Math.cos(g+Math.PI/2),h=S+t.padding*Math.sin(g+Math.PI/2),d=f?"top":"bottom",u=f?g:g-Math.PI}else{const[g,y]=s.map(D=>Ta(o.convert(D)));let f=(g+y)/2;g>y&&(f-=Math.PI),f=Ta(f);const m=(Br(f,0)||f>0)&&f<Math.PI;let S;this.shape==="circle"||n.length<3?S=l-t.padding:S=l*Math.cos(Math.PI/n.length)-t.padding,c=S*Math.cos(f),h=S*Math.sin(f),d=m?"bottom":"top",u=m?f-Math.PI/2:f+Math.PI/2}this.setLabelNodeProps(i,c,h,d,u)}};Ra.className="AngleCrossLine";var{ChartAxisDirection:Vd,TextWrapper:Kd,TextUtils:Wd,Property:Pa,toRadians:ps,normalizeAngle360:Ht,normalizeAngle360Inclusive:zd,Path:Hd,RotatableText:$d,Transformable:Xd,BBox:Yd,Selection:Kr,Line:Wr}=Ys,Ca=class extends Ys.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};p([Pa],Ca.prototype,"orientation",2);var hs=class extends Ys.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.tickLineGroupSelection=Kr.select(this.tickLineGroup,Wr,!1),this.gridLineGroupSelection=Kr.select(this.gridLineGroup,Wr,!1),this.labelData=[],this.tickData=[],this.radiusLineGroup=this.axisGroup.appendChild(new Ys.TransformableGroup),this.radiusLine=this.radiusLineGroup.appendChild(new Hd),this.includeInvisibleDomains=!0}get direction(){return Vd.Angle}createLabel(){return new Ca}calculateRotations(){const e=ps(this.startAngle),t=Ht(e),i=Ht(e-Math.PI/2);return{rotation:e,parallelFlipRotation:t,regularFlipRotation:i}}calculateTickLayout(e){const{nice:t,scale:i}=this,s={nice:t,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},o=t?i.niceDomain(s,e):e,a=this.generateAngleTicks(o);this.tickData=a;const n=a.map(l=>l.value),r=n.reduce((l,c)=>Math.max(typeof c=="number"?Ld(c):0,l),0);return{niceDomain:o,tickDomain:o,ticks:n,rawTickCount:void 0,fractionDigits:r,timeInterval:void 0,bbox:this.getBBox()}}update(){super.update(),this.updateRadiusLine(),this.updateGridLines(),this.updateTickLines()}normalizedAngles(){const e=Ht(-Math.PI/2+ps(this.startAngle)),t=this.endAngle!=null?zd(ps(this.endAngle)-ps(this.startAngle)):2*Math.PI,i=e+t;return[e,i]}computeRange(){this.range=this.normalizedAngles()}updateSelections(){const e=this.tickData;this.gridLineGroupSelection.update(this.gridLength&&this.gridLine.enabled?e:[]),this.tickLineGroupSelection.update(this.tick.enabled?e:[]),this.tickLabelGroupSelection.update(this.label.enabled?e:[]),this.gridLineGroupSelection.cleanup(),this.tickLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup()}updatePosition(){super.updatePosition();const{translation:e,radiusLineGroup:t}=this,i=Math.floor(e.x),s=Math.floor(e.y);t.translationX=i,t.translationY=s}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear(!0);const{points:i,closePath:s}=this.getAxisLinePoints();i.forEach(({x:o,y:a,moveTo:n,arc:r,radius:l=0,startAngle:c=0,endAngle:h=0})=>{r?t.arc(o,a,l,c,h):n?t.moveTo(o,a):t.lineTo(o,a)}),s&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.stroke,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){const{scale:e,shape:t,gridLength:i}=this,[s,o]=this.range,a=Li(o-s,2*Math.PI),n=[];if(t==="circle")a?n.push({x:i,y:0,moveTo:!0},{x:0,y:0,radius:i,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1}):n.push({x:i*Math.cos(s),y:i*Math.sin(s),moveTo:!0},{x:0,y:0,radius:i,startAngle:Ht(s),endAngle:Ht(o),arc:!0,moveTo:!1});else if(t==="polygon"){const r=e.ticks({nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.map(l=>e.convert(l));r&&r.length>2&&r.forEach((l,c)=>{const h=i*Math.cos(l),u=i*Math.sin(l),d=c===0;n.push({x:h,y:u,moveTo:d})})}return{points:n,closePath:a}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{style:i,width:s},innerRadiusRatio:o}=this;if(!(i&&t>0))return;const a=t*o,n=i.length;this.gridLineGroupSelection.each((r,l,c)=>{const{value:h}=l,{stroke:u,lineDash:d}=i[c%n],g=e.convert(h);r.x1=a*Math.cos(g),r.y1=a*Math.sin(g),r.x2=t*Math.cos(g),r.y2=t*Math.sin(g),r.stroke=u,r.strokeWidth=s,r.lineDash=d,r.fill=void 0}),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this;t.each((i,s,o)=>{const a=this.labelData[o];if(!a||a.hidden){i.visible=!1;return}i.text=a.text,i.setFont(e),i.fill=e.color,i.x=a.x,i.y=a.y,i.setAlign(a),i.setBoxing(e),i.visible=!0,a.rotation?(i.rotation=a.rotation,i.rotationCenterX=a.x,i.rotationCenterY=a.y):i.rotation=0})}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:s}=this;s.each((o,a)=>{const{value:n}=a,r=e.convert(n),l=Math.cos(r),c=Math.sin(r);o.x1=t*l,o.y1=t*c,o.x2=(t+i.size)*l,o.y2=(t+i.size)*c,o.stroke=i.stroke,o.strokeWidth=i.width})}createLabelNodeData(e,t,i){const{label:s,gridLength:o,scale:a,tick:n}=this;if(!s.enabled)return[];const r=new $d,l=i.x-this.translation.x,c=i.x+i.width-this.translation.x,{fractionDigits:h}=this.layout.label,u=this.tickFormatter(this.scale.domain,this.tickData,!1,h),d=e.map((g,y)=>{const{value:f}=g,m=o+s.spacing+n.size,S=a.convert(f),D=Math.cos(S),b=Math.sin(S),x=m*D,k=m*b,{textAlign:I,textBaseline:A}=this.getLabelAlign(S),v=y===e.length-1&&f!==e[0]&&Li(Ht(S),Ht(a.convert(e[0]))),N=this.getLabelRotation(S);let L=u(f,y);r.text=L,r.x=x,r.y=k,r.setFont(s),r.textAlign=I,r.textBaseline=A,r.rotation=N,N&&(r.rotationCenterX=x,r.rotationCenterY=k);let M=N?Xd.toCanvas(r):r.getBBox();if(M&&t.hideWhenNecessary&&!N){const R=l-M.x,C=M.x+M.width-c,w=1;if(R>w||C>w){const T=M.width-Math.max(R,C);L=Kd.wrapText(L,{maxWidth:T,font:s,textWrap:"never"}),L===Wd.EllipsisChar&&(L=""),r.text=L,M=r.getBBox()}}return{text:L,x,y:k,textAlign:I,textBaseline:A,hidden:L===""||g.hidden||v,rotation:N,box:M}});return s.avoidCollisions&&this.avoidLabelCollisions(d),d}computeLabelsBBox(e,t){this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map(({box:s})=>s).filter(s=>s!=null);return!this.label.enabled||i.length===0?null:Yd.merge(i)}getLabelOrientation(){const{label:e}=this;return e instanceof Ca?e.orientation:"fixed"}getLabelRotation(e){let t=ps(this.label.rotation??0);e=Ht(e);const i=this.getLabelOrientation();return i==="parallel"?(t+=e,e>=0&&e<Math.PI?t-=Math.PI/2:t+=Math.PI/2):i==="perpendicular"&&(t+=e,e>=Math.PI/2&&e<1.5*Math.PI&&(t+=Math.PI)),t}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let s,o;const a=this.getLabelOrientation(),n=Li(t,0),r=Li(i,0),l=Li(t,1),c=Li(i,-1),h=t>0&&!n,u=i>0&&!r;return a==="parallel"?(s="center",o=l&&r||u?"top":"bottom"):a==="perpendicular"?(s=c||h?"left":"right",o="middle"):(s="right",n?s="center":h&&(s="left"),o="bottom",r?o="middle":u&&(o="top")),{textAlign:s,textBaseline:o}}updateCrossLines(){const{shape:e,gridLength:t,innerRadiusRatio:i}=this;this.crossLines.forEach(s=>{s instanceof Ra&&(s.ticks=this.tickData.map(o=>o.value),s.shape=e,s.axisOuterRadius=t,s.axisInnerRadius=t*i)}),super.updateCrossLines()}};hs.CrossLineConstructor=Ra,p([Pa],hs.prototype,"startAngle",2),p([Pa],hs.prototype,"endAngle",2);var{Property:_a,CategoryScale:Ud}=Id,ai=class extends hs{constructor(e){super(e,new Ud),this.groupPaddingInner=0,this.paddingInner=0,this.interval=new Na}hasDefinedDomain(){return!1}generateAngleTicks(e){const{scale:t,gridLength:i}=this,{values:s,minSpacing:o}=this.interval,a={nice:this.nice,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0},n=s??t.ticks(a,e)?.ticks??[];if(n.length<2||o==null)return n.map(u=>({value:u,visible:!0}));const r=n[0],l=t.convert(r),c=i*Math.cos(l),h=i*Math.sin(l);for(let u=1;u<n.length-1;u++){const d=n[u],g=t.convert(d);if(g-l>Math.PI)break;const y=i*Math.cos(g),f=i*Math.sin(g);if(Math.sqrt((y-c)**2+(f-h)**2)>o){const S=new Set([r]);return Ma(n,u,(D,b)=>{S.add(b)}),n.map(D=>{const b=S.has(D);return{value:D,visible:b}})}}return[{value:r,visible:!0}]}avoidLabelCollisions(e){const{minSpacing:t}=this.label;if(e.length<3)return;const i=(l,c)=>{if(l.hidden||c.hidden)return!1;if(t==null)return l.box.collidesBBox(c.box);const h=l.box.clone().grow(t/2),u=c.box.clone().grow(t/2);return h.collidesBBox(u)},s=e[0],o=e.at(-1),a=new Set([s]),n=Or(s.x,o.x)&&Or(s.y,o.y),r=Math.floor(e.length/2);for(let l=1;l<=r;l++){const c=n?e.slice(0,-1):e;if(!Ma(c,l,i)){Ma(c,l,(u,d)=>{a.add(d)});break}}e.forEach(l=>{a.has(l)||(l.hidden=!0,l.box=void 0)})}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:s,legendItemName:o,key:a,source:n,property:r,domain:l,boundSeries:c}=t;return{type:"category",value:e,datum:i,seriesId:s,legendItemName:o,key:a,source:n,property:r,domain:l,boundSeries:c}}};ai.className="AngleCategoryAxis",ai.type="angle-category",p([_a],ai.prototype,"groupPaddingInner",2),p([_a],ai.prototype,"paddingInner",2),p([_a],ai.prototype,"interval",2);import{_ModuleSupport as qd}from"ag-charts-community";import{isNumberEqual as zr}from"ag-charts-core";import{_ModuleSupport as jd}from"ag-charts-community";import{isNumberEqual as Jd}from"ag-charts-core";var{range:Hr,isDenseInterval:Zd,LinearScale:wa}=jd,$r=class Er extends wa{constructor(){super(...arguments),this.arcLength=0}static getNiceStepAndTickCount(t,i){const[s,o]=i;let a=wa.getTickStep(s,o,t);const n=isNaN(t.maxTickCount)?1/0:t.maxTickCount,r=Math.abs(o-s)/a;let l=Math.pow(2,Math.ceil(Math.log(r)/Math.log(2)));return l>n&&(l/=2,a*=2),{count:l,step:a}}ticks(t,i=this.domain){const{arcLength:s}=this;if(!i||i.length<2||i.some(c=>!isFinite(c))||s<=0)return{ticks:[],count:0};const{nice:o,interval:a}=t,[n,r]=i;if(a){const c=Math.abs(a),h=this.getPixelRange();if(!Zd((r-n)/c,h))return Hr(n,r,c)}let l;if(o&&this.hasNiceRange()){const c=super.niceDomain(t,i);l=Er.getNiceStepAndTickCount(t,c).step}else l=wa.getTickStep(n,r,t);return Hr(n,r,l)}hasNiceRange(){const t=this.range.slice().sort((s,o)=>s-o);return[Math.PI,2*Math.PI].some(s=>Jd(s,t[1]-t[0]))}niceDomain(t,i=this.domain){const s=super.niceDomain(t,i);if(!this.hasNiceRange())return s;const o=s[0]>s[1],a=o?s[1]:s[0],{step:n,count:r}=Er.getNiceStepAndTickCount(t,s),l=1/n,c=n>=1?Math.ceil(a/n+r)*n:Math.ceil((a+r*n)*l)/l;return o?[c,a]:[a,c]}getPixelRange(){return this.arcLength}},{Property:Ea,angleBetween:Qd,normalisedExtentWithMetadata:eg,findMinMax:tg}=qd,Ti=class extends hs{constructor(e){super(e,new $r),this.shape="circle",this.interval=new Na}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:o}=eg(e,t,i);return{domain:s,clipped:o}}updateScale(){super.updateScale(),this.scale.arcLength=this.getRangeArcLength()}getRangeArcLength(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e),s=Qd(t,i)||2*Math.PI,o=this.gridLength;return s*o}generateAngleTicks(e){const{scale:t,range:i,nice:s}=this,{values:o,step:a,minSpacing:n,maxSpacing:r}=this.interval;let l;if(o==null){const{arcLength:c}=t,h=r?Math.floor(c/r):1,u=n?Math.floor(c/n):1/0,d=Math.floor(4/Math.PI*Math.abs(i[0]-i[1])),g=Math.max(h,Math.min(u,d)),y={nice:s,interval:a,tickCount:g,minTickCount:h,maxTickCount:u};l=t.ticks(y,e)?.ticks??[]}else{const[c,h]=tg(e.map(Number));l=o.filter(u=>u>=c&&u<=h).sort((u,d)=>u-d)}return l.map(c=>({value:c,visible:!0}))}avoidLabelCollisions(e){const{minSpacing:t}=this.label,i=(a,n)=>{if(a.hidden||n.hidden)return!1;if(t==null)return a.box.collidesBBox(n.box);const r=a.box.clone().grow(t/2),l=n.box.clone().grow(t/2);return r.collidesBBox(l)},s=e[0],o=e.at(-1);s!==o&&zr(s.x,o.x)&&zr(s.y,o.y)&&(o.hidden=!0);for(let a=1;a<e.length;a*=2){let n=!1;for(let r=a;r<e.length;r+=a){const l=e[r],c=e[r-a];if(i(c,l)){n=!0;break}}if(!n){e.forEach((r,l)=>{l%a>0&&(r.hidden=!0,r.box=void 0)});return}}e.forEach((a,n)=>{n>0&&(a.hidden=!0,a.box=void 0)})}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:s,seriesId:o,legendItemName:a,key:n,source:r,property:l,domain:c,boundSeries:h}=t;return{type:"number",value:e,datum:s,seriesId:o,legendItemName:a,key:n,source:r,property:l,domain:c,boundSeries:h,fractionDigits:i}}};Ti.className="AngleNumberAxis",Ti.type="angle-number",p([Ea],Ti.prototype,"min",2),p([Ea],Ti.prototype,"max",2),p([Ea],Ti.prototype,"interval",2);import{_ModuleSupport as Xr}from"ag-charts-community";var{OrdinalTimeScale:ig,Property:sg,TimeAxisParentLevel:og,lowestGranularityUnitForTicks:ag,lowestGranularityUnitForValue:ng,minimumTimeAxisDatumGranularity:rg,dateTruncationForDomain:lg,intervalUnit:Yr,intervalStep:Ur,intervalEpoch:qr,intervalMilliseconds:jr}=Xr,Us=class extends Xr.DiscreteTimeAxis{constructor(e){super(e,new ig),this.parentLevel=new og,this.minimumTimeGranularity=void 0}get primaryLabel(){return this.parentLevel.enabled?this.parentLevel.label:void 0}get primaryTick(){return this.parentLevel.enabled?this.parentLevel.tick:void 0}processData(){super.processData();const{boundSeries:e,direction:t}=this;this.minimumTimeGranularity=rg(e,t,void 0,void 0)}tickFormatParams(e,t,i,s){s??(s=ag(t));const o=lg(e),a=Yr(s),n=Ur(s),r=qr(s);return{type:"date",unit:a,step:n,epoch:r,truncateDate:o}}datumFormatParams(e,t,i,s,o){if(typeof e=="number"&&(e=new Date(e)),s==null){const{minimumTimeGranularity:m}=this,S=ng(e);m!=null&&jr(m)<jr(S)?s=m:s=S}const{datum:a,seriesId:n,legendItemName:r,key:l,source:c,property:h,domain:u,boundSeries:d}=t,g=Yr(s),y=Ur(s),f=qr(s);return{type:"date",value:e,datum:a,seriesId:n,legendItemName:r,key:l,source:c,property:h,domain:u,boundSeries:d,unit:g,step:y,epoch:f,style:o}}};Us.className="OrdinalTimeAxis",Us.type="ordinal-time",p([sg],Us.prototype,"parentLevel",2);import{_ModuleSupport as cg}from"ag-charts-community";import{_ModuleSupport as qs}from"ag-charts-community";import{isNumberEqual as pg}from"ag-charts-core";import{_ModuleSupport as Jr}from"ag-charts-community";import{clamp as Zr,isNumberEqual as hg}from"ag-charts-core";var{ChartAxisDirection:ug,Property:dg,validateCrossLineValue:gg,normalizeAngle360FromDegrees:fg,Group:yg,Path:mg,Sector:Sg,RotatableText:xg}=Jr,Qr=class extends Dt{constructor(){super(...arguments),this.positionAngle=void 0}};p([dg],Qr.prototype,"positionAngle",2);var Oa=class extends Qe{constructor(){super(),this.direction=ug.Radius,this.label=new Qr,this.polygonNode=new mg,this.sectorNode=new Sg,this.crossLineRange=new yg,this.labelNode=new xg,this.outerRadius=0,this.innerRadius=0,this.crossLineRange.append(this.polygonNode),this.crossLineRange.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t}=this;if(!t||!gg(this,t)){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.updateRadii();const{innerRadius:i,outerRadius:s}=this;e&&(e=i>=this.axisInnerRadius&&s<=this.axisOuterRadius),this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e),this.assignCrossLineGroup(this.type==="range",this.crossLineRange)}updateRadii(){const{range:e,scale:t,type:i,axisInnerRadius:s,axisOuterRadius:o}=this;if(!t)return{innerRadius:0,outerRadius:0};const a=l=>o+s-l;let n,r;if(i==="line")n=a(t.convert(this.value)),r=n;else{const l=Math.abs(t?.bandwidth??0),c=e.map(h=>t.convert(h));n=a(Math.max(...c)),r=a(Math.min(...c))+l}this.outerRadius=n,this.innerRadius=r}drawPolygon(e,t,i){t.forEach((s,o)=>{const a=e*Math.cos(s),n=e*Math.sin(s);o===0?i.path.moveTo(a,n):i.path.lineTo(a,n)}),i.path.closePath()}updatePolygonNode(e){const{gridAngles:t,polygonNode:i,scale:s,shape:o,type:a,innerRadius:n,outerRadius:r}=this;if(!e||o!=="polygon"||!s||!t){i.visible=!1;return}i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(r-l,t,i);const c=t.slice().reverse(),h=a==="line"?r-l:n+l;this.drawPolygon(h,c,i),this.setSectorNodeProps(i)}updateSectorNode(e){const{axisInnerRadius:t,axisOuterRadius:i,scale:s,sectorNode:o,shape:a,innerRadius:n,outerRadius:r}=this;if(!e||a!=="circle"||!s){o.visible=!1;return}o.visible=!0,o.startAngle=0,o.endAngle=2*Math.PI;const l=this.getPadding(),c=Zr(t,n+l,i),h=Zr(t,r-l,i);o.innerRadius=Math.min(c,h),o.outerRadius=Math.max(c,h),this.setSectorNodeProps(o)}updateLabelNode(e){const{innerRadius:t,label:i,labelNode:s,scale:o,shape:a,type:n}=this;if(!e||i.enabled===!1||!i.text||!o){s.visible=!1;return}const r=fg((i.positionAngle??0)-90),l=(hg(r,0)||r>0)&&r<Math.PI,c=l?r-Math.PI/2:r+Math.PI/2;let h;const u=this.gridAngles??[];n==="line"?h=t+i.padding:a==="circle"||u.length<3?h=t-i.padding:h=t*Math.cos(Math.PI/u.length)-i.padding;const d=h*Math.cos(r),g=h*Math.sin(r);let y;n==="line"?y=l?"top":"bottom":y=l?"bottom":"top",this.setLabelNodeProps(s,d,g,y,c)}getPadding(){const{scale:e}=this;if(!e)return 0;const t=Math.abs(e.bandwidth??0),i=Math.abs(e.step??0);return e instanceof Jr.BandScale?(i-t)/2:0}};Oa.className="RadiusCrossLine";var{ChartAxisDirection:bg,ZIndexMap:Dg,Property:Fa,normalizeAngle360:el,toRadians:vg,Caption:kg,Group:Ig,TransformableGroup:tl,Path:Ag,Line:il,Selection:sl,AxisTickGenerator:Mg,AxisGroupZIndexMap:Ng}=qs,Ba=class extends qs.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};p([Fa],Ba.prototype,"autoRotate",2),p([Fa],Ba.prototype,"autoRotateAngle",2);var js=class extends qs.PolarAxis{constructor(e,t){super(e,t),this.positionAngle=0,this.gridLineGroupSelection=sl.select(this.gridLineGroup,il,!1),this.tickGenerator=new Mg(this),this.generatedTicks=void 0,this.headingLabelGroup=this.axisGroup.appendChild(new tl({name:`${this.id}-Axis-heading`})),this.lineNodeGroup=this.axisGroup.appendChild(new tl({name:`${this.id}-Axis-line`})),this.lineNode=this.lineNodeGroup.appendChild(new il({name:`${this.id}-Axis-line`,zIndex:Ng.AxisLine})),this.gridPathGroup=this.gridGroup.appendChild(new Ig({name:`${this.id}-gridPaths`,zIndex:Dg.AXIS_GRID})),this.gridPathSelection=sl.select(this.gridPathGroup,Ag),this.headingLabelGroup.appendChild(this.title.caption.node),this.cleanup.register(this.title.caption.registerInteraction(this.moduleCtx,"afterend"))}get direction(){return bg.Radius}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:s}=this,o=e*s,a=vg(i);return{translationX:t.x,translationY:t.y-e-o,rotation:a,rotationCenterX:0,rotationCenterY:e+o}}update(){super.update(),this.updateTitle(),this.updateGridLines();const{enabled:e,stroke:t,width:i}=this.line;this.lineNode.setProperties({stroke:t,strokeWidth:e?i:0,x1:0,y1:this.range[0],x2:0,y2:this.range[1]})}updatePosition(){super.updatePosition();const e=this.getAxisTransform();this.tickLineGroup.setProperties(e),this.tickLabelGroup.setProperties(e),this.lineNodeGroup.setProperties(e),this.headingLabelGroup.setProperties(e)}calculateRotations(){return{rotation:0,parallelFlipRotation:0,regularFlipRotation:-Math.PI/2}}calculateTickLayout(e,t,i){const o=-Math.PI/2,a=[0,1],n=this.label.getSideFlag(),r=n*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),{range:l,reverse:c,defaultTickMinSpacing:h}=this,u=this.tickGenerator.generateTicks({domain:e,range:l,reverse:c,niceMode:t,visibleRange:a,primaryTickCount:void 0,defaultTickMinSpacing:h,parallelFlipRotation:0,regularFlipRotation:o,labelX:r,sideFlag:n,sizeLimit:void 0,removeOverflowLabels:!1}),{tickData:d}=u,{ticks:g,rawTicks:y,rawTickCount:f,tickDomain:m,fractionDigits:S,niceDomain:D=e}=d,b=g.map(x=>this.getTickLabelProps(x,u));return this.generatedTicks={ticks:g,labels:b},{ticks:y,tickDomain:m,niceDomain:D,rawTickCount:f,fractionDigits:S,timeInterval:void 0}}updateSelections(){const{generatedTicks:e}=this;if(!e)return;const{ticks:t,labels:i}=e;this.gridLineGroupSelection.update(this.gridLength?t:[]),this.tickLabelGroupSelection.update(i),this.gridPathSelection.update(this.gridLine.enabled?this.prepareGridPathTickData(t):[]),this.gridLineGroupSelection.cleanup(),this.tickLabelGroupSelection.cleanup(),this.gridPathSelection.cleanup()}updateLabels(){if(!this.label.enabled)return;const e=qs.resetAxisLabelSelectionFn();this.tickLabelGroupSelection.each((t,i)=>{t.fill=i.color,t.text=i.text,t.textBaseline=i.textBaseline,t.textAlign=i.textAlign??"center",t.setFont(i),t.setBoxing(i),t.setProperties(e(t,i))})}updateGridLines(){const{gridLine:{style:e,width:t},shape:i,generatedTicks:s}=this;if(!e||!s)return;const o=e.length,a=(d,g)=>{const{stroke:y,lineDash:f}=e[g%o];d.stroke=y,d.strokeWidth=t,d.lineDash=f,d.fill=void 0},[n,r]=this.gridRange??[0,2*Math.PI],l=pg(r-n,2*Math.PI),u=i==="circle"?(d,g)=>{const{path:y}=d;y.clear(!0);const f=this.getTickRadius(g);l?(y.moveTo(f,0),y.arc(0,0,f,0,2*Math.PI)):(y.moveTo(f*Math.cos(n),f*Math.sin(n)),y.arc(0,0,f,el(n),el(r))),l&&y.closePath()}:(d,g)=>{const{path:y}=d,f=this.gridAngles;if(y.clear(!0),!f||f.length<3)return;const m=this.getTickRadius(g);f.forEach((S,D)=>{const b=m*Math.cos(S),x=m*Math.sin(S);D===0?y.moveTo(b,x):y.lineTo(b,x),f.forEach((k,I)=>{const A=m*Math.cos(k),v=m*Math.sin(k);I===0?y.moveTo(A,v):y.lineTo(A,v)}),y.closePath()}),y.closePath()};this.gridPathSelection.each((d,g,y)=>{a(d,y),u(d,g)})}updateTitle(){const e=n=>n.defaultValue,{title:t,range:i}=this,{formatter:s=e}=this.title;t.caption.enabled=t.enabled,t.caption.fontFamily=t.fontFamily,t.caption.fontSize=t.fontSize,t.caption.fontStyle=t.fontStyle,t.caption.fontWeight=t.fontWeight,t.caption.color=t.color,t.caption.wrapping=t.wrapping;let o=!1;const a=t.caption.node;t.enabled&&(o=!0,a.rotation=Math.PI/2,a.x=Math.floor((i[0]+i[1])/2),a.y=-kg.SMALL_PADDING,a.textAlign="center",a.textBaseline="bottom",a.text=this.cachedCallWithContext(s,this.getTitleFormatterParams(this.scale.domain))),a.visible=o}updateCrossLines(){this.crossLines.forEach(e=>{if(e instanceof Oa){const{shape:t,gridAngles:i,range:s,innerRadiusRatio:o}=this,a=s[0];e.shape=t,e.gridAngles=i,e.axisOuterRadius=a,e.axisInnerRadius=a*o}}),super.updateCrossLines()}createLabel(){return new Ba}getTickLabelProps(e,t){const{label:i}=this,{rotation:s,textBaseline:o,textAlign:a}=t,n=this.scale.range,r=e.tickLabel??"",c=i.getSideFlag()*(this.getTickSize()+i.spacing+this.seriesAreaPadding),h=r!==""&&r!=null,u=s;return{...this.getLabelStyles({value:e.tickLabel}),tickId:e.tickId,rotation:u,text:r,textAlign:a,textBaseline:o,visible:h,x:c,y:e.translation,rotationCenterX:c,rotationCenterY:e.translation,range:n}}};js.CrossLineConstructor=Oa,p([Fa],js.prototype,"positionAngle",2);var{ProxyPropertyOnWrite:ol,Property:Ga,CategoryScale:al}=cg,ni=class extends js{constructor(e){super(e,new al),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}hasDefinedDomain(){return!1}normaliseDataDomain(e){return{domain:e,clipped:!1}}prepareGridPathTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t,innerRadiusRatio:i}=this,s=t.range[0],o=s*i;if(al.is(t)){const a=t.domain,n=a.length-1-a.indexOf(e.tick);return n===0?o:t.inset+t.step*(n-.5)+t.bandwidth/2}else{const a=(s-o)/t.domain.length;return s-e.translation+o-a/2}}tickFormatParams(){return{type:"category"}}datumFormatParams(e,t){const{datum:i,seriesId:s,legendItemName:o,key:a,source:n,property:r,domain:l,boundSeries:c}=t;return{type:"category",value:e,datum:i,seriesId:s,legendItemName:o,key:a,source:n,property:r,domain:l,boundSeries:c}}};ni.className="RadiusCategoryAxis",ni.type="radius-category",p([Ga],ni.prototype,"groupPaddingInner",2),p([ol("scale","paddingInner"),Ga],ni.prototype,"paddingInner",2),p([ol("scale","paddingOuter"),Ga],ni.prototype,"paddingOuter",2);import{_ModuleSupport as Lg}from"ag-charts-community";var{Property:nl,normalisedExtentWithMetadata:Tg,LinearScale:Rg}=Lg,us=class extends js{constructor(e){super(e,new Rg),this.shape="polygon"}hasDefinedDomain(){const{min:e,max:t}=this;return e!=null&&t!=null&&e<t}prepareGridPathTickData(e){const{scale:t}=this,i=t.domain[1];return e.filter(({tick:s})=>s!==i).sort((s,o)=>o.tick-s.tick)}getTickRadius(e){const{scale:t}=this,i=t.range[0],s=i*this.innerRadiusRatio;return i-e.translation+s}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:o}=Tg(e,t,i);return{domain:s,clipped:o}}tickFormatParams(e,t,i){return{type:"number",fractionDigits:i}}datumFormatParams(e,t,i){const{datum:s,seriesId:o,legendItemName:a,key:n,source:r,property:l,domain:c,boundSeries:h}=t;return{type:"number",value:e,datum:s,seriesId:o,legendItemName:a,key:n,source:r,property:l,domain:c,boundSeries:h,fractionDigits:i}}};us.className="RadiusNumberAxis",us.type="radius-number",p([nl],us.prototype,"min",2),p([nl],us.prototype,"max",2);var{ordinalTimeAxisOptionsDefs:Pg,angleNumberAxisOptionsDefs:Cg,angleCategoryAxisOptionsDefs:_g,radiusNumberAxisOptionsDefs:wg,radiusCategoryAxisOptionsDefs:Eg}=kd,rl={type:"axis",name:"ordinal-time",chartType:"cartesian",enterprise:!0,options:Pg,create:e=>new Us(e)},ll={type:"axis",name:"angle-number",chartType:"polar",enterprise:!0,options:Cg,create:e=>new Ti(e)},cl={type:"axis",name:"angle-category",chartType:"polar",enterprise:!0,options:_g,create:e=>new ai(e)},pl={type:"axis",name:"radius-number",chartType:"polar",enterprise:!0,options:wg,create:e=>new us(e)},hl={type:"axis",name:"radius-category",chartType:"polar",enterprise:!0,options:Eg,create:e=>new ni(e)};import{_ModuleSupport as Og}from"ag-charts-community";import{_ModuleSupport as Fg}from"ag-charts-community";var{Chart:Bg}=Fg,Va=class extends Bg{getChartType(){return"standalone"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e,o=s.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=o,this.animationRect=o;for(const a of[t,i])a.translationX=Math.floor(o.x),a.translationY=Math.floor(o.y);t.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:o,paddedRect:s}})}getAriaLabel(){const e=this.series[0]?.type;if(e==null)return"";const t=this.getCaptionText();switch(e){case"radial-gauge":case"linear-gauge":{const i=[];t.length!==0&&i.push(t);for(const s of this.series)i.push(s.getCaptionText());return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i.join(". ")})}case"treemap":case"sunburst":return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:t});default:return this.ctx.localeManager.t("ariaAnnounceStandaloneChart",{caption:t})}}};Va.className="StandaloneChart",Va.type="standalone";var{isAgStandaloneChartOptions:Gg,standaloneChartOptionsDefs:Vg}=Og,ul={type:"chart",name:"standalone",enterprise:!0,options:Vg,detect:Gg,create(e,t){return new Va(e,t)}};import{_ModuleSupport as Kg}from"ag-charts-community";import{_ModuleSupport as Wg}from"ag-charts-community";var{Chart:zg,MercatorScale:dl,NumberAxis:gl,Property:Hg}=Wg;function fl(e){return e.type==="map-shape"||e.type==="map-line"||e.type==="map-marker"||e.type==="map-shape-background"||e.type==="map-line-background"}var Js=class extends zg{constructor(e,t){super(e,t),this.xAxis=new gl(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new gl(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const e=this.getOptions();this.topology!==e.topology&&(this.topology=e.topology);const{topology:t}=this;this.series.forEach(i=>{fl(i)&&i.setChartTopology(t)})}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e,o=s.clone().shrink(this.modulesManager.getModule("seriesArea").getPadding());this.seriesRect=o,this.animationRect=o;const a=this.series.filter(fl),n=a.reduce((c,h)=>{if(!h.visible)return c;const u=h.topologyBounds;return u==null?c:c==null?u:c.merge(u)},void 0);let r;if(n!=null){const{lon0:c,lat0:h,lon1:u,lat1:d}=n,g=[[c,h],[u,d]],y=dl.bounds(g),{width:f,height:m}=o,S=Math.min(f/y.width,m/y.height),D=y.width*S,b=y.height*S,x=(f-D)/2,k=(m-b)/2,I=x,A=k,v=x+D,N=k+b,L=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),M=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),R=(v-I)/(L.max-L.min),C=I-R*L.min,w=(N-A)/(1-M.min-(1-M.max)),T=A-w*(1-M.max);r=new dl(g,[[C,T],[C+R,T+w]])}a.forEach(c=>{c.scale=r});const l=this.series.some(c=>c.visible);t.visible=l;for(const c of[t,i])c.translationX=Math.floor(o.x),c.translationY=Math.floor(o.y),c.setClipRect(o.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:l,rect:o,paddedRect:s}})}};Js.className="TopologyChart",Js.type="topology",p([Hg],Js.prototype,"topology",2);var{isAgTopologyChartOptions:$g,topologyChartOptionsDefs:Xg}=Kg,yl={type:"chart",name:"topology",enterprise:!0,options:Xg,detect:$g,create(e,t){return new Js(e,t)}};import{_ModuleSupport as Yg}from"ag-charts-community";import{_ModuleSupport as Ug}from"ag-charts-community";import{and as Zs,arrayOf as qg,arrayOfDefs as ml,boolean as ri,constant as Sl,greaterThan as xl,lessThan as bl,number as Ct,numberRange as jg,optionsDefs as Dl,or as li,ratio as Qs,required as Jg,string as vt,typeUnion as Zg,union as Qg}from"ag-charts-core";var{annotationCalloutStylesDefs:ef,annotationNoteStylesDefs:tf,annotationTextStylesDef:sf,annotationCommentStylesDefs:of,annotationMeasurerStylesDefs:Ka,annotationShapeStylesDefs:vl,annotationChannelTextDefs:af,annotationCrossLineStyleDefs:kl,annotationFibonacciStylesDefs:Il,annotationLineStyleDefs:Al,annotationLineTextDefs:nf,annotationDisjointChannelStyleDefs:rf,annotationParallelChannelStyleDefs:lf}=Ug,ds=Dl({__type:Jg(Sl("date")),value:li(vt,Ct)},"a serializable date object"),Ml=li(vt,Ct,ds),Wa=li(Ml,Dl({value:Ml,groupPercentage:jg(-1,2)})),Nl={...af,label:vt},Bt={...nf,label:vt},de={x:Wa,y:Ct},cf=Zg({line:{...Al,start:de,end:de,text:Bt},"horizontal-line":{...kl,value:Wa,text:Bt},"vertical-line":{...kl,value:Wa,text:Bt},"disjoint-channel":{...rf,startHeight:Ct,endHeight:Ct,start:de,end:de,text:Nl},"parallel-channel":{...lf,height:Ct,start:de,end:de,text:Nl},"fibonacci-retracement":{...Il,start:de,end:de,text:Bt,reverse:ri},"fibonacci-retracement-trend-based":{...Il,start:de,end:de,endRetracement:de,text:Bt,reverse:ri},callout:{...ef,start:de,end:de,text:vt},comment:{...of,...de,text:vt},note:{...tf,...de,text:vt},text:{...sf,...de,text:vt},arrow:{...Al,text:Bt,start:de,end:de},"arrow-up":{...vl,...de},"arrow-down":{...vl,...de},"date-range":{...Ka,extendAbove:ri,extendBelow:ri,text:Bt,start:de,end:de},"price-range":{...Ka,extendLeft:ri,extendRight:ri,text:Bt,start:de,end:de},"date-price-range":{...Ka,text:Bt,start:de,end:de}},"an annotation initial state object"),pf={chartType:Qg("candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"),annotations:ml(cf),legend:ml({visible:ri,seriesId:vt,itemId:vt,legendItemName:vt},"legend state array"),zoom:{rangeX:{start:li(Ct,ds),end:li(Ct,ds)},rangeY:{start:li(Ct,ds),end:li(Ct,ds)},ratioX:{start:Zs(Qs,bl("end")),end:Zs(Qs,xl("start"))},ratioY:{start:Zs(Qs,bl("end")),end:Zs(Qs,xl("start"))},autoScaledAxes:qg(Sl("y"))}};import{_ModuleSupport as hf}from"ag-charts-community";import{array as uf,arrayOfDefs as df,boolean as gs,callback as gf,color as eo,fontOptionsDef as ff,number as Ll,positiveNumber as dt,ratio as yf,typeUnion as mf}from"ag-charts-core";import{_ModuleSupport as Sf}from"ag-charts-community";import{_ModuleSupport as za}from"ag-charts-community";function xf(e){return{from:e?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}function bf(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}import{_ModuleSupport as Tl}from"ag-charts-community";import{Logger as Df}from"ag-charts-core";var{ScalableGroup:vf,Rect:fs,Line:ys,BBox:kf,Selection:Rl,applyShapeFillBBox:If}=Tl,Af=class extends vf{constructor(){super(),this.append([new fs({tag:0}),new fs({tag:2}),new fs({tag:1}),new ys({tag:3}),new ys({tag:3}),new ys({tag:4}),new ys({tag:4})])}updateDatumStyles(e,t,i,s,o){const{bandwidth:a,scaledValues:{xValue:n,medianValue:r}}=e;let{minValue:l,q1Value:c,q3Value:h,maxValue:u}=e.scaledValues;(i&&!s||!i&&s)&&([u,h,c,l]=[l,c,h,u]);const d=(G,V,K,W)=>i?{y:G,x:V,width:W,height:K}:{x:G,y:V,width:K,height:W},g=(G,V,K)=>i?{y1:G,y2:V,x:K}:{x1:G,x2:V,y:K},y=(G,V,K)=>i?{x1:V,x2:K,y:G}:{x:G,y1:V,y2:K},f=(G,V,K,W)=>({x:G,y:V,width:K,height:W}=d(G,V,K,W),new kf(G,V,K,W)),{opacity:m,fill:S,fillOpacity:D,stroke:b,strokeWidth:x,strokeOpacity:k,lineDash:I,lineDashOffset:A,cornerRadius:v,cap:N,whisker:L}=t;this.opacity=m??1;const M=Rl.select(this,fs),[R]=M.selectByTag(0),[C]=M.selectByTag(2),[w]=M.selectByTag(1),T=M.selectByTag(3),_=M.selectByTag(4);L.strokeWidth>a&&(L.strokeWidth=a);const P=d(c,n,h-c,a);C.setProperties(P),R.setProperties(P),R.setProperties({cornerRadius:v});const O=Math.max(Math.round(r-x/2),c+x),E=Math.min(Math.round(r+x/2),h-x);w.setProperties(P),w.setProperties({visible:O<E,cornerRadius:v,clipBBox:f(O,n+x,E-O,Math.max(0,a-x*2))});const F=Math.floor(n+a*(1-N.lengthRatio)/2),B=Math.ceil(n+a*(1+N.lengthRatio)/2);_[0].setProperties(y(l,F,B)),_[1].setProperties(y(u,F,B)),T[0].setProperties(g(Math.round(l+L.strokeWidth/2),c,Math.floor(n+a/2))),T[1].setProperties(g(h,Math.round(u-L.strokeWidth/2),Math.floor(n+a/2))),If(R,S,o),R.setProperties({fill:S,fillOpacity:D,strokeWidth:x*2,strokeOpacity:0}),w.setProperties({fill:b,fillOpacity:k,strokeWidth:0});for(const G of[...T,..._])G.setProperties(L);C.setProperties({stroke:b,strokeWidth:x,strokeOpacity:k,lineDash:I,lineDashOffset:A,cornerRadius:v,fillOpacity:0})}distanceSquared(e,t){const i=Rl.selectByClass(this,fs,ys);return Tl.nearestSquared(e,t,i).distanceSquared}get midPoint(){const e=this.datum;return e.midPoint===void 0?(Df.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):e.midPoint}};import{_ModuleSupport as Mf}from"ag-charts-community";var{BaseProperties:Pl,FillGradientDefaults:Nf,FillPatternDefaults:Lf,FillImageDefaults:Tf,AbstractBarSeriesProperties:Rf,makeSeriesTooltip:Pf,Property:re,mergeDefaults:Cf}=Mf,Cl=class extends Pl{constructor(){super(...arguments),this.lengthRatio=.5}};p([re],Cl.prototype,"lengthRatio",2);var Ri=class extends Pl{};p([re],Ri.prototype,"stroke",2),p([re],Ri.prototype,"strokeWidth",2),p([re],Ri.prototype,"strokeOpacity",2),p([re],Ri.prototype,"lineDash",2),p([re],Ri.prototype,"lineDashOffset",2);var pe=class extends Rf{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Nf,this.fillPatternDefaults=new Lf,this.fillImageDefaults=new Tf,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new Cl,this.whisker=new Ri,this.tooltip=Pf()}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:o}=this,a=super.toJson();return a.whisker=Cf(a.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,lineDashOffset:o}),a}getStyle(){const{fill:e,fillOpacity:t,strokeWidth:i,strokeOpacity:s,stroke:o,lineDash:a,lineDashOffset:n,cornerRadius:r,cap:l,whisker:c}=this;return{fill:e,fillOpacity:t,strokeWidth:i,strokeOpacity:s,stroke:o,lineDash:a,lineDashOffset:n,cornerRadius:r,cap:l,whisker:c,opacity:1}}};p([re],pe.prototype,"xKey",2),p([re],pe.prototype,"minKey",2),p([re],pe.prototype,"q1Key",2),p([re],pe.prototype,"medianKey",2),p([re],pe.prototype,"q3Key",2),p([re],pe.prototype,"maxKey",2),p([re],pe.prototype,"xName",2),p([re],pe.prototype,"yName",2),p([re],pe.prototype,"minName",2),p([re],pe.prototype,"q1Name",2),p([re],pe.prototype,"medianName",2),p([re],pe.prototype,"q3Name",2),p([re],pe.prototype,"maxName",2),p([re],pe.prototype,"fill",2),p([re],pe.prototype,"fillGradientDefaults",2),p([re],pe.prototype,"fillPatternDefaults",2),p([re],pe.prototype,"fillImageDefaults",2),p([re],pe.prototype,"fillOpacity",2),p([re],pe.prototype,"stroke",2),p([re],pe.prototype,"strokeWidth",2),p([re],pe.prototype,"strokeOpacity",2),p([re],pe.prototype,"lineDash",2),p([re],pe.prototype,"lineDashOffset",2),p([re],pe.prototype,"cornerRadius",2),p([re],pe.prototype,"itemStyler",2),p([re],pe.prototype,"cap",2),p([re],pe.prototype,"whisker",2),p([re],pe.prototype,"tooltip",2);var{fixNumericExtent:_f,keyProperty:wf,mergeDefaults:Ha,SeriesNodePickMode:_l,SMALLEST_KEY_INTERVAL:Ef,valueProperty:ms,diff:Of,animationValidation:Ff,computeBarFocusBounds:Bf,createDatumId:Gf,ContinuousScale:Vf,ChartAxisDirection:Kf,motion:wl,getShapeStyle:$a}=za,Wf=class extends za.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.minKey=s.properties.minKey,this.q1Key=s.properties.q1Key,this.medianKey=s.properties.medianKey,this.q3Key=s.properties.q3Key,this.maxKey=s.properties.maxKey}},to=class extends za.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[_l.NEAREST_NODE,_l.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},propertyNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.properties=new pe,this.NodeEvent=Wf}async processData(e){if(!this.visible)return;const{xKey:t,minKey:i,q1Key:s,medianKey:o,q3Key:a,maxKey:n}=this.properties,r=!this.ctx.animationManager.isSkipped(),l=this.getCategoryAxis()?.scale,c=this.getValueAxis()?.scale,{isContinuousX:h,xScaleType:u,yScaleType:d}=this.getScaleInformation({xScale:l,yScale:c}),g=[];r&&this.processedData&&g.push(Of(this.id,this.processedData)),r&&g.push(Ff());const{processedData:y}=await this.requestDataModel(e,this.data,{props:[wf(t,u,{id:"xValue"}),ms(i,d,{id:"minValue"}),ms(s,d,{id:"q1Value"}),ms(o,d,{id:"medianValue"}),ms(a,d,{id:"q3Value"}),ms(n,d,{id:"maxValue"}),...h?[Ef]:[],...g]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:o,def:a}=i.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[o];return a.type==="key"&&a.valueType==="category"?n:this.padBandExtent(n)}const s=this.domainForClippedRange(e,["minValue","maxValue"],"xValue");return _f(s)}getSeriesRange(e,t){return this.domainForVisibleRange(Kf.Y,["maxValue","minValue"],"xValue",t)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&i&&s&&o))return;const{xKey:a}=this.properties,n=[],r=t.resolveKeysById(this,"xValue",i),l=t.resolveColumnById(this,"minValue",i),c=t.resolveColumnById(this,"q1Value",i),h=t.resolveColumnById(this,"medianValue",i),u=t.resolveColumnById(this,"q3Value",i),d=t.resolveColumnById(this,"maxValue",i),{barWidth:g,groupIndex:y}=this.updateGroupScale(s),f=Vf.is(s.scale)?g*-.5:0,{groupScale:m}=this,S=this.isVertical(),D={itemId:a,nodeData:n,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};return e&&(i.dataSources.get(this.id)??[]).forEach((x,k)=>{const I=r[k];if(I==null)return;const A=l[k],v=c[k],N=h[k],L=u[k],M=d[k];if([A,v,N,L,M].some(E=>typeof E!="number")||A>v||v>N||N>L||L>M)return;const R={xValue:Math.round(s.scale.convert(I)),minValue:Math.round(o.scale.convert(A)),q1Value:Math.round(o.scale.convert(v)),medianValue:Math.round(o.scale.convert(N)),q3Value:Math.round(o.scale.convert(L)),maxValue:Math.round(o.scale.convert(M))};R.xValue+=Math.round(m.convert(String(y)))+f;const C=Math.round(g),w=Math.abs(R.q3Value-R.q1Value),T=R.xValue+C/2,_=Math.min(R.q3Value,R.q1Value)+w/2,P={x:S?T:_,y:S?_:T};let O;S?O={x:P.x-C/2,y:R.minValue,width:C,height:R.maxValue-R.minValue}:O={x:R.minValue,y:P.y-C/2,width:R.maxValue-R.minValue,height:C},n.push({series:this,itemId:I,datum:x,datumIndex:k,xKey:a,bandwidth:C,scaledValues:R,midPoint:P,focusRect:O})}),D}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:$a({fill:e,fillOpacity:t,stroke:i,strokeOpacity:o,strokeWidth:s,lineDash:a,lineDashOffset:n},r,l,c)}}getLegendData(e){const{id:t,ctx:{legendManager:i},visible:s}=this,{xKey:o,yName:a,showInLegend:n,legendItemName:r}=this.properties;return!o||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:t}),label:{text:r??a??t},symbol:this.legendItemSymbol(),legendItemName:r,hideInLegend:!n}]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:n,yName:r,medianKey:l,medianName:c,q1Key:h,q1Name:u,q3Key:d,q3Name:g,minKey:y,minName:f,maxKey:m,maxName:S,legendItemName:D,tooltip:b}=o,x=this.getCategoryAxis(),k=this.getValueAxis();if(!i||!s||!x||!k)return;const I=s.dataSources.get(this.id)?.[e],A=i.resolveKeysById(this,"xValue",s)[e],v=i.resolveColumnById(this,"minValue",s)[e],N=i.resolveColumnById(this,"q1Value",s)[e],L=i.resolveColumnById(this,"medianValue",s)[e],M=i.resolveColumnById(this,"q3Value",s)[e],R=i.resolveColumnById(this,"maxValue",s)[e];if(A==null)return;const C=this.getItemStyle({datumIndex:e,datum:I},!1),w=[{label:f,fallbackLabel:y,value:this.getAxisValueText(k,"tooltip",v,I,y,D)},{label:u,fallbackLabel:h,value:this.getAxisValueText(k,"tooltip",N,I,h,D)},{label:c,fallbackLabel:l,value:this.getAxisValueText(k,"tooltip",L,I,l,D)},{label:g,fallbackLabel:d,value:this.getAxisValueText(k,"tooltip",M,I,d,D)},{label:S,fallbackLabel:m,value:this.getAxisValueText(k,"tooltip",R,I,m,D)}];return this.formatTooltipWithContext(b,{heading:this.getAxisValueText(x,"tooltip",A,I,a,D),title:D??r,symbol:this.legendItemSymbol(),data:w},{seriesId:t,datum:I,title:r,xKey:a,xName:n,yName:r,medianKey:l,medianName:c,q1Key:h,q1Name:u,q3Key:d,q3Name:g,minKey:y,minName:f,maxKey:m,maxName:S,...C})}animateEmptyUpdateReady({datumSelection:e}){const t=this.isVertical(),{from:i,to:s}=xf(t);wl.resetMotion([e],bf(t)),wl.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[e],i,s,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}getItemStyle({datumIndex:e,datum:t},i){const{id:s,properties:o}=this,{xKey:a,minKey:n,q1Key:r,medianKey:l,q3Key:c,maxKey:h,fillGradientDefaults:u,fillPatternDefaults:d,fillImageDefaults:g,itemStyler:y}=o,f=this.getHighlightStyle(i);let m=$a(Ha(f,o.getStyle()),u,d,g);if(y!=null&&e!=null){const I=this.cachedDatumCallback(Gf(e,i?"highlight":"node"),()=>{const A=this.ctx.highlightManager?.getActiveHighlight(),v=this.getHighlightStateString(A,i,e);return this.callWithContext(y,{seriesId:s,datum:t,xKey:a,minKey:n,q1Key:r,medianKey:l,q3Key:c,maxKey:h,highlighted:i,highlightState:v,...m})});I&&(m=$a(Ha(I,m),u,d,g))}const{stroke:S,strokeWidth:D,strokeOpacity:b,lineDash:x,lineDashOffset:k}=m;return m.whisker=Ha(m.whisker,{stroke:S,strokeWidth:D,strokeOpacity:b,lineDash:x,lineDashOffset:k}),m}updateDatumNodes({datumSelection:e,isHighlight:t}){const i=this.isVertical(),s=this.getValueAxis()?.isReversed();e.each((o,a)=>{const n=this.getItemStyle(a,t),r=this.getShapeFillBBox();o.updateDatumStyles(a,n,i,s,r)})}updateLabelNodes(){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}nodeFactory(){return new Af}computeFocusBounds({datumIndex:e}){return Bf(this,this.contextNodeData?.nodeData[e].focusRect)}hasItemStylers(){return this.properties.itemStyler!=null}};to.className="BoxPlotSeries",to.type="box-plot";import{_ModuleSupport as zf}from"ag-charts-community";import{boolean as Hf,constant as $f,required as ci,string as st}from"ag-charts-core";var{boxPlotSeriesThemeableOptionsDef:Xf,commonSeriesOptionsDefs:Yf}=zf,Uf={...Yf,...Xf,type:ci($f("box-plot")),xKey:ci(st),minKey:ci(st),q1Key:ci(st),medianKey:ci(st),q3Key:ci(st),maxKey:ci(st),xName:st,yName:st,minName:st,q1Name:st,medianName:st,q3Name:st,maxName:st,grouped:Hf,legendItemName:st};import{_ModuleSupport as Ss}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:El},multiSeriesHighlightStyle:qf}=Ss,jf={series:{direction:"vertical",fill:{$if:[{$or:[{$isGradient:{$palette:"fill"}},{$isPattern:{$palette:"fill"}},{$isImage:{$palette:"fill"}}]},{$palette:"fill"},{$mix:[Ss.SAFE_FILL_OPERATION,{$ref:"chartBackgroundColor"},.7]}]},stroke:{$palette:"stroke"},fillGradientDefaults:Ss.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:Ss.FILL_PATTERN_DEFAULTS,fillImageDefaults:Ss.FILL_IMAGE_DEFAULTS,strokeWidth:2,highlight:qf()},axes:{[El.NUMBER]:{crosshair:{snap:!1}},[El.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},PT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",moduleFactory:e=>new to(e),defaultAxes:Sf.DIRECTION_SWAP_AXES,themeTemplate:jf,groupable:!0},Xa={type:"series",name:"box-plot",chartType:"cartesian",enterprise:!0,options:Uf,create:e=>new to(e)};import{_ModuleSupport as Jf}from"ag-charts-community";import{_ModuleSupport as Zf}from"ag-charts-community";import{_ModuleSupport as Ya}from"ag-charts-community";import{Logger as Ol}from"ag-charts-core";import{_ModuleSupport as Qf}from"ag-charts-community";var{AGGREGATION_SPAN:Fl,AGGREGATION_INDEX_X_MAX:ey,AGGREGATION_INDEX_X_MIN:ty,AGGREGATION_INDEX_Y_MAX:iy,AGGREGATION_INDEX_Y_MIN:sy,aggregationDomain:oy,aggregationRangeFittingPoints:ay,compactAggregationIndices:ny,createAggregationIndices:ry}=Qf,ly=1e3,Bl=ty,cy=iy,py=sy,Gl=ey;function hy(e,t,i,s,o){if(t.length<ly)return;const[a,n]=oy(e,o);let r=ay(t),{indexData:l,valueData:c}=ry(t,i,s,a,n,r);const h=[{maxRange:r,indexData:l}];for(;r>64;)({indexData:l,valueData:c,maxRange:r}=ny(l,c,r)),h.push({maxRange:r,indexData:l});return h.reverse(),h}var{fixNumericExtent:uy,keyProperty:dy,createDatumId:Vl,SeriesNodePickMode:Kl,ChartAxisDirection:Wl,SMALLEST_KEY_INTERVAL:gy,valueProperty:io,diff:fy,animationValidation:yy,computeBarFocusBounds:my,visibleRangeIndices:zl,BandScale:Sy,getShapeStyle:Ua,processedDataIsAnimatable:xy,mergeDefaults:qa,simpleMemorize2:by}=Ya,Dy=by(hy),vy=class extends Ya.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.openKey=s.properties.openKey,this.closeKey=s.properties.closeKey,this.highKey=s.properties.highKey,this.lowKey=s.properties.lowKey}},Hl=class extends Ya.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Kl.AXIS_ALIGNED,Kl.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},propertyNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},categoryKey:"xValue",pathsPerSeries:[]}),this.NodeEvent=vy,this.dataAggregationFilters=void 0}async processData(e){if(!this.visible)return;const{xKey:t,openKey:i,closeKey:s,highKey:o,lowKey:a}=this.properties,n=!this.ctx.animationManager.isSkipped(),r=this.getCategoryAxis()?.scale,l=this.getValueAxis()?.scale,{isContinuousX:c,xScaleType:h,yScaleType:u}=this.getScaleInformation({xScale:r,yScale:l}),d=[];n&&(this.processedData&&d.push(fy(this.id,this.processedData)),d.push(yy())),i&&d.push(io(i,u,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{dataModel:g,processedData:y}=await this.requestDataModel(e,this.data,{props:[dy(t,h,{id:"xValue"}),io(s,u,{id:"closeValue"}),io(o,u,{id:"highValue"}),io(a,u,{id:"lowValue"}),...c?[gy]:[],...d]});this.smallestDataInterval=y.reduced?.smallestKeyInterval,this.dataAggregationFilters=this.aggregateData(g,y),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="ungrouped"||xy(t))return;const i=this.axes[Wl.X];if(i==null)return;const s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"highValue",t),a=e.resolveColumnById(this,"lowValue",t),{index:n}=e.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[n];return Dy(i.scale.type,s,o,a,r)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];if(e!==this.getBarDirection()){const{index:o,def:a}=i.resolveProcessedDataDefById(this,"xValue"),n=t.domain.keys[o];return a.type==="key"&&a.valueType==="category"?n:this.padBandExtent(n)}const s=this.domainForClippedRange(e,["highValue","lowValue"],"xValue");return uy(s)}getSeriesRange(e,t){return this.domainForVisibleRange(Wl.Y,["highValue","lowValue"],"xValue",t)}getVisibleItems(e,t,i){return this.countVisibleItems("xValue",["highValue","lowValue"],e,t,i)}createNodeData(){const{visible:e,dataModel:t,processedData:i}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&i&&s&&o))return;const a=[],{xKey:n,highKey:r,lowKey:l}=this.properties,c=i.dataSources.get(this.id)??[],h=t.resolveKeysById(this,"xValue",i),u=t.resolveColumnById(this,"openValue",i),d=t.resolveColumnById(this,"closeValue",i),g=t.resolveColumnById(this,"highValue",i),y=t.resolveColumnById(this,"lowValue",i),{groupScale:f}=this,{barWidth:m,groupIndex:S}=this.updateGroupScale(s),D=f.convert(String(S)),b=m>=1?m:f.rawBandwidth,x=Sy.is(s.scale),k={itemId:n,nodeData:a,labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!e)return k;const I=(w,T,_,P,O,E,F,B)=>{const G=c[w],V=x?F/2:0,K=s.scale.convert(T)+D+V,W=o.scale.convert(_),$=o.scale.convert(P),X=o.scale.convert(O),q=o.scale.convert(E),Z=P>_,se=Z?"up":"down",j=Math.min(X,q),Y=Math.max(X,q)-j,oe={x:K,y:j+Y/2};a.push({series:this,itemId:se,datum:G,datumIndex:w,xKey:n,xValue:T,openValue:_,closeValue:P,highValue:O,lowValue:E,midPoint:oe,aggregatedValue:P,isRising:Z,centerX:K,width:F,y:j,height:Y,yOpen:W,yClose:$,crisp:B})},{dataAggregationFilters:A}=this,v=s.scale,[N,L]=v.range,M=Math.abs(L-N),R=w=>v.convert(h[w])+D,C=A?.find(w=>w.maxRange>M);if(C==null){const w=i.invalidData?.get(this.id);let[T,_]=zl(1,c.length,s.range,P=>{const O=x?0:-b/2,E=R(P)+O;return[E,E+b]});i.input.count<1e3&&(T=0,_=i.input.count);for(let P=T;P<_;P+=1){if(w?.[P]===!0)continue;const O=h[P];if(O==null)continue;const E=u[P],F=d[P],B=g[P],G=y[P],V=G!=null&&G<=E&&G<=F,K=B!=null&&B>=E&&B>=F;if(!V){Ol.warnOnce(`invalid low value for key [${l}] in data element, low value cannot be higher than datum open or close values`);continue}if(!K){Ol.warnOnce(`invalid high value for key [${r}] in data element, high value cannot be lower than datum open or close values.`);continue}I(P,O,E,F,B,G,b,!0)}}else{const{maxRange:w,indexData:T}=C,[_,P]=zl(1,w,s.range,O=>{const E=O*Fl,F=T[E+Bl],B=T[E+Gl];if(F===-1)return;const G=x?0:-b/2;return[R(F)+G,R(B)+G+b]});for(let O=_;O<P;O+=1){const E=O*Fl,F=T[E+Bl],B=T[E+Gl],G=T[E+cy],V=T[E+py];if(F===-1)continue;const K=(F+B)/2|0,W=h[K];if(W==null)continue;const $=u[F],X=d[B],q=g[G],Z=y[V],se=Math.abs(R(B)-R(F))+b;I(K,W,$,X,q,Z,se,!1)}}return k}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(e){const t=e.nodeData??[];return e.datumSelection.update(t)}updateLabelNodes(e){}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}getItemStyle({datumIndex:e,itemId:t="up",datum:i,xValue:s},o){const{id:a,properties:n}=this,r=n.item[t],{itemStyler:l}=n,c=this.getHighlightStyle(o),h=qa(c,n.getStyle(t));let u=r.fillGradientDefaults&&r.fillPatternDefaults&&r.fillImageDefaults?Ua(h,r.fillGradientDefaults,r.fillPatternDefaults,r.fillImageDefaults):h;if(l!=null&&e!=null){const{xKey:d,openKey:g,closeKey:y,highKey:f,lowKey:m}=n,S=this.ctx.highlightManager?.getActiveHighlight(),D=this.cachedDatumCallback(Vl(Vl(s),o?"highlight":"node"),()=>{const b=this.getHighlightStateString(S,o,e);return this.callWithContext(l,{seriesId:a,datum:i,itemId:t,xKey:d,openKey:g,closeKey:y,highKey:f,lowKey:m,highlighted:o,highlightState:b,...u})});D&&(u=r.fillGradientDefaults&&r.fillPatternDefaults&&r.fillImageDefaults?Ua(qa(D,u),r.fillGradientDefaults,r.fillPatternDefaults,r.fillImageDefaults):qa(D,u))}return u}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:n,yName:r,openKey:l,openName:c,highKey:h,highName:u,lowKey:d,lowName:g,closeKey:y,closeName:f,legendItemName:m,tooltip:S}=o,D=this.getCategoryAxis(),b=this.getValueAxis();if(!i||!s||!D||!b)return;const x=s.dataSources.get(this.id)?.[e],k=i.resolveKeysById(this,"xValue",s)[e],I=i.resolveColumnById(this,"openValue",s)[e],A=i.resolveColumnById(this,"highValue",s)[e],v=i.resolveColumnById(this,"lowValue",s)[e],N=i.resolveColumnById(this,"closeValue",s)[e];if(k==null)return;const L=N>=I?"up":"down",M=this.properties.item[L],R=this.getItemStyle({datumIndex:e,datum:x,itemId:L},!1);let C={fill:M.fill??M.stroke,fillOpacity:M.fillOpacity??M.strokeOpacity??1,stroke:M.stroke,strokeWidth:M.strokeWidth??1,strokeOpacity:M.strokeOpacity??1,lineDash:M.lineDash??[0],lineDashOffset:M.lineDashOffset??0};return M.fillGradientDefaults&&M.fillPatternDefaults&&M.fillImageDefaults&&(C=Ua(C,M.fillGradientDefaults,M.fillPatternDefaults,M.fillImageDefaults)),this.formatTooltipWithContext(S,{heading:this.getAxisValueText(D,"tooltip",k,x,a,m),title:m,symbol:{marker:C},data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(b,"tooltip",I,x,l,m)},{label:u,fallbackLabel:h,value:this.getAxisValueText(b,"tooltip",A,x,h,m)},{label:g,fallbackLabel:d,value:this.getAxisValueText(b,"tooltip",v,x,d,m)},{label:f,fallbackLabel:y,value:this.getAxisValueText(b,"tooltip",N,x,y,m)}]},{seriesId:t,datum:x,title:r,itemId:L,xKey:a,xName:n,yName:r,openKey:l,openName:c,highKey:h,highName:u,lowKey:d,lowName:g,closeKey:y,closeName:f,...R})}computeFocusBounds(e){const t=this.getNodeData()?.at(e.datumIndex);if(t==null)return;const{centerX:i,y:s,width:o,height:a}=t,n={x:i-o/2,y:s,width:o,height:a};return my(this,n)}};import{_ModuleSupport as ky}from"ag-charts-community";import{_ModuleSupport as Iy}from"ag-charts-community";var{Path:Ay,SceneChangeDetection:$t,BBox:My}=Iy,_t=class extends Ay{constructor(){super(...arguments),this.centerX=0,this.y=0,this.width=0,this.height=0,this.yOpen=0,this.yClose=0,this.crisp=!1,this.strokeAlignment=0}computeBBox(){const{centerX:e,y:t,width:i,height:s}=this;return new My(e-i/2,t,i,s)}isPointInPath(e,t){return this.getBBox().containsPoint(e,t)}distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}get midPoint(){return{x:this.centerX,y:this.y+this.height/2}}alignedCoordinates(){const{y:e,width:t,height:i,crisp:s,strokeAlignment:o}=this;let{centerX:a,yOpen:n,yClose:r}=this,l=a-t/2,c=a+t/2,h=e,u=e+i;if(s&&t>1){a=this.align(a),n=this.align(n),r=this.align(r);const g=this.align(t/2);l=a-g,c=a+g,h=this.align(e),u=h+this.align(h,i)}const d=(h+u)/2;return a+=o,l+=o,c+=o,h-=o,u+=o,n+=n<d?o:-o,r+=r<d?o:-o,{centerX:a,x0:l,x1:c,y0:h,y1:u,yOpen:n,yClose:r}}executeStroke(e,t){const{width:i,strokeWidth:s}=this;i<s&&(e.lineWidth=i),super.executeStroke(e,t)}};p([$t()],_t.prototype,"centerX",2),p([$t()],_t.prototype,"y",2),p([$t()],_t.prototype,"width",2),p([$t()],_t.prototype,"height",2),p([$t()],_t.prototype,"yOpen",2),p([$t()],_t.prototype,"yClose",2),p([$t()],_t.prototype,"crisp",2),p([$t()],_t.prototype,"strokeAlignment",2);var Ny=class extends _t{updatePath(){const{path:e}=this,{centerX:t,x0:i,x1:s,y0:o,y1:a,yOpen:n,yClose:r}=this.alignedCoordinates();e.clear(),e.moveTo(t,o),e.lineTo(t,a),Math.abs(s-i)>1&&(e.moveTo(i,n),e.lineTo(t,n),e.moveTo(t,r),e.lineTo(s,r))}},{SceneArrayChangeDetection:Ly,SceneChangeDetection:so,ExtendedPath2D:Ty,BBox:Ry}=ky,Pi=class extends _t{constructor(){super(...arguments),this.wickPath=new Ty,this.wickStroke=void 0,this.wickStrokeWidth=void 0,this.wickStrokeOpacity=void 0}computeDefaultGradientFillBBox(){const{width:e,centerX:t,yOpen:i,yClose:s}=this,o=Math.min(i,s),n=Math.max(i,s)-o,r=t-e/2,l=t+e/2;return new Ry(r,o,l-r,n)}updatePath(){const{path:e,stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,lineDashOffset:a,wickStroke:n,wickStrokeWidth:r,wickStrokeOpacity:l,wickLineDash:c,wickLineDashOffset:h,strokeAlignment:u}=this,{centerX:d,x0:g,x1:y,y0:f,y1:m,yOpen:S,yClose:D}=this.alignedCoordinates();this.path.clear(),this.wickPath.clear();const x=n!=null&&n!==t||r!=null&&r!==i||l!=null&&l!==s||c!=null&&c!==o||h!=null&&h!==a?this.wickPath:e;if(Math.abs(y-g)<=3){x.moveTo(d,f),x.lineTo(d,m);return}const k=Math.min(S,D),I=Math.max(S,D);x.moveTo(d,f),x.lineTo(d,k+i/2),x.moveTo(d,m),x.lineTo(d,I-i/2);const A=u+i/2,v=I-k-2*A;if(v>0)e.rect(g+A,k+A,y-g-2*A,v);else{const N=(k+I)/2;e.moveTo(g,N),e.lineTo(y,N)}}drawPath(e){super.drawPath(e);const{wickPath:t}=this;if(t.isEmpty())return;const{stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,wickStroke:r=i,wickStrokeWidth:l=s,wickStrokeOpacity:c=o,wickLineDash:h=a,wickLineDashOffset:u=n}=this;l!==0&&(e.globalAlpha*=c,typeof r=="string"&&(e.strokeStyle=r),e.lineWidth=l,h!=null&&e.setLineDash([...h]),e.lineDashOffset=u,e.stroke(t.getPath2D()))}};p([so()],Pi.prototype,"wickStroke",2),p([so()],Pi.prototype,"wickStrokeWidth",2),p([so()],Pi.prototype,"wickStrokeOpacity",2),p([Ly()],Pi.prototype,"wickLineDash",2),p([so()],Pi.prototype,"wickLineDashOffset",2);import{_ModuleSupport as Py}from"ag-charts-community";import{_ModuleSupport as Cy}from"ag-charts-community";var{BaseProperties:$l,Property:Ce,AbstractBarSeriesProperties:_y,makeSeriesTooltip:wy}=Cy,pi=class extends $l{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([Ce],pi.prototype,"stroke",2),p([Ce],pi.prototype,"strokeWidth",2),p([Ce],pi.prototype,"strokeOpacity",2),p([Ce],pi.prototype,"lineDash",2),p([Ce],pi.prototype,"lineDashOffset",2);var ja=class extends $l{constructor(){super(...arguments),this.up=new pi,this.down=new pi}};p([Ce],ja.prototype,"up",2),p([Ce],ja.prototype,"down",2);var rt=class extends _y{};p([Ce],rt.prototype,"xKey",2),p([Ce],rt.prototype,"openKey",2),p([Ce],rt.prototype,"closeKey",2),p([Ce],rt.prototype,"highKey",2),p([Ce],rt.prototype,"lowKey",2),p([Ce],rt.prototype,"xName",2),p([Ce],rt.prototype,"yName",2),p([Ce],rt.prototype,"openName",2),p([Ce],rt.prototype,"closeName",2),p([Ce],rt.prototype,"highName",2),p([Ce],rt.prototype,"lowName",2);var oo=class extends rt{constructor(){super(...arguments),this.tooltip=wy(),this.item=new ja}getStyle(e){const{strokeWidth:t,strokeOpacity:i,stroke:s,lineDash:o,lineDashOffset:a}=this.item[e];return{stroke:s,strokeWidth:t,strokeOpacity:i,lineDash:o,lineDashOffset:a,opacity:1}}};p([Ce],oo.prototype,"tooltip",2),p([Ce],oo.prototype,"item",2),p([Ce],oo.prototype,"itemStyler",2);var{FillGradientDefaults:Ey,FillPatternDefaults:Oy,FillImageDefaults:Fy,BaseProperties:Ja,makeSeriesTooltip:By,Property:Le}=Py,Ci=class extends Ja{};p([Le],Ci.prototype,"stroke",2),p([Le],Ci.prototype,"strokeWidth",2),p([Le],Ci.prototype,"strokeOpacity",2),p([Le],Ci.prototype,"lineDash",2),p([Le],Ci.prototype,"lineDashOffset",2);var ot=class extends Ja{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Ey,this.fillPatternDefaults=new Oy,this.fillImageDefaults=new Fy,this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new Ci}};p([Le],ot.prototype,"fill",2),p([Le],ot.prototype,"fillGradientDefaults",2),p([Le],ot.prototype,"fillPatternDefaults",2),p([Le],ot.prototype,"fillImageDefaults",2),p([Le],ot.prototype,"fillOpacity",2),p([Le],ot.prototype,"stroke",2),p([Le],ot.prototype,"strokeWidth",2),p([Le],ot.prototype,"strokeOpacity",2),p([Le],ot.prototype,"lineDash",2),p([Le],ot.prototype,"lineDashOffset",2),p([Le],ot.prototype,"cornerRadius",2),p([Le],ot.prototype,"wick",2);var Za=class extends Ja{constructor(){super(...arguments),this.up=new ot,this.down=new ot}};p([Le],Za.prototype,"up",2),p([Le],Za.prototype,"down",2);var ao=class extends rt{constructor(){super(),this.item=new Za,this.tooltip=By(),this.highlightStyle.deprecated=!1}getStyle(e){const{fill:t,fillOpacity:i,strokeWidth:s,strokeOpacity:o,stroke:a,lineDash:n,lineDashOffset:r,cornerRadius:l,wick:c}=this.item[e];return{fill:t,fillOpacity:i,stroke:a,strokeWidth:s,strokeOpacity:o,lineDash:n,lineDashOffset:r,cornerRadius:l,opacity:1,wick:c}}};p([Le],ao.prototype,"item",2),p([Le],ao.prototype,"tooltip",2),p([Le],ao.prototype,"itemStyler",2);var{isGradientFill:Xl,isPatternFill:Qa,isImageFill:en,getShapeFill:Yl,applyShapeStyle:Gy}=Zf,no=class extends Hl{constructor(){super(...arguments),this.properties=new ao}nodeFactory(){return new Pi}updateDatumNodes({datumSelection:e,isHighlight:t}){const{item:i}=this.properties,{up:s,down:o}=i,{strokeWidth:a}=s,{strokeWidth:n}=o;e.each((r,l)=>{const{isRising:c,centerX:h,width:u,y:d,height:g,yOpen:y,yClose:f,crisp:m}=l,S=this.getItemStyle(l,t);r.centerX=h,r.width=u,r.y=d,r.height=g,r.yOpen=y,r.yClose=f,r.crisp=m,Gy(r,S,this.getShapeFillBBox());const D=S?.wick;r.wickStroke=D?.stroke,r.wickStrokeWidth=D?.strokeWidth,r.wickStrokeOpacity=D?.strokeOpacity,r.wickLineDash=D?.lineDash,r.wickLineDashOffset=D?.lineDashOffset,r.strokeAlignment=(c?a:n)/2})}legendItemSymbol(){const{up:e,down:t}=this.properties.item,i=Yl(e.fill,e.fillGradientDefaults,e.fillPatternDefaults,e.fillImageDefaults),s=Xl(i)?i.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:Qa(i)||en(i)?e.stroke:i,stop:0},{color:Qa(i)||en(i)?e.stroke:i,stop:.5}],o=Yl(t.fill,t.fillGradientDefaults,t.fillPatternDefaults,t.fillImageDefaults),a=Xl(o)?o.colorStops.map(l=>typeof l=="string"?l:{color:l.color,stop:l.stop!=null?l.stop*.5:void 0}):[{color:Qa(o)||en(o)?t.stroke:o,stop:.5}],n={type:"gradient",gradient:"linear",rotation:90,colorStops:[...s,...a],reverse:!1},r={type:"gradient",gradient:"linear",rotation:90,colorStops:[{color:e.stroke,stop:0},{color:e.stroke,stop:.5},{color:t.stroke,stop:.5}],reverse:!1};return{marker:{fill:n,fillOpacity:e.fillOpacity,stroke:r,strokeWidth:e.strokeWidth??1,strokeOpacity:e.strokeOpacity??1,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset}}}getLegendData(e){const{id:t,data:i,visible:s,ctx:{legendManager:o}}=this,{xKey:a,yName:n,showInLegend:r,legendItemName:l}=this.properties;return!i?.length||!a||e!=="category"?[]:[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:s&&o.getItemEnabled({seriesId:t,itemId:t}),label:{text:l??n??t},symbol:this.legendItemSymbol(),legendItemName:l,hideInLegend:!r}]}hasItemStylers(){return this.properties.itemStyler!=null}};no.className="CandleStickSeries",no.type="candlestick";import{_ModuleSupport as Vy}from"ag-charts-community";import{boolean as Ky,constant as Wy,number as zy,required as _i,string as kt,undocumented as Ul}from"ag-charts-core";var{commonSeriesOptionsDefs:Hy,candlestickSeriesThemeableOptionsDef:$y}=Vy,tn={...Hy,...$y,type:_i(Wy("candlestick")),xKey:_i(kt),openKey:_i(kt),highKey:_i(kt),lowKey:_i(kt),closeKey:_i(kt),xName:kt,yName:kt,openName:kt,highName:kt,lowName:kt,closeName:kt};tn.pickOutsideVisibleMinorAxis=Ul(Ky),tn.focusPriority=Ul(zy);import{_ModuleSupport as ro}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:ql},multiSeriesHighlightStyle:Xy}=ro;function jl(e){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},e==="up"?"transparent":{$palette:"fill"},{$palette:`${e}.fill`}]},stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:`${e}.stroke`}]},fillGradientDefaults:ro.FILL_GRADIENT_LINEAR_SHADED_DEFAULTS(e),fillPatternDefaults:ro.FILL_PATTERN_DEFAULTS,fillImageDefaults:ro.FILL_IMAGE_DEFAULTS}}var Yy={series:{item:{up:jl("up"),down:jl("down")},highlightStyle:{item:{strokeWidth:3}},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:Xy()},animation:{enabled:!1},axes:{[ql.NUMBER]:{crosshair:{snap:!1}},[ql.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},{CARTESIAN_AXIS_TYPE:Jl,CARTESIAN_POSITION:Zl}=Jf.ThemeConstants,HT={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",moduleFactory:e=>new no(e),defaultAxes:[{type:Jl.NUMBER,position:Zl.LEFT},{type:Jl.ORDINAL_TIME,position:Zl.BOTTOM}],themeTemplate:Yy,groupable:!1},sn={type:"series",name:"candlestick",chartType:"cartesian",enterprise:!0,options:tn,create:e=>new no(e)};import{_ModuleSupport as Uy}from"ag-charts-community";import{_ModuleSupport as lo}from"ag-charts-community";import{Logger as qy}from"ag-charts-core";import{_ModuleSupport as jy}from"ag-charts-community";import{Logger as Jy,findMaxValue as Ql}from"ag-charts-core";var{CachedTextMeasurerPool:ec,TextUtils:tc,TextWrapper:co}=jy;function Zy(e,t){const{fontSize:i,minimumFontSize:s=i}=e,{fontSize:o,minimumFontSize:a=o}=t,n=i-s,r=o-a;let l=e.fontSize,c=t.fontSize;const h=[{labelFontSize:i,secondaryLabelFontSize:o}];for(;l>s||c>a;){const u=n>0?(l-s)/n:-1,d=r>0?(c-a)/r:-1;u>d?l--:c--,h.push({labelFontSize:l,secondaryLabelFontSize:c})}return h.reverse(),h}function wi(e,t){return e.lineHeight!=null&&e.fontSize!=null?e.lineHeight*t/e.fontSize:tc.getLineHeight(t)}function ic(e,t,i,s,{padding:o},a){const{spacing:n=0}=t,r=2*o,l=2*o+n,c=(t.minimumFontSize??t.fontSize)+(s.minimumFontSize??s.fontSize);if(c>a(c+l,!1).height-l)return;const h=Zy(t,s),u={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},d={fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let g,y;return Ql(0,h.length-1,f=>{const{labelFontSize:m,secondaryLabelFontSize:S}=h[f],D=f===0,b=wi(t,m),x=wi(s,S),k=a(b+x+l,D),I=k.width-r,A=k.height-l;if(b+x>A||((g==null||g.fontSize!==m)&&(u.fontSize=m,g=oc(t,e,I,A,u,t.wrapping,D?t.overflowStrategy:"hide")),g==null||g.width>I||g.height>A)||((y==null||y.fontSize!==S)&&(d.fontSize=S,y=oc(s,i,I,A,d,s.wrapping,D?s.overflowStrategy:"hide")),y==null))return;const v=g.height+y.height;if(!(y.width>I||v>A))return{width:Math.max(g.width,y.width),height:v+n,meta:k.meta,label:g,secondaryLabel:y}})}function xs(e,t,{padding:i},s){const o=2*i,a=Math.min(t.minimumFontSize??t.fontSize,t.fontSize),n={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return Ql(a,t.fontSize,r=>{const l=wi(t,r),c=r===a,h=s(l+o,c),u=h.width-o,d=h.height-o;if(l>d)return;n.fontSize=r;const g=co.wrapLines(e,{maxWidth:u,maxHeight:d,font:n,textWrap:t.wrapping,overflow:(c?t.overflowStrategy:void 0)??"hide"});if(!g.length)return;const y=Qy(g,{lineHeight:l,font:n,maxWidth:u,maxHeight:d});if(y)return[{fontSize:r,lineHeight:l,...y},h.meta]})}function sc(e){return e?.minimumFontSize!=null&&e?.fontSize!=null&&e?.minimumFontSize>e?.fontSize}function on(e,t,i,s,o,a){const n=t.enabled?e:void 0,r=s.enabled?i:void 0;(sc(t)||sc(s))&&Jy.warnOnce("minimumFontSize should be set to a value less than or equal to the font size");let l;n!=null&&r!=null&&(l=ic(n,t,r,s,o,a));let c;if(l==null&&n!=null&&(c=xs(n,t,o,a)),c!=null){const[u,d]=c;l={width:u.width,height:u.height,meta:d,label:u,secondaryLabel:void 0}}let h;if(l==null&&n==null&&r!=null&&(h=xs(r,s,o,a)),h!=null){const[u,d]=h;l={width:u.width,height:u.height,meta:d,label:void 0,secondaryLabel:u}}return l}function oc(e,t,i,s,o,a,n){const r=co.wrapLines(t,{maxWidth:i,maxHeight:s,font:o,textWrap:a,overflow:n});if(!r.length)return;const l=wi(e,o.fontSize),{width:c}=ec.measureLines(r,{font:o});return{width:c,lineHeight:l,text:r.join(`
`),height:r.length*l,fontSize:o.fontSize}}function Qy(e,{font:t,lineHeight:i=tc.defaultLineHeight,maxWidth:s,maxHeight:o=1/0}){let a=i*e.length;for(;a>o;){if(e.length===1)return;e.pop(),e[e.length-1]=co.appendEllipsis(e.at(-1)),a=i*e.length}const n=ec.measureLines(e,{font:t});let r,l;if(n.width>s){const c=[];l=0;for(const h of n.lineMetrics){if(h.width>s){if(!c.length)return;break}c.push(h.text),l=Math.max(l,h.width)}r=co.appendEllipsis(c.join(`
`))}else r=e.join(`
`),l=n.width;return{text:r,width:l,height:a}}import{_ModuleSupport as em}from"ag-charts-community";import{_ModuleSupport as ac}from"ag-charts-community";var{Property:bs}=ac,Ei=class extends ac.Label{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}};p([bs],Ei.prototype,"wrapping",2),p([bs],Ei.prototype,"overflowStrategy",2),p([bs],Ei.prototype,"lineHeight",2),p([bs],Ei.prototype,"minimumFontSize",2);var wt=class extends Ei{constructor(){super(...arguments),this.spacing=0}};p([bs],wt.prototype,"spacing",2);var Ds=class extends Ei{},{CartesianSeriesProperties:tm,makeSeriesTooltip:im,Property:ze}=em,Ke=class extends tm{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new wt,this.tooltip=im()}};p([ze],Ke.prototype,"title",2),p([ze],Ke.prototype,"xKey",2),p([ze],Ke.prototype,"yKey",2),p([ze],Ke.prototype,"colorKey",2),p([ze],Ke.prototype,"xName",2),p([ze],Ke.prototype,"yName",2),p([ze],Ke.prototype,"colorName",2),p([ze],Ke.prototype,"colorRange",2),p([ze],Ke.prototype,"stroke",2),p([ze],Ke.prototype,"strokeOpacity",2),p([ze],Ke.prototype,"strokeWidth",2),p([ze],Ke.prototype,"textAlign",2),p([ze],Ke.prototype,"verticalAlign",2),p([ze],Ke.prototype,"itemPadding",2),p([ze],Ke.prototype,"itemStyler",2),p([ze],Ke.prototype,"label",2),p([ze],Ke.prototype,"tooltip",2);var{SeriesNodePickMode:nc,computeBarFocusBounds:sm,getMissCount:om,valueProperty:an,ChartAxisDirection:gt,DEFAULT_CARTESIAN_DIRECTION_KEYS:am,DEFAULT_CARTESIAN_DIRECTION_NAMES:nm,createDatumId:rm,ColorScale:lm,Rect:cm,PointerEvents:pm,applyShapeStyle:hm,mergeDefaults:rc,formatValue:um,addHitTestersToQuadtree:dm,findQuadtreeMatch:lc,updateLabelNode:gm}=lo,fm=class extends lo.CartesianSeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.colorKey=s.properties.colorKey}},ym={left:-.5,center:0,right:-.5},mm={top:-.5,middle:0,bottom:-.5},po=class extends lo.CartesianSeries{constructor(e){super({moduleCtx:e,propertyKeys:{...am,color:["colorKey"]},propertyNames:{...nm,color:["colorName"]},categoryKey:void 0,pickModes:[nc.NEAREST_NODE,nc.EXACT_SHAPE_MATCH],pathsPerSeries:[]}),this.properties=new Ke,this.NodeEvent=fm,this.colorScale=new lm}async processData(e){const t=this.axes[gt.X],i=this.axes[gt.Y];if(!t||!i||!this.data?.length)return;const{xKey:s,yKey:o,colorRange:a,colorKey:n}=this.properties,r=this.axes[gt.X]?.scale,l=this.axes[gt.Y]?.scale,{xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:r,yScale:l}),u=this.colorScale.type,{dataModel:d,processedData:g}=await this.requestDataModel(e,this.data,{props:[an(s,c,{id:"xValue"}),an(o,h,{id:"yValue"}),...n?[an(n,u,{id:"colorValue",invalidValue:void 0})]:[]]});if(this.isColorScaleValid()){const y=d.resolveProcessedDataIndexById(this,"colorValue"),f=g.domain.values[y].filter(S=>S!=null),m=lo.extent(f);if(this.colorScale.domain=m??[],m?.length&&m[0]===m[1]){const S=Math.floor(a.length/2);this.colorScale.range=[a[S],a[S]]}else this.colorScale.range=a;this.colorScale.update()}}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=om(this,i.defs.values[s].missing),n=t.resolveProcessedDataIndexById(this,"colorValue"),r=i.domain.values[n].filter(c=>c!=null).length;return!(o===0||o===a||r===0)}xCoordinateRange(e,t){const i=this.axes[gt.X].scale,s=t*(i.bandwidth??0)/2,o=i.convert(e)+s,a=t*(i.bandwidth??10);return[o,o+a]}yCoordinateRange(e,t){const i=this.axes[gt.Y].scale,s=t*(i.bandwidth??0)/2,o=i.convert(e[0])+s,a=t*(i.bandwidth??10);return[o,o+a]}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;return!t||!i?[]:e===gt.X?t.getDomain(this,"xValue","value",i):t.getDomain(this,"yValue","value",i)}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{data:e,visible:t,axes:i,dataModel:s,processedData:o}=this,a=i[gt.X],n=i[gt.Y];if(!(e&&s&&o&&t&&a&&n))return;if(a.type!=="category"||n.type!=="category"){qy.warnOnce(`Heatmap series expected axes to have "category" type, but received "${a.type}" and "${n.type}" instead.`);return}const{xKey:r,xName:l,yKey:c,yName:h,colorKey:u,colorName:d,textAlign:g,verticalAlign:y,itemPadding:f,label:m}=this.properties,S=s.resolveColumnById(this,"xValue",o),D=s.resolveColumnById(this,"yValue",o),b=u?s.resolveColumnById(this,"colorValue",o):void 0,x=u?s.getDomain(this,"colorValue","value",o):[],k=a.scale,I=n.scale,A=(k.bandwidth??0)/2,v=(I.bandwidth??0)/2,N=[],L=[],M=k.bandwidth??10,R=I.bandwidth??10,C=(M-2*f)*ym[g],w=(R-2*f)*mm[y],T=()=>({width:M,height:R,meta:null});return(o.dataSources.get(this.id)??[]).forEach((P,O)=>{const E=S[O],F=D[O],B=k.convert(E)+A,G=I.convert(F)+v,V=b?.[O],K=m.enabled&&V!=null?this.getLabelText(V,P,u,"color",x,m,{value:V,datum:P,colorKey:u,colorName:d,xKey:r,yKey:c,xName:l,yName:h}):void 0,W=on(K,this.properties.label,void 0,this.properties.label,{padding:f},T),$={x:B,y:G,size:0};if(N.push({series:this,itemId:c,datumIndex:O,yKey:c,xKey:r,xValue:E,yValue:F,colorValue:V,datum:P,point:$,width:M,height:R,midPoint:{x:B,y:G},missing:b!=null&&V==null}),W?.label!=null){const{text:X,fontSize:q,lineHeight:Z,height:se}=W.label,{fontStyle:j,fontFamily:Y,fontWeight:oe,color:ue}=this.properties.label,ie=$.x+C*(M-2*f),J=$.y+w*(R-2*f)-(W.height-se)*.5;L.push({series:this,itemId:c,datum:P,datumIndex:O,text:X,fontSize:q,lineHeight:Z,fontStyle:j,fontFamily:Y,fontWeight:oe,color:ue,textAlign:g,textBaseline:y,x:ie,y:J})}}),{itemId:this.properties.yKey??this.id,nodeData:N,labelData:L,scales:this.calculateScaling(),visible:this.visible}}nodeFactory(){return new cm}update(e){return this.ctx.animationManager.skipCurrentBatch(),super.update(e)}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s)}getItemStyle({datumIndex:e,datum:t,colorValue:i},s){const{id:o,properties:a}=this,{xKey:n,yKey:r,itemStyler:l,stroke:c,strokeWidth:h,strokeOpacity:u}=a,d=this.getHighlightStyle(s,e),g=rc(d,{fill:this.isColorScaleValid()&&i!=null?this.colorScale.convert(i):"transparent",fillOpacity:1,stroke:c,strokeWidth:h,strokeOpacity:u,opacity:1});let y;return l!=null&&e!=null&&(y=this.cachedDatumCallback(rm(e,s?"highlight":"node"),()=>{const f=this.ctx.highlightManager?.getActiveHighlight(),m=this.getHighlightStateString(f,s,e);return this.callWithContext(l,{seriesId:o,datum:t,xKey:n,yKey:r,highlighted:s,highlightState:m,...g})})),y?rc(y,g):g}updateDatumNodes(e){const{isHighlight:t}=e,i=this.axes[gt.X],[s,o]=i?.visibleRange??[],n=!(s!==0||o!==1);e.datumSelection.each((r,l)=>{const{point:c,width:h,height:u}=l,d=this.getItemStyle(l,t);r.crisp=n,r.x=Math.floor(c.x-h/2),r.y=Math.floor(c.y-u/2),r.width=Math.ceil(h),r.height=Math.ceil(u),hm(r,d)})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e,{enabled:s}=this.properties.label,o=s?t:[];return i.update(o)}updateLabelNodes(e){e.labelSelection.each((t,i)=>{t.pointerEvents=pm.None,t.text=i.text,t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex)?.opacity??1,gm(this,t,this.properties,this.properties.label,i)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a,colorScale:n,ctx:r}=this,{formatManager:l}=r,{xKey:c,xName:h,yKey:u,yName:d,colorKey:g,colorName:y,colorRange:f,title:m,legendItemName:S,tooltip:D}=a,b=o[gt.X],x=o[gt.Y];if(!i||!s||!b||!x)return;const k=s.dataSources.get(this.id)?.[e],I=i.resolveColumnById(this,"xValue",s)[e],A=i.resolveColumnById(this,"yValue",s)[e],v=g!=null&&this.isColorScaleValid()?i.resolveColumnById(this,"colorValue",s)[e]:void 0;if(I==null)return;const N=[];let L;if(v==null)L=f[0];else{L=n.convert(v);const C=i.getDomain(this,"colorValue","value",s),w=l.format(this.callWithContext.bind(this),{type:"number",value:v,datum:k,seriesId:t,legendItemName:S,key:g,source:"tooltip",property:"color",domain:C,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});N.push({label:y,fallbackLabel:g,value:w??um(v)})}N.push({label:h,fallbackLabel:c,value:this.getAxisValueText(b,"tooltip",I,k,c,S)},{label:d,fallbackLabel:u,value:this.getAxisValueText(x,"tooltip",A,k,u,S)});const M=this.getItemStyle({datumIndex:e,datum:k,colorValue:v},!1);M.fill!=null&&(L=M.fill);const R=L!=null?{marker:{shape:"square",fill:L,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}}:void 0;return this.formatTooltipWithContext(D,{title:m??S,symbol:R,data:N},{seriesId:t,datum:k,title:m,xKey:c,xName:h,yKey:u,yName:d,colorKey:g,colorName:y,...M})}getLegendData(e){return e!=="gradient"||!this.isColorScaleValid()||!this.dataModel?[]:[{legendType:"gradient",enabled:this.visible,seriesId:this.id,series:this.getFormatterContext("color"),colorDomain:this.colorScale.domain,colorRange:this.colorScale.range}]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds({datumIndex:e}){const t=this.contextNodeData?.nodeData[e];if(t===void 0)return;const{width:i,height:s,midPoint:o}=t,a={x:o.x-i/2,y:o.y-s/2,width:i,height:s};return sm(this,a)}initQuadTree(e){dm(e,this.datumNodesIter())}pickNodesExactShape(e){const t=lc(this,e);return t!=null&&t.distance<=0?[t.datum]:[]}pickNodeClosestDatum(e){return lc(this,e)}hasItemStylers(){return this.properties.itemStyler!=null}};po.className="HeatmapSeries",po.type="heatmap";import{_ModuleSupport as Sm}from"ag-charts-community";import{arrayOf as xm,color as bm,constant as Dm,required as nn,string as Oi}from"ag-charts-core";var{commonSeriesOptionsDefs:vm,heatmapSeriesThemeableOptionsDef:km,without:cc}=Sm,Im={...cc(km,["showInLegend"]),...cc(vm,["showInLegend"]),type:nn(Dm("heatmap")),xKey:nn(Oi),yKey:nn(Oi),colorKey:Oi,xName:Oi,yName:Oi,colorName:Oi,colorRange:xm(bm)};import{_ModuleSupport as ho}from"ag-charts-community";var Am={series:{stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$path:["/0",{$palette:"stroke"},{$palette:"strokes"}]}]},strokeWidth:{$isUserOption:["./stroke",2,void 0]},colorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"divergingColors"},ho.SAFE_RANGE2_OPERATION]},label:{...ho.LABEL_BOXING_DEFAULTS,enabled:!1,color:{$ref:"textColor"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3,highlight:ho.singleSeriesHighlightStyle()},gradientLegend:{enabled:!0,...ho.LEGEND_CONTAINER_THEME}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:pc,CARTESIAN_POSITION:hc}}=Uy,tR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",moduleFactory:e=>new po(e),defaultAxes:[{type:pc.CATEGORY,position:hc.LEFT},{type:pc.CATEGORY,position:hc.BOTTOM}],themeTemplate:Am},rn={type:"series",name:"heatmap",chartType:"cartesian",enterprise:!0,options:Im,create:e=>new po(e)};import{_ModuleSupport as Mm}from"ag-charts-community";import{_ModuleSupport as Nm}from"ag-charts-community";var{applyShapeStyle:Lm}=Nm,uo=class extends Hl{constructor(){super(...arguments),this.properties=new oo}nodeFactory(){return new Ny}updateDatumNodes({datumSelection:e,isHighlight:t}){const{item:i}=this.properties,{up:s,down:o}=i,{strokeWidth:a}=s,{strokeWidth:n}=o;e.each((r,l)=>{const{isRising:c,centerX:h,width:u,y:d,height:g,yOpen:y,yClose:f,crisp:m}=l;r.centerX=h,r.width=u,r.y=d,r.height=g,r.yOpen=y,r.yClose=f,r.crisp=m;const S=this.getItemStyle(l,t);Lm(r,S),r.strokeAlignment=(c?a:n)/2})}getLegendData(e){const{id:t,data:i,ctx:{legendManager:s},visible:o}=this,{xKey:a,yName:n,item:{up:r,down:l},showInLegend:c,legendItemName:h}=this.properties;if(!i?.length||!a||e!=="category")return[];const u={type:"gradient",gradient:"linear",colorSpace:"rgb",colorStops:[{color:r.stroke,stop:0},{color:r.stroke,stop:.5},{color:l.stroke,stop:.5}],rotation:90};return[{legendType:"category",id:t,itemId:t,seriesId:t,enabled:o&&s.getItemEnabled({seriesId:t,itemId:t}),label:{text:h??n??t},symbol:{marker:{fill:u,fillOpacity:r.strokeOpacity,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0}},legendItemName:h,hideInLegend:!c}]}hasItemStylers(){return this.properties.itemStyler!=null}};uo.className="ohlc",uo.type="ohlc";import{_ModuleSupport as Tm}from"ag-charts-community";import{boolean as Rm,constant as Pm,number as Cm,required as Fi,string as It,undocumented as uc}from"ag-charts-core";var{commonSeriesOptionsDefs:_m,ohlcSeriesThemeableOptionsDef:wm}=Tm,ln={..._m,...wm,type:Fi(Pm("ohlc")),xKey:Fi(It),openKey:Fi(It),highKey:Fi(It),lowKey:Fi(It),closeKey:Fi(It),xName:It,yName:It,openName:It,highName:It,lowName:It,closeName:It};ln.pickOutsideVisibleMinorAxis=uc(Rm),ln.focusPriority=uc(Cm);var{ThemeConstants:{CARTESIAN_AXIS_TYPE:go,CARTESIAN_POSITION:dc},multiSeriesHighlightStyle:Em}=Mm,nR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",moduleFactory:e=>new uo(e),defaultAxes:[{type:go.NUMBER,position:dc.LEFT},{type:go.ORDINAL_TIME,position:dc.BOTTOM}],themeTemplate:{animation:{enabled:!1},series:{item:{up:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"up.stroke"}]}},down:{stroke:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$palette:"stroke"},{$palette:"down.stroke"}]}}},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:Em(!1)},axes:{[go.NUMBER]:{crosshair:{snap:!1}},[go.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},groupable:!1},cn={type:"series",name:"ohlc",chartType:"cartesian",enterprise:!0,options:ln,create:e=>new uo(e)};import{_ModuleSupport as Om}from"ag-charts-community";import{_ModuleSupport as fo}from"ag-charts-community";import{_ModuleSupport as Fm}from"ag-charts-community";var{AGGREGATION_INDEX_Y_MAX:Bm,AGGREGATION_INDEX_Y_MIN:Gm,aggregationDomain:Vm,aggregationIndexForXRatio:gc,aggregationRangeFittingPoints:Km,aggregationXRatioForXValue:fc,compactAggregationIndices:Wm,createAggregationIndices:zm}=Fm,Hm=1e3;function yc(e,t,i,s,o,a){const n=e[a];if(n==null)return!1;const r=fc(n,t,i),l=gc(r,o);return a===s[l+Bm]}function mc(e,t,i,s,o,a){const n=e[a];if(n==null)return!1;const r=fc(n,t,i),l=gc(r,o);return a===s[l+Gm]}function $m(e,t,i,s,o){if(t.length<Hm)return;const[a,n]=Vm(e,o);let r=Km(t);const{indexData:l,valueData:c}=zm(t,i,s,a,n,r);let h=[],u=[];for(let g=0;g<t.length;g+=1)yc(t,a,n,l,r,g)&&h.push(g),mc(t,a,n,l,r,g)&&u.push(g);const d=[{maxRange:r,topIndices:h,bottomIndices:u}];for(;r>64;)({maxRange:r}=Wm(l,c,r,{inPlace:!0})),h=h.filter(yc.bind(null,t,a,n,l,r)),u=u.filter(mc.bind(null,t,a,n,l,r)),d.push({maxRange:r,topIndices:h,bottomIndices:u});return d.reverse(),d}import{_ModuleSupport as Xm}from"ag-charts-community";var{CartesianSeriesProperties:Ym,FillGradientDefaults:Um,FillPatternDefaults:qm,FillImageDefaults:jm,InterpolationProperties:Jm,SeriesMarker:Zm,makeSeriesTooltip:Qm,Property:ye,DropShadow:eS,Label:tS}=Xm,pn=class extends tS{constructor(){super(...arguments),this.placement="outside",this.spacing=0}};p([ye],pn.prototype,"placement",2),p([ye],pn.prototype,"spacing",2);var be=class extends Ym{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new Um,this.fillPatternDefaults=new qm,this.fillImageDefaults=new jm,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Jm,this.shadow=new eS().set({enabled:!1}),this.marker=new Zm,this.label=new pn,this.tooltip=Qm(),this.connectMissingData=!1}};p([ye],be.prototype,"xKey",2),p([ye],be.prototype,"yLowKey",2),p([ye],be.prototype,"yHighKey",2),p([ye],be.prototype,"xName",2),p([ye],be.prototype,"yName",2),p([ye],be.prototype,"yLowName",2),p([ye],be.prototype,"yHighName",2),p([ye],be.prototype,"fill",2),p([ye],be.prototype,"fillGradientDefaults",2),p([ye],be.prototype,"fillPatternDefaults",2),p([ye],be.prototype,"fillImageDefaults",2),p([ye],be.prototype,"fillOpacity",2),p([ye],be.prototype,"stroke",2),p([ye],be.prototype,"strokeWidth",2),p([ye],be.prototype,"strokeOpacity",2),p([ye],be.prototype,"lineDash",2),p([ye],be.prototype,"lineDashOffset",2),p([ye],be.prototype,"interpolation",2),p([ye],be.prototype,"shadow",2),p([ye],be.prototype,"marker",2),p([ye],be.prototype,"label",2),p([ye],be.prototype,"tooltip",2),p([ye],be.prototype,"connectMissingData",2);import{_ModuleSupport as iS}from"ag-charts-community";var{CollapseMode:yo,isScaleValid:Sc,pairUpSpans:mo,prepareAreaFillAnimationFns:sS,plotInterpolatedLinePathStroke:Bi,prepareLinePathPropertyAnimation:oS,areScalingEqual:xc}=iS;function aS(e,t,i,s){const o=(l,c)=>{Bi(l,c,t.removed),Bi(l,c,i.removed)},a=(l,c)=>{Bi(l,c,t.moved),Bi(l,c,i.moved)},n=(l,c)=>{Bi(l,c,t.added),Bi(l,c,i.added)},r=oS(e,s);return{status:e,path:{addPhaseFn:n,updatePhaseFn:a,removePhaseFn:o},pathProperties:r}}function nS(e,t,i){const s=e.scales.x?.type==="category",o=t.scales.x?.type==="category";if(s!==o||!Sc(e.scales.x)||!Sc(t.scales.x))return;let a="updated";t.visible&&!e.visible?a="removed":!t.visible&&e.visible&&(a="added");const n=mo({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},yo.Split);if(n==null)return;const r=mo({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},yo.Split);if(r==null)return;const l=mo({scales:e.scales,data:e.highStrokeData.spans},{scales:t.scales,data:t.highStrokeData.spans},yo.Split);if(l==null)return;const c=mo({scales:e.scales,data:e.lowStrokeData.spans},{scales:t.scales,data:t.lowStrokeData.spans},yo.Split);if(c==null)return;const h="fade",u=sS(a,n,r,h),d=aS(a,l,c,h),g=(i?.changed??!0)||!xc(e.scales.x,t.scales.x)||!xc(e.scales.y,t.scales.y)||a!=="updated";return{status:a,fill:u,stroke:d,hasMotion:g}}var{valueProperty:bc,keyProperty:rS,ChartAxisDirection:He,mergeDefaults:lS,updateLabelNode:cS,fixNumericExtent:Dc,buildResetPathFn:pS,resetLabelFn:hS,resetMarkerFn:uS,resetMarkerPositionFn:vc,pathSwipeInAnimation:dS,resetMotion:gS,markerSwipeScaleInAnimation:fS,seriesLabelFadeInAnimation:hn,animationValidation:yS,diff:mS,updateClipPath:kc,computeMarkerFocusBounds:Ic,plotAreaPathFill:SS,plotLinePathStroke:Ac,interpolatePoints:Mc,pathFadeInAnimation:Nc,markerFadeInAnimation:Lc,fromToMotion:Tc,pathMotion:Rc,extent:xS,applyShapeFillBBox:bS,PointerEvents:un,Marker:DS,BBox:vS,findMinMax:kS,getShapeStyle:IS,getShapeFill:AS,applyShapeStyle:MS,processedDataIsAnimatable:NS,simpleMemorize2:LS}=fo,TS=LS($m),RS=class extends fo.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},So=class extends fo.CartesianSeries{constructor(e){super({moduleCtx:e,pathsPerSeries:["fill","stroke"],pickModes:[fo.SeriesNodePickMode.AXIS_ALIGNED],propertyKeys:{[He.X]:["xKey"],[He.Y]:["yLowKey","yHighKey"]},propertyNames:{[He.X]:["xName"],[He.Y]:["yLowName","yHighName","yName"]},categoryKey:"xValue",animationResetFns:{path:pS({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:hS,datum:(t,i)=>({...uS(t),...vc(t,i)})},clipFocusBox:!1}),this.properties=new be,this.NodeEvent=RS,this.dataAggregationFilters=void 0}async processData(e){const{xKey:t,yLowKey:i,yHighKey:s}=this.properties,o=this.axes[He.X]?.scale,a=this.axes[He.Y]?.scale,{xScaleType:n,yScaleType:r}=this.getScaleInformation({xScale:o,yScale:a}),l=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&l.push(mS(this.id,this.processedData)),c&&l.push(yS());const{dataModel:h,processedData:u}=await this.requestDataModel(e,this.data,{props:[rS(t,n,{id:"xValue"}),bc(i,r,{id:"yLowValue"}),bc(s,r,{id:"yHighValue"}),...l]});this.dataAggregationFilters=this.aggregateData(h,u),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="ungrouped"||NS(t))return;const i=this.axes[He.X];if(i==null)return;const s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"yHighValue",t),a=e.resolveColumnById(this,"yLowValue",t),{index:n}=e.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[n];return TS(i.scale.type,s,o,a,r)}xCoordinateRange(e){const t=this.axes[He.X].scale.convert(e);return[t,t]}yCoordinateRange(e){const t=this.axes[He.Y].scale.convert(e[0]);return[t,t]}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!(t&&i))return[];const{domain:{keys:[s]}}=t;if(e===He.X){const o=i.resolveProcessedDataDefById(this,"xValue");return o?.def.type==="key"&&o.def.valueType==="category"?s:Dc(xS(s))}else{const o=this.domainForClippedRange(He.Y,["yHighValue","yLowValue"],"xValue"),a=kS(o);return Dc(a)}}getSeriesRange(e,t){return this.domainForVisibleRange(He.Y,["yHighValue","yLowValue"],"xValue",t)}createNodeData(){const{data:e,dataModel:t,processedData:i,axes:s}=this,o=s[He.X],a=s[He.Y];if(!(e&&o&&a&&t&&i))return;const n=o.scale,r=a.scale,{xKey:l,yLowKey:c,yHighKey:h,connectMissingData:u,marker:d,interpolation:g}=this.properties,y=i.dataSources.get(this.id)??[],f=(n.bandwidth??0)/2,m=t.resolveKeysById(this,"xValue",i),S=t.resolveColumnById(this,"yHighValue",i),D=t.resolveColumnById(this,"yLowValue",i),b=F=>n.convert(m[F])+f,x=[],k=[],I=[],A=(F,B,G)=>{const V=y[F],K=m[F];if(K==null)return;const W=I[I.length-1];if(Number.isFinite(B)&&Number.isFinite(G)){const $=(oe,ue,ie)=>{k.push({index:F,series:this,itemId:oe,datum:V,datumIndex:F,midPoint:{x:q,y:ie},yHighValue:B,yLowValue:G,xValue:K,xKey:l,yLowKey:c,yHighKey:h,point:{x:q,y:ie,size:j},enabled:!0});const J=this.createLabelData({datumIndex:F,point:{x:q,y:ie},value:ue,yLowValue:G,yHighValue:B,itemId:oe,inverted:X,datum:V,series:this});x.push(J)},X=G>B,q=b(F),Z=r.convert(B),se=r.convert(G),{size:j}=d;$("high",B,Z),$("low",G,se);const Y={high:{point:{x:q,y:Z},xDatum:K,yDatum:B},low:{point:{x:q,y:se},xDatum:K,yDatum:G}};Array.isArray(W)?W.push(Y):W!=null?(W.skip+=1,I.push([Y])):I.push([Y])}else u||(Array.isArray(W)||W==null?I.push({skip:0}):W.skip+=1)},{dataAggregationFilters:v}=this,[N,L]=n.range,M=Math.abs(L-N),R=v?.find(F=>F.maxRange>M),C=R?.topIndices,w=R?.bottomIndices;let[T,_]=this.visibleRangeIndices("xValue",o.range,C);T=Math.max(T-1,0),_=Math.min(_+1,C?.length??m.length),i.input.count<1e3&&(T=0,_=i.input.count);for(let F=T;F<_;F+=1){const B=C?.[F]??F,G=w?.[F]??F;A(B,S[B],D[G])}const P=I.flatMap(F=>{if(!Array.isArray(F))return[];const B=F.map(G=>G.high);return Mc(B,g)}),O=I.flatMap(F=>{if(!Array.isArray(F))return[];const B=F.map(G=>G.low);return Mc(B,g)});return{itemId:`${c}-${h}`,labelData:x,nodeData:k,fillData:{itemId:"high",spans:P,phantomSpans:O},highStrokeData:{itemId:"high",spans:P},lowStrokeData:{itemId:"low",spans:O},scales:this.calculateScaling(),visible:this.visible}}createLabelData({datumIndex:e,point:t,value:i,itemId:s,inverted:o,datum:a,series:n}){const{xKey:r,yLowKey:l,yHighKey:c,xName:h,yName:u,yLowName:d,yHighName:g,label:y}=this.properties,{placement:f}=y,m=y.spacing+(typeof y.padding=="number"?y.padding:0);let S=s;o&&(S=s==="low"?"high":"low");const D=f==="outside"&&S==="high"||f==="inside"&&S==="low"?-1:1,b=this.getSeriesDomain(He.Y);return{x:t.x,y:t.y+m*D,series:n,itemId:s,datum:a,datumIndex:e,text:this.getLabelText(i,a,s==="high"?c:l,"y",b,y,{value:i,datum:a,itemId:s,xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:d,yHighName:g,yName:u}),textAlign:"center",textBaseline:D===-1?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}updatePathNodes(e){const{visible:t}=e,[i,s]=e.paths,{strokeWidth:o,stroke:a,strokeOpacity:n,lineDash:r,lineDashOffset:l,fill:c,fillOpacity:h,opacity:u}=lS(this.getHighlightStyle(),this.properties);s.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:un.None,stroke:a,strokeWidth:o,strokeOpacity:n,lineDash:r,lineDashOffset:l,opacity:u,visible:t});const d=AS(c,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),g=this.getShapeFillBBox();bS(i,d,g),MS(i,{stroke:void 0,fill:d,fillOpacity:h,lineDash:r,lineDashOffset:l,strokeOpacity:n,strokeWidth:o,opacity:u},g),i.setProperties({pointerEvents:un.None,lineJoin:"round",fillShadow:this.properties.shadow,opacity:u,visible:t}),kc(this,s),kc(this,i)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty("RangeArea")}updateFillPath(e,t){const[i]=e;i.path.clear(),SS(i,t.fillData),i.markDirty("RangeArea")}updateStrokePath(e,t){const[,i]=e;i.path.clear(),Ac(i,t.highStrokeData.spans),Ac(i,t.lowStrokeData.spans),i.markDirty("RangeArea")}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{xKey:s,yLowKey:o,yHighKey:a,marker:n,fill:r,stroke:l,strokeWidth:c,fillOpacity:h,strokeOpacity:u}=this.properties,d=this.getShapeFillBBox();t.each((g,y)=>{const f={xKey:s,yHighKey:a,yLowKey:o},m=this.getMarkerStyle(n,y,f,i,void 0,{fill:r,fillOpacity:h,stroke:l,strokeWidth:c,strokeOpacity:u});this.applyMarkerStyle(m,g,y.point,d)}),i||this.properties.marker.markClean()}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,s=>{s.pointerEvents=un.None})}updateLabelNodes(e){const t={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yName:this.properties.yName,yLowKey:this.properties.yLowKey,yLowName:this.properties.yLowName??this.properties.yLowKey,yHighKey:this.properties.yHighKey,yHighName:this.properties.yHighName??this.properties.yHighKey};e.labelSelection.each((i,s)=>{i.fillOpacity=this.getHighlightStyle(!1,s.datumIndex).opacity??1,cS(this,i,t,this.properties.label,s)})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}getHighlightData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}getTooltipContent(e,t){const{id:i,dataModel:s,processedData:o,axes:a,properties:n}=this,{xName:r,yName:l,yLowKey:c,yLowName:h,xKey:u,yHighKey:d,yHighName:g,tooltip:y,legendItemName:f}=n,m=a[He.X],S=a[He.Y];if(!s||!o||!m||!S)return;const D=o.dataSources.get(this.id)?.[e],b=s.resolveKeysById(this,"xValue",o)[e],x=s.resolveColumnById(this,"yHighValue",o)[e],k=s.resolveColumnById(this,"yLowValue",o)[e];if(b==null)return;const I=this.getMarkerStyle(this.properties.marker,{datumIndex:e,datum:D},{xKey:u,yLowKey:c,yHighKey:d},!1),A=`${this.getAxisValueText(S,"tooltip",k,D,c,f)} - ${this.getAxisValueText(S,"tooltip",x,D,d,f)}`;return this.formatTooltipWithContext(y,{heading:this.getAxisValueText(m,"tooltip",b,D,u,f),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:`${h??c} - ${g??d}`,value:A}]},{seriesId:i,datum:D,title:l,itemId:t?.itemId??"unknown",xName:r,yName:l,yLowKey:c,yLowName:h,xKey:u,yHighKey:d,yHighName:g,...I})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,marker:a}=this.properties;return{marker:IS({shape:a.shape,fill:a.fill??e,stroke:a.stroke??t,fillOpacity:a.fillOpacity,strokeOpacity:a.strokeOpacity,strokeWidth:a.strokeWidth,lineDash:a.lineDash,lineDashOffset:a.lineDashOffset},a.fillGradientDefaults,a.fillPatternDefaults,a.fillImageDefaults),line:{stroke:t,strokeOpacity:s,strokeWidth:i,lineDash:o}}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yLowKey:s,yHighKey:o,yName:a,yLowName:n,yHighName:r,showInLegend:l}=this.properties,c=a??`${n??s} - ${r??o}`,h=`${s}-${o}`;return[{legendType:"category",id:t,itemId:h,seriesId:t,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new DS}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:s,paths:o}=e,{animationManager:a}=this.ctx;this.updateAreaPaths(o,s),dS(this,a,...o),gS([t],vc),fS(this,a,t),hn(this,"labels",a,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{datumSelection:i,labelSelection:s,contextData:o,paths:a,previousContextData:n}=e,[r,l]=a;if(r==null&&l==null)return;this.resetDatumAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(a,o)},h=()=>{t.skipCurrentBatch(),c()};if(o==null||n==null){c(),Lc(this,t,"added",i),Nc(this,"fill_path_properties",t,"add",r),Nc(this,"stroke_path_properties",t,"add",l),hn(this,"labels",t,s);return}const u=nS(o,n,this.processedData?.reduced?.diff?.[this.id]);if(u===void 0){h();return}else if(u.status==="no-op")return;Tc(this.id,"fill_path_properties",t,[r],u.fill.pathProperties),Tc(this.id,"stroke_path_properties",t,[l],u.stroke.pathProperties),u.status==="added"?this.updateAreaPaths(a,o):u.status==="removed"?this.updateAreaPaths(a,n):(Rc(this.id,"fill_path_update",t,[r],u.fill.path),Rc(this.id,"stroke_path_update",t,[l],u.stroke.path)),u.hasMotion&&(Lc(this,t,void 0,i),hn(this,"labels",t,s)),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(a,o)})}getFormattedMarkerStyle(e){const{xKey:t,yLowKey:i,yHighKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,e,{xKey:t,yLowKey:i,yHighKey:s},!0)}computeFocusBounds(e){const t=Ic(this,e),i=Ic(this,{...e,datumIndex:e.datumIndex+1});if(t&&i)return vS.merge([t,i])}isDatumEnabled(e,t){return t%2===0&&super.isDatumEnabled(e,t)}hasItemStylers(){return this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}};So.className="RangeAreaSeries",So.type="range-area";import{_ModuleSupport as PS}from"ag-charts-community";import{boolean as CS,constant as _S,number as wS,required as xo,string as hi,undocumented as Pc}from"ag-charts-core";var{commonSeriesOptionsDefs:ES,rangeAreaSeriesThemeableOptionsDef:OS}=PS,dn={...ES,...OS,type:xo(_S("range-area")),xKey:xo(hi),yLowKey:xo(hi),yHighKey:xo(hi),xName:hi,yName:hi,yLowName:hi,yHighName:hi};dn.pickOutsideVisibleMinorAxis=Pc(CS),dn.focusPriority=Pc(wS);import{_ModuleSupport as Xt}from"ag-charts-community";var FS={series:{fill:{$palette:"fill"},fillGradientDefaults:Xt.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:Xt.FILL_PATTERN_DEFAULTS,stroke:{$palette:"stroke"},fillOpacity:.7,nodeClickRange:"nearest",marker:{enabled:!1,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:Xt.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS,fillPatternDefaults:Xt.FILL_PATTERN_DEFAULTS,fillImageDefaults:Xt.FILL_IMAGE_DEFAULTS,size:6,strokeWidth:2},label:{...Xt.LABEL_BOXING_DEFAULTS,enabled:!1,placement:"outside",padding:{$isUserOption:["./spacing",0,10]},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},interpolation:{type:"linear"},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:Xt.multiSeriesHighlightStyle()},axes:{[Xt.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},{ThemeConstants:{CARTESIAN_AXIS_TYPE:Cc,CARTESIAN_POSITION:_c}}=Om,fR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",moduleFactory:e=>new So(e),defaultAxes:[{type:Cc.NUMBER,position:_c.LEFT},{type:Cc.CATEGORY,position:_c.BOTTOM}],themeTemplate:FS},gn={type:"series",name:"range-area",chartType:"cartesian",enterprise:!0,options:dn,create:e=>new So(e)};import{_ModuleSupport as BS}from"ag-charts-community";import{_ModuleSupport as bo}from"ag-charts-community";import{_ModuleSupport as GS}from"ag-charts-community";var{aggregationDomain:VS,aggregationRangeFittingPoints:KS,compactAggregationIndices:WS,createAggregationIndices:zS}=GS,HS=1e3;function $S(e,t,i,s,o){if(t.length<HS)return;const[a,n]=VS(e,o);let r=KS(t),{indexData:l,valueData:c}=zS(t,i,s,a,n,r);const h=[{maxRange:r,indexData:l}];for(;r>64;)({indexData:l,valueData:c,maxRange:r}=WS(l,c,r)),h.push({maxRange:r,indexData:l});return h.reverse(),h}import{_ModuleSupport as XS}from"ag-charts-community";var{AbstractBarSeriesProperties:YS,FillGradientDefaults:US,FillPatternDefaults:qS,FillImageDefaults:jS,makeSeriesTooltip:JS,Property:De,DropShadow:ZS,Label:QS}=XS,fn=class extends QS{constructor(){super(...arguments),this.placement="inside",this.spacing=0}};p([De],fn.prototype,"placement",2),p([De],fn.prototype,"spacing",2);var ke=class extends YS{constructor(){super(...arguments),this.fill="#99CCFF",this.fillGradientDefaults=new US,this.fillPatternDefaults=new qS,this.fillImageDefaults=new jS,this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new ZS().set({enabled:!1}),this.label=new fn,this.tooltip=JS()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,cornerRadius:r}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,cornerRadius:r,opacity:1}}};p([De],ke.prototype,"xKey",2),p([De],ke.prototype,"yLowKey",2),p([De],ke.prototype,"yHighKey",2),p([De],ke.prototype,"xName",2),p([De],ke.prototype,"yName",2),p([De],ke.prototype,"yLowName",2),p([De],ke.prototype,"yHighName",2),p([De],ke.prototype,"fill",2),p([De],ke.prototype,"fillGradientDefaults",2),p([De],ke.prototype,"fillPatternDefaults",2),p([De],ke.prototype,"fillImageDefaults",2),p([De],ke.prototype,"fillOpacity",2),p([De],ke.prototype,"stroke",2),p([De],ke.prototype,"strokeWidth",2),p([De],ke.prototype,"strokeOpacity",2),p([De],ke.prototype,"lineDash",2),p([De],ke.prototype,"lineDashOffset",2),p([De],ke.prototype,"cornerRadius",2),p([De],ke.prototype,"itemStyler",2),p([De],ke.prototype,"shadow",2),p([De],ke.prototype,"label",2),p([De],ke.prototype,"tooltip",2);var{SeriesNodePickMode:wc,valueProperty:Ec,keyProperty:ex,ChartAxisDirection:vs,checkCrisp:tx,updateLabelNode:ix,SMALLEST_KEY_INTERVAL:sx,LARGEST_KEY_INTERVAL:ox,diff:ax,prepareBarAnimationFunctions:Oc,midpointStartingBarPosition:Fc,resetBarSelectionsFn:nx,fixNumericExtent:rx,seriesLabelFadeInAnimation:Bc,resetLabelFn:lx,animationValidation:cx,computeBarFocusBounds:px,visibleRangeIndices:hx,createDatumId:ux,ContinuousScale:dx,Rect:gx,PointerEvents:fx,motion:Gc,applyShapeStyle:yx,findMinMax:mx,getShapeStyle:yn,areScalingEqual:Sx,processedDataIsAnimatable:xx,AGGREGATION_SPAN:Vc,AGGREGATION_INDEX_X_MAX:Kc,AGGREGATION_INDEX_X_MIN:Wc,AGGREGATION_INDEX_Y_MAX:bx,AGGREGATION_INDEX_Y_MIN:Dx,mergeDefaults:zc,simpleMemorize2:vx}=bo,kx=vx($S),Ix=class extends bo.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yLowKey=s.properties.yLowKey,this.yHighKey=s.properties.yHighKey}},Do=class extends bo.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[wc.AXIS_ALIGNED,wc.EXACT_SHAPE_MATCH],propertyKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},propertyNames:{x:["xName"],y:["yLowName","yHighName","yName"]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:nx,label:lx}}),this.properties=new ke,this.dataAggregationFilters=void 0,this.NodeEvent=Ix}async processData(e){const{xKey:t,yLowKey:i,yHighKey:s}=this.properties,o=this.getCategoryAxis()?.scale,a=this.getValueAxis()?.scale,{isContinuousX:n,xScaleType:r,yScaleType:l}=this.getScaleInformation({xScale:o,yScale:a}),c=[];this.ctx.animationManager.isSkipped()||(this.processedData&&c.push(ax(this.id,this.processedData)),c.push(cx()));const h=this.visible?{}:{forceValue:0},{dataModel:u,processedData:d}=await this.requestDataModel(e,this.data,{props:[ex(t,r,{id:"xValue"}),Ec(i,l,{id:"yLowValue",invalidValue:null,...h}),Ec(s,l,{id:"yHighValue",invalidValue:null,...h}),...n?[sx,ox]:[],...c],groupByKeys:!1});this.smallestDataInterval=d.reduced?.smallestKeyInterval,this.largestDataInterval=d.reduced?.largestKeyInterval,this.dataAggregationFilters=this.aggregateData(u,d),this.animationState.transition("updateData")}aggregateData(e,t){if(t.type!=="ungrouped"||xx(t))return;const i=this.axes[vs.X];if(i==null)return;const s=e.resolveKeysById(this,"xValue",t),o=e.resolveColumnById(this,"yHighValue",t),a=e.resolveColumnById(this,"yLowValue",t),{index:n}=e.resolveProcessedDataDefById(this,"xValue"),r=t.domain.keys[n];return kx(i.scale.type,s,o,a,r)}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[s]}=t.domain;if(e===this.getCategoryDirection()){const o=i.resolveProcessedDataDefById(this,"xValue");return o?.def.type==="key"&&o?.def.valueType==="category"?s:this.padBandExtent(s)}else{const o=this.domainForClippedRange(e,["yHighValue","yLowValue"],"xValue"),a=mx(o);return rx(a)}}getSeriesRange(e,t){return this.domainForVisibleRange(vs.Y,["yHighValue","yLowValue"],"xValue",t)}createNodeData(){const{data:e,dataModel:t,groupScale:i,processedData:s,visible:o}=this,a=this.getCategoryAxis(),n=this.getValueAxis();if(!(e&&a&&n&&t&&s?.dataSources))return;const r=a.scale,l=n.scale,c=this.getBarDirection()===vs.X,{xKey:h,yLowKey:u,yHighKey:d,strokeWidth:g}=this.properties,y=`${u}-${d}`,f={itemId:y,nodeData:[],labelData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!o)return f;const m=s.dataSources.get(this.id)??[],S=t.resolveKeysById(this,"xValue",s),D=t.resolveColumnById(this,"yLowValue",s),b=t.resolveColumnById(this,"yHighValue",s),{barWidth:x,groupIndex:k}=this.updateGroupScale(a),I=dx.is(r)?x*-.5:0,A=i.convert(String(k)),v=tx(a?.scale,a?.visibleRange,this.smallestDataInterval,this.largestDataInterval),N=_=>Math.round(r.convert(S[_]))+A+I,L=(_,P,O,E,F,B,G)=>{const V=m[_],K=S[_];if(K==null)return;const W=D[_],$=b[_];if(!Number.isFinite(W?.valueOf())||!Number.isFinite($?.valueOf()))return;const[X,q]=W<$?[W,$]:[$,W],Z=Math.round(l.convert(B)),se=Math.round(l.convert(F)),j=Math.max(g,Math.abs(se-Z)),Y={x:c?Math.min(Z,se):O,y:c?O:Math.min(Z,se),width:c?j:E,height:c?E:j},oe={x:Y.x+Y.width/2,y:Y.y+Y.height/2},ue=this.createLabelData({datumIndex:_,rect:Y,barAlongX:c,yLowValue:X,yHighValue:q,datum:V,series:this}),ie={index:P,series:this,itemId:y,datum:V,datumIndex:_,xValue:K,yLowValue:W,yHighValue:$,yLowKey:u,yHighKey:d,xKey:h,x:Y.x,y:Y.y,width:Y.width,height:Y.height,midPoint:oe,crisp:G,labels:ue};f.nodeData.push(ie),f.labelData.push(...ue)},{dataAggregationFilters:M}=this,[R,C]=r.range,w=Math.abs(C-R),T=M?.find(_=>_.maxRange>w);if(T!=null){const{maxRange:_,indexData:P}=T,[O,E]=hx(1,_,a.range,F=>{const B=F*Vc,G=P[B+Wc],V=P[B+Kc];if(G===-1)return;const K=(G+V)/2|0;return[N(K),N(V)+x]});for(let F=O;F<E;F+=1){const B=F*Vc,G=P[B+Wc],V=P[B+Kc],K=P[B+Dx],W=P[B+bx];if(G===-1)continue;const $=(G+V)/2|0;if(S[$]==null)continue;const q=N($),Z=Math.abs(N(G)-N(V))+x,se=D[K],j=b[W];L($,0,q,Z,se,j,!1)}}else if(s.type==="ungrouped"){const _=s.invalidData?.get(this.id);let[P,O]=this.visibleRangeIndices("xValue",a.range);s.input.count<1e3&&(P=0,O=s.input.count);for(let E=P;E<O;E+=1){if(_?.[E]===!0)continue;const F=N(E),B=x,G=D[E],V=b[E];L(E,0,F,B,G,V,v)}}else for(const{datumIndex:_,groupIndex:P}of t.forEachGroupDatum(this,s)){const O=N(_),E=x,F=D[_],B=b[_];L(_,P,O,E,F,B,v)}return f}createLabelData({datumIndex:e,rect:t,barAlongX:i,yLowValue:s,yHighValue:o,datum:a,series:n}){const{xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:d,yName:g,label:y}=this.properties,f={datum:a,xKey:r,yLowKey:l,yHighKey:c,xName:h,yLowName:u,yHighName:d,yName:g},{placement:m}=y,b=(y.spacing+(typeof y.padding=="number"?y.padding:0))*(m==="outside"?1:-1),x=this.getSeriesDomain(vs.Y),k={datumIndex:e,x:t.x+(i?-b:t.width/2),y:t.y+(i?t.height/2:t.height+b),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(s,a,l,"y",x,y,{itemId:"low",value:s,...f}),itemId:"low",datum:a,series:n},I={datumIndex:e,x:t.x+(i?t.width+b:t.width/2),y:t.y+(i?t.height/2:-b),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(o,a,c,"y",x,y,{itemId:"high",value:o,...f}),itemId:"high",datum:a,series:n};return m==="outside"&&(k.textAlign=i?"right":"center",k.textBaseline=i?"middle":"top",I.textAlign=i?"left":"center",I.textBaseline=i?"middle":"bottom"),[k,I]}nodeFactory(){return new gx}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s,void 0,o=>this.getDatumId(o))}getItemStyle(e,t){const{id:i,properties:s}=this,{xKey:o,yHighKey:a,yLowKey:n,itemStyler:r,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:h}=s,u=this.getHighlightStyle(t,e.datumIndex),d=zc(u,s.getStyle());let g=yn(d,l,c,h);if(r!=null&&e!=null){const y=this.cachedDatumCallback(ux(this.getDatumId(e),t?"highlight":"node"),()=>{const f=this.ctx.highlightManager?.getActiveHighlight(),m=this.getHighlightStateString(f,t,e.datumIndex);return this.callWithContext(r,{seriesId:i,datum:e.datum,xKey:o,yHighKey:a,yLowKey:n,highlighted:t,highlightState:m,...g})});y&&(g=yn(zc(y,g),l,c,h))}return g}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getCategoryDirection()===vs.X,o=this.getShapeFillBBox();t.each((a,n)=>{const r=this.getItemStyle(n,i);yx(a,r,o),a.cornerRadius=r.cornerRadius,a.visible=s?n.width>0:n.height>0,a.crisp=n.crisp})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=fx.None})}updateLabelNodes(e){const t={xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xKey,yName:this.properties.yName,yLowKey:this.properties.yLowKey,yLowName:this.properties.yLowName??this.properties.yLowKey,yHighKey:this.properties.yHighKey,yHighName:this.properties.yHighName??this.properties.yHighKey};e.labelSelection.each((i,s)=>{i.fillOpacity=this.getHighlightStyle(!1,s?.datumIndex).opacity??1,ix(this,i,t,this.properties.label,s)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:n,yName:r,yLowKey:l,yHighKey:c,yLowName:h,yHighName:u,tooltip:d,legendItemName:g}=o,y=this.getCategoryAxis(),f=this.getValueAxis(),m=this.contextNodeData?.nodeData?.[e];if(!i||!s||!y||!f||!m)return;const S=s.dataSources.get(this.id)?.[e],D=i.resolveKeysById(this,"xValue",s)[e],b=i.resolveColumnById(this,"yHighValue",s)[e],x=i.resolveColumnById(this,"yLowValue",s)[e];if(D==null)return;const k=this.getItemStyle(m,!1),I=`${this.getAxisValueText(f,"tooltip",x,S,l,g)} - ${this.getAxisValueText(f,"tooltip",b,S,c,g)}`;return this.formatTooltipWithContext(d,{heading:this.getAxisValueText(y,"tooltip",D,S,a,g),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:`${h??l} - ${u??c}`,value:I}]},{seriesId:t,datum:S,title:r,xKey:a,xName:n,yName:r,yLowKey:l,yHighKey:c,yLowName:h,yHighName:u,...k})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=this.properties;return{marker:yn({fill:e,stroke:t,fillOpacity:s,strokeOpacity:o,strokeWidth:i,lineDash:a,lineDashOffset:n},r,l,c)}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{yName:s,yLowName:o,yHighName:a,yLowKey:n,yHighKey:r,showInLegend:l}=this.properties,c=s??`${o??n} - ${a??r}`,h=`${n}-${r}`;return[{legendType:"category",id:t,itemId:h,seriesId:t,enabled:i,label:{text:`${c}`},symbol:this.legendItemSymbol(),hideInLegend:!l}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){const i=Oc(Fc(this.isVertical(),"normal"));Gc.fromToMotion(this.id,"datums",this.ctx.animationManager,[e],i),Bc(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:s,previousContextData:o}=e,a=bo.calculateDataDiff(this.id,t,this.getDatumId.bind(this),s,o,this.processedData);this.ctx.animationManager.stopByAnimationGroupId(this.id);const n=o==null?"fade":"normal",r=Oc(Fc(this.isVertical(),n));Gc.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],r,(l,c)=>this.getDatumId(c),a),(a?.changed||!Sx(s.groupScale,o?.groupScale))&&Bc(this,"labels",this.ctx.animationManager,i)}getDatumId(e){return`${e.xValue}`}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return px(this,this.contextNodeData?.nodeData[e])}hasItemStylers(){return this.properties.itemStyler!=null}};Do.className="RangeBarSeries",Do.type="range-bar";import{_ModuleSupport as Ax}from"ag-charts-community";import{boolean as Mx,constant as Nx,number as Lx,required as vo,string as ui,undocumented as Hc}from"ag-charts-core";var{commonSeriesOptionsDefs:Tx,rangeBarSeriesThemeableOptionsDef:Rx}=Ax,mn={...Tx,...Rx,type:vo(Nx("range-bar")),xKey:vo(ui),yLowKey:vo(ui),yHighKey:vo(ui),xName:ui,yName:ui,yLowName:ui,yHighName:ui};mn.pickOutsideVisibleMinorAxis=Hc(Mx),mn.focusPriority=Hc(Lx);import{_ModuleSupport as Gi}from"ag-charts-community";var Px={series:{direction:"vertical",fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:Gi.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:Gi.FILL_PATTERN_DEFAULTS,fillImageDefaults:Gi.FILL_IMAGE_DEFAULTS,strokeWidth:{$isUserOption:["./stroke",2,0]},label:{...Gi.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},placement:"inside",padding:{$isUserOption:["./spacing",0,6]}},highlight:Gi.multiSeriesHighlightStyle()},axes:{[Gi.ThemeConstants.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0}}}},kR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",moduleFactory:e=>new Do(e),defaultAxes:BS.DIRECTION_SWAP_AXES,themeTemplate:Px,groupable:!0},Sn={type:"series",name:"range-bar",chartType:"cartesian",enterprise:!0,options:mn,create:e=>new Do(e)};import{_ModuleSupport as Cx}from"ag-charts-community";import{_ModuleSupport as di}from"ag-charts-community";import{_ModuleSupport as _x}from"ag-charts-community";var{AbstractBarSeriesProperties:wx,BaseProperties:ks,FillGradientDefaults:Ex,FillPatternDefaults:Ox,FillImageDefaults:Fx,PropertiesArray:Bx,makeSeriesTooltip:Gx,Property:ee,DropShadow:Vx,Label:Kx}=_x,ko=class extends ks{};p([ee],ko.prototype,"totalType",2),p([ee],ko.prototype,"index",2),p([ee],ko.prototype,"axisLabel",2);var $c=class extends ks{};p([ee],$c.prototype,"renderer",2);var xn=class extends Kx{constructor(){super(...arguments),this.placement="outside-end",this.spacing=0}};p([ee],xn.prototype,"placement",2),p([ee],xn.prototype,"spacing",2);var Ge=class extends ks{constructor(){super(...arguments),this.fill="#c16068",this.fillGradientDefaults=new Ex,this.fillPatternDefaults=new Ox,this.fillImageDefaults=new Fx,this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=new Vx().set({enabled:!1}),this.label=new xn,this.tooltip=new $c}};p([ee],Ge.prototype,"name",2),p([ee],Ge.prototype,"fill",2),p([ee],Ge.prototype,"fillGradientDefaults",2),p([ee],Ge.prototype,"fillPatternDefaults",2),p([ee],Ge.prototype,"fillImageDefaults",2),p([ee],Ge.prototype,"stroke",2),p([ee],Ge.prototype,"fillOpacity",2),p([ee],Ge.prototype,"strokeOpacity",2),p([ee],Ge.prototype,"lineDash",2),p([ee],Ge.prototype,"lineDashOffset",2),p([ee],Ge.prototype,"strokeWidth",2),p([ee],Ge.prototype,"cornerRadius",2),p([ee],Ge.prototype,"itemStyler",2),p([ee],Ge.prototype,"shadow",2),p([ee],Ge.prototype,"label",2),p([ee],Ge.prototype,"tooltip",2);var gi=class extends ks{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};p([ee],gi.prototype,"enabled",2),p([ee],gi.prototype,"stroke",2),p([ee],gi.prototype,"strokeOpacity",2),p([ee],gi.prototype,"lineDash",2),p([ee],gi.prototype,"lineDashOffset",2),p([ee],gi.prototype,"strokeWidth",2);var Io=class extends ks{constructor(){super(...arguments),this.positive=new Ge,this.negative=new Ge,this.total=new Ge}};p([ee],Io.prototype,"positive",2),p([ee],Io.prototype,"negative",2),p([ee],Io.prototype,"total",2);var Gt=class extends wx{constructor(){super(...arguments),this.item=new Io,this.totals=new Bx(ko),this.line=new gi,this.tooltip=Gx()}getStyle(e){const{fillOpacity:t,strokeWidth:i,strokeOpacity:s,fill:o,stroke:a,lineDash:n,lineDashOffset:r,cornerRadius:l}=this.item[e==="subtotal"?"total":e];return{fill:o,fillOpacity:t,stroke:a,strokeWidth:i,strokeOpacity:s,lineDash:n,lineDashOffset:r,cornerRadius:l,opacity:1}}};p([ee],Gt.prototype,"xKey",2),p([ee],Gt.prototype,"yKey",2),p([ee],Gt.prototype,"xName",2),p([ee],Gt.prototype,"yName",2),p([ee],Gt.prototype,"item",2),p([ee],Gt.prototype,"totals",2),p([ee],Gt.prototype,"line",2),p([ee],Gt.prototype,"tooltip",2);var{adjustLabelPlacement:Wx,SeriesNodePickMode:Xc,fixNumericExtent:zx,valueProperty:Yc,keyProperty:Hx,accumulativeValueProperty:Ao,trailingAccumulatedValueProperty:$x,ChartAxisDirection:Mo,createDatumId:Xx,checkCrisp:Yx,updateLabelNode:Ux,prepareBarAnimationFunctions:qx,collapsedStartingBarPosition:jx,resetBarSelectionsFn:Jx,seriesLabelFadeInAnimation:Zx,resetLabelFn:Qx,animationValidation:eb,DEFAULT_CARTESIAN_DIRECTION_KEYS:tb,DEFAULT_CARTESIAN_DIRECTION_NAMES:ib,computeBarFocusBounds:sb,isContinuous:Uc,Rect:ob,motion:ab,applyShapeStyle:nb,getShapeStyle:bn,mergeDefaults:qc}=di,No=class extends di.AbstractBarSeries{constructor(e){super({moduleCtx:e,propertyKeys:tb,propertyNames:ib,categoryKey:void 0,pickModes:[Xc.NEAREST_NODE,Xc.EXACT_SHAPE_MATCH],pathsPerSeries:["connector"],pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:Jx,label:Qx}}),this.properties=new Gt,this.seriesItemTypes=new Set(["positive","negative","total"])}async processData(e){const{xKey:t,yKey:i,totals:s}=this.properties,{data:o=[]}=this;if(!this.visible)return;const a=D=>Uc(D)&&Number(D)>=0,n=D=>Uc(D)&&Number(D)>=0,r=D=>D==="total"||D==="subtotal",l={missingValue:void 0,invalidValue:void 0},c=[],h=s.reduce((D,b)=>{const x=D.get(b.index);return x?x.push(b):D.set(b.index,[b]),D},new Map);o.forEach((D,b)=>{c.push(D),h.get(b)?.forEach(x=>c.push({...x.toJson(),[t]:x.axisLabel}))});const u=[];this.ctx.animationManager.isSkipped()||u.push(eb());const d=this.getCategoryAxis()?.scale,g=this.getValueAxis()?.scale,{isContinuousX:y,xScaleType:f,yScaleType:m}=this.getScaleInformation({xScale:d,yScale:g}),{processedData:S}=await this.requestDataModel(e,c,{props:[Hx(t,f,{id:"xValue"}),Ao(i,m,{...l,id:"yCurrent"}),Ao(i,m,{...l,missingValue:0,id:"yCurrentTotal"}),Ao(i,m,{...l,id:"yCurrentPositive",validation:a}),Ao(i,m,{...l,id:"yCurrentNegative",validation:n}),$x(i,m,{...l,id:"yPrevious"}),Yc(i,m,{id:"yRaw"}),Yc("totalType","category",{id:"totalTypeValue",missingValue:void 0,validation:r}),...y?[di.SMALLEST_KEY_INTERVAL,di.LARGEST_KEY_INTERVAL]:[],...u]});this.smallestDataInterval=S.reduced?.smallestKeyInterval,this.largestDataInterval=S.reduced?.largestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i}=this;if(!t||!i)return[];const{keys:[s],values:o}=t.domain;if(e===this.getCategoryDirection()){const a=i.resolveProcessedDataDefById(this,"xValue");if(a?.def.type==="key"&&a?.def.valueType==="category")return s;const n=e===Mo.Y,r=this.getCategoryAxis().isReversed();return this.padBandExtent(s,r!==n)}else{const a=i.resolveProcessedDataIndexById(this,"yCurrent"),n=o[a],r=[Math.min(0,n[0]),Math.max(0,n[1])];return zx(r)}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{data:e,dataModel:t,processedData:i}=this,s=this.getCategoryAxis(),o=this.getValueAxis();if(!e||!s||!o||!t||!i)return;const{line:a}=this.properties,n=s.scale,r=o.scale,l=this.getBarDirection()===Mo.X,c=this.getBandwidth(s)??10,h=s.isReversed(),u=o.isReversed();if(i.type!=="ungrouped")return;const d={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible};if(!this.visible)return d;const g=[],y=t.resolveKeysById(this,"xValue",i),f=t.resolveColumnById(this,"yRaw",i),m=t.resolveColumnById(this,"totalTypeValue",i),S=t.resolveColumnById(this,"yCurrent",i),D=t.resolveColumnById(this,"yPrevious",i),b=t.resolveColumnById(this,"yCurrentTotal",i),x=this.getSeriesDomain(Mo.Y),k=Yx(s?.scale,s?.visibleRange,this.smallestDataInterval,this.largestDataInterval);function I(T,_,P){return T||_?{cumulativeValue:b[P],trailingValue:_?v:0}:{cumulativeValue:S[P],trailingValue:D[P]}}function A(T,_,P,O,E){return T?O:_?(O??0)-(E??0):P}let v=0;const{xKey:N,yKey:L,xName:M,yName:R}=this.properties;(i.dataSources.get(this.id)??[]).forEach((T,_)=>{const P=m[_],O=this.isSubtotal(P),E=this.isTotal(P),F=E||O,B=y[_];if(B==null)return;const G=Math.round(n.convert(B)),V=f[_],{cumulativeValue:K,trailingValue:W}=I(E,O,_);F&&(v=K??0);const $=Math.round(r.convert(K)),X=Math.round(r.convert(W)),q=A(E,O,V,K,W),Z=(q??0)>=0,se=this.getSeriesItemType(Z,P),{strokeWidth:j,label:Y}=this.getItemConfig(se),oe=Z?$:X,ue=Z?X:$,ie=Math.max(j,Math.abs(ue-oe)),J={x:l?Math.min(oe,ue):G,y:l?G:Math.min(oe,ue),width:l?ie:c,height:l?c:ie},Se={x:J.x+J.width/2,y:J.y+J.height/2},le=F?$:X,fe=Math.floor(a.strokeWidth)%2/2,ce=h?$:le,xe=h?le:$;let Pe,Ze;l?(Pe={x:ce+fe,y:J.y},Ze={x:xe+fe,y:J.y+J.height}):(Pe={x:J.x,y:ce+fe},Ze={x:J.x+J.width,y:xe+fe});const bt={x:h?Ze.x:Pe.x,y:h?Ze.y:Pe.y,x2:h?Pe.x:Ze.x,y2:h?Pe.y:Ze.y,size:0};g.push(bt);const nt=se==="subtotal"?"total":se,Pt=this.getLabelText(q,T,L,"y",x,Y,{itemId:nt,value:q,datum:T,xKey:N,yKey:L,xName:M,yName:R}),ls=Y.spacing+(typeof Y.padding=="number"?Y.padding:0),cs={index:_,series:this,itemId:se,datum:T,datumIndex:_,cumulativeValue:K??0,xValue:B,yValue:q,yKey:L,xKey:N,x:J.x,y:J.y,width:J.width,height:J.height,midPoint:Se,crisp:k,label:{text:Pt,...Wx({isUpward:(q??-1)>=0!==u,isVertical:!l,placement:Y.placement,spacing:ls,rect:J})}};d.nodeData.push(cs),d.labelData.push(cs)});const w=this.properties.line.enabled;return S!=null&&w&&(d.pointData=g),d}updateSeriesItemTypes(){const{dataModel:e,seriesItemTypes:t,processedData:i}=this;if(!e||!i)return;t.clear();const s=e.resolveProcessedDataIndexById(this,"yCurrentPositive"),o=e.resolveProcessedDataIndexById(this,"yCurrentNegative"),a=e.resolveProcessedDataIndexById(this,"totalTypeValue"),n=i.domain.values[s]??[],r=i.domain.values[o]??[];n.length>0&&t.add("positive"),r.length>0&&t.add("negative");const l=i?.domain.values[a];l&&l.forEach(c=>{(c==="total"||c==="subtotal")&&t.add("total")})}isSubtotal(e){return e==="subtotal"}isTotal(e){return e==="total"}nodeFactory(){return new ob}getSeriesItemType(e,t){return t??(e?"positive":"negative")}getItemConfig(e){switch(e){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s)}getItemStyle({datumIndex:e=0,datum:t,itemId:i="total"},s){const{id:o,properties:a}=this,n=a.item[i==="subtotal"?"total":i],r=this.getHighlightStyle(s,e),l=qc(r,a.getStyle(i)),{itemStyler:c,fillGradientDefaults:h,fillPatternDefaults:u,fillImageDefaults:d}=n,{xKey:g,yKey:y}=a;let f=bn(l,h,u,d);if(c!=null){const m=this.ctx.highlightManager?.getActiveHighlight(),S=this.cachedDatumCallback(Xx(e,s?"highlight":"node"),()=>{const D=this.getHighlightStateString(m,s,e);return this.callWithContext(c,{seriesId:o,itemId:i,datum:t,xKey:g,yKey:y,highlighted:s,highlightState:D,...f})});S&&(f=bn(qc(S,f),h,u,d))}return f}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getCategoryDirection()===Mo.X,o=this.getShapeFillBBox();t.each((a,n)=>{const r=this.getItemStyle(n,i);nb(a,r,o),a.cornerRadius=r.cornerRadius??0,a.visible=s?n.width>0:n.height>0,a.crisp=n.crisp})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;if(t.length===0)return i.update([]);const s=t.filter(o=>{const{label:a}=this.getItemConfig(o.itemId);return a.enabled});return i.update(s)}updateLabelNodes(e){const t={itemId:"positive",xKey:this.properties.xKey,xName:this.properties.xName??this.properties.xName,yKey:this.properties.yKey,yName:this.properties.yName??this.properties.yName};e.labelSelection.each((i,s)=>{t.itemId=s.itemId,i.fillOpacity=this.getHighlightStyle(!1,s.datumIndex)?.opacity??1,Ux(this,i,t,this.getItemConfig(s.itemId).label,s.label)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{xKey:a,xName:n,yKey:r,yName:l,tooltip:c,legendItemName:h}=o,u=this.getCategoryAxis(),d=this.getValueAxis();if(!i||!s||!u||!d)return;const g=s.dataSources.get(this.id)?.[e],y=i.resolveKeysById(this,"xValue",s)[e],f=i.resolveColumnById(this,"yRaw",s)[e],m=i.resolveColumnById(this,"yCurrentTotal",s),S=i.resolveColumnById(this,"totalTypeValue",s);if(y==null)return;const D=S[e],b=(f??0)>=0,x=this.getSeriesItemType(b,D);let k;if(this.isTotal(D))k=m[e];else if(this.isSubtotal(D)){k=m[e];for(let A=e-1;A>=0;A-=1)if(this.isSubtotal(S[A])){k=k-m[A];break}}else k=f;const I=this.getItemStyle({datumIndex:e,datum:g,itemId:x},!1);return this.formatTooltipWithContext(c,{heading:this.getAxisValueText(u,"tooltip",y,g,a,h),symbol:this.legendItemSymbol(x),data:[{label:l,fallbackLabel:r,value:this.getAxisValueText(d,"tooltip",k,g,r,h)}]},{seriesId:t,datum:g,title:l,itemId:x,xKey:a,xName:n,yKey:r,yName:l,...I})}legendItemSymbol(e){const{fill:t,stroke:i,fillOpacity:s,strokeOpacity:o,strokeWidth:a,lineDash:n,lineDashOffset:r,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:h}=this.getItemConfig(e);return{marker:bn({fill:t,stroke:i,fillOpacity:s,strokeOpacity:o,strokeWidth:a,lineDash:n,lineDashOffset:r},l,c,h)}}getLegendData(e){if(e!=="category")return[];const{id:t,seriesItemTypes:i}=this,s=[],o=n=>n.charAt(0).toUpperCase()+n.substring(1),{showInLegend:a}=this.properties;return i.forEach(n=>{const{name:r}=this.getItemConfig(n);s.push({legendType:"category",id:t,itemId:n,seriesId:t,enabled:!0,label:{text:r??o(n)},symbol:this.legendItemSymbol(n),hideInLegend:!a,isFixed:!0})}),s}toggleSeriesItem(){}animateEmptyUpdateReady(e){const{datumSelection:t,labelSelection:i,contextData:s}=e,o=qx(jx(this.isVertical(),this.axes,"normal"));ab.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o),Zx(this,"labels",this.ctx.animationManager,i);const{pointData:a}=s;a&&(this.isVertical()?this.animateConnectorLinesVertical(e):this.animateConnectorLinesHorizontal(e))}animateConnectorLinesHorizontal(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:s}=i;this.updateLineNode(i);const o=this.getValueAxis(),a=o?.isReversed(),n=a?(h,u)=>h<u:(h,u)=>h>u,r=o?.scale.convert(0),l=t.reduce((h,u)=>(n(u.x,h)&&(h=u.x),h),a?1/0:0),c=(h,u,d,g,y)=>(h-u)/(d-u)*(y-g)+g;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:r,to:l,ease:di.Motion.easeOut,collapsable:!1,onUpdate(h){s.clear(!0),t.forEach((u,d)=>{const g=c(h,r,l,r,u.x),y=c(h,r,l,r,u.x2);d!==0&&s.lineTo(g,u.y),s.moveTo(y,u.y2)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateConnectorLinesVertical(e){const{pointData:t=[]}=e.contextData,[i]=e.paths,{path:s}=i;this.updateLineNode(i);const o=this.getValueAxis(),a=o?.isReversed(),n=a?(h,u)=>h>u:(h,u)=>h<u,r=o?.scale.convert(0),l=t.reduce((h,u)=>(n(u.y,h)&&(h=u.y),h),a?0:1/0),c=(h,u,d,g,y)=>(h-u)/(d-u)*(y-g)+g;this.ctx.animationManager.animate({id:`${this.id}_connectors`,groupId:this.id,phase:"initial",from:r,to:l,ease:di.Motion.easeOut,collapsable:!1,onUpdate(h){s.clear(!0),t.forEach((u,d)=>{const g=c(h,r,l,r,u.y),y=c(h,r,l,r,u.y2);d!==0&&s.lineTo(u.x,g),s.moveTo(u.x2,y)}),i.checkPathDirty()},onStop:()=>this.resetConnectorLinesPath(e)})}animateReadyResize(e){super.animateReadyResize(e),this.resetConnectorLinesPath(e)}updatePaths(e){this.resetConnectorLinesPath({contextData:e.contextData,paths:e.paths})}resetConnectorLinesPath({contextData:e,paths:t}){if(t.length===0)return;const[i]=t;this.updateLineNode(i);const{path:s}=i;s.clear(!0);const{pointData:o}=e;o&&(o.forEach((a,n)=>{n!==0&&s.lineTo(a.x,a.y),s.moveTo(a.x2,a.y2)}),i.checkPathDirty())}updateLineNode(e){const{stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,lineDashOffset:a}=this.properties.line;e.setProperties({fill:void 0,stroke:t,strokeWidth:i,strokeOpacity:s,lineDash:o,lineDashOffset:a,lineJoin:"round",pointerEvents:di.PointerEvents.None})}isLabelEnabled(){const{positive:e,negative:t,total:i}=this.properties.item;return e.label.enabled||t.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds({datumIndex:e}){return sb(this,this.contextNodeData?.nodeData[e])}hasItemStylers(){const{positive:e,negative:t,total:i}=this.properties.item;return e.itemStyler!=null||t.itemStyler!=null||i.itemStyler!=null}};No.className="WaterfallSeries",No.type="waterfall";import{_ModuleSupport as rb}from"ag-charts-community";import{arrayOfDefs as lb,constant as cb,positiveNumber as pb,required as Vi,string as Is,union as hb}from"ag-charts-core";var{commonSeriesOptionsDefs:ub,waterfallSeriesThemeableOptionsDef:db}=rb,gb={...db,...ub,type:Vi(cb("waterfall")),xKey:Vi(Is),yKey:Vi(Is),xName:Is,yName:Is,totals:lb({totalType:Vi(hb("total","subtotal")),index:Vi(pb),axisLabel:Vi(Is)},"a total definition options array")};import{_ModuleSupport as As}from"ag-charts-community";function Dn(e,t){return{fill:{$if:[{$eq:[{$palette:"type"},"user-indexed"]},{$path:[`/${t}`,{$palette:"fill"},{$palette:"fills"}]},{$palette:`${e}.fill`}]},fillGradientDefaults:As.FILL_GRADIENT_LINEAR_SHADED_DEFAULTS(e),fillPatternDefaults:As.FILL_PATTERN_DEFAULTS,fillImageDefaults:As.FILL_IMAGE_DEFAULTS,stroke:{$palette:`${e}.stroke`},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{...As.LABEL_BOXING_DEFAULTS,enabled:!1,fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},formatter:void 0,placement:"outside-end",padding:{$isUserOption:["./spacing",0,6]}}}}var fb={series:{item:{positive:Dn("altUp",0),negative:Dn("altDown",1),total:Dn("neutral",2)},line:{stroke:{$palette:"neutral.stroke"},strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2},highlight:As.singleSeriesHighlightStyle()},legend:{enabled:!0,toggleSeries:!1}},RR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,moduleFactory:e=>new No(e),defaultAxes:Cx.DIRECTION_SWAP_AXES,themeTemplate:fb},vn={type:"series",name:"waterfall",chartType:"cartesian",enterprise:!0,options:gb,create:e=>new No(e)},{NewAreaSeriesModule:yb,NewBarSeriesModule:mb,NewBubbleSeriesModule:Sb,NewHistogramSeriesModule:xb,NewLineSeriesModule:bb,NewScatterSeriesModule:Db,numberFormatValidator:vb,without:lt}=hf,jc={width:dt,height:dt,grip:gs,fill:eo,stroke:eo,strokeWidth:dt,cornerRadius:dt},ct=["cursor","highlightStyle","listeners","nodeClickRange","showInLegend","showInMiniChart","tooltip","visible","xName","yName"],kb=[...ct,"errorBar","label","legendItemName","direction"],Ib=[...ct,"direction","legendItemName","minName","q1Name","medianName","q3Name","maxName"],Ab=[...ct,"title","label","labelKey","labelName","sizeName"],Mb=[...ct,"title","label","colorName","textAlign","verticalAlign","itemPadding","colorRange"],Nb=[...ct,"label"],Lb=[...ct,"errorBar","title","label"],Tb=[...ct,"label","yLowName","yHighName"],Rb=[...ct,"direction","label","yLowName","yHighName"],Pb=[...ct,"errorBar","title","label","labelKey","labelName"],Cb=[...ct,"direction"],_b={enabled:gs,height:dt,spacing:dt,cornerRadius:Ll,mask:{fill:eo,fillOpacity:yf,stroke:eo,strokeWidth:dt},minHandle:jc,maxHandle:jc,miniChart:{enabled:gs,padding:{top:dt,bottom:dt},label:{enabled:gs,avoidCollisions:gs,spacing:dt,format:vb,formatter:gf,interval:{minSpacing:dt,maxSpacing:dt,values:uf,step:Ll},...ff},series:df(mf({area:lt(yb.options,[...ct,"type"]),bar:lt(mb.options,[...kb,"type"]),"box-plot":lt(Xa.options,[...Ib,"type"]),bubble:lt(Sb.options,[...Ab,"type"]),candlestick:lt(sn.options,[...ct,"type"]),heatmap:lt(rn.options,[...Mb,"type"]),histogram:lt(xb.options,[...Nb,"type"]),line:lt(bb.options,[...Lb,"type"]),ohlc:lt(cn.options,[...ct,"type"]),"range-area":lt(gn.options,[...Tb,"type"]),"range-bar":lt(Sn.options,[...Rb,"type"]),scatter:lt(Db.options,[...Pb,"type"]),waterfall:lt(vn.options,[...Cb,"type"])},"miniChart series options"))}},{annotationOptionsDef:wb}=Yg,Eb={type:"plugin",name:"annotations",chartType:"cartesian",options:wb,create(){return null}},Ob={type:"plugin",name:"navigator",chartType:"cartesian",options:_b,create(){return null}},Fb={type:"plugin",name:"initialState",options:pf,create(){return null}};import{_ModuleSupport as Ms}from"ag-charts-community";import{_ModuleSupport as Bb}from"ag-charts-community";import{Logger as Gb}from"ag-charts-core";import{_ModuleSupport as Jc}from"ag-charts-community";import{Logger as Vb}from"ag-charts-core";function Zc(e,t,i){i||(t=Kb(t));const s=new Map;for(const a of e)s.set(a.id,{datum:a,linksBefore:[],linksAfter:[],maxPathLengthBefore:-1,maxPathLengthAfter:-1});let o=0;return s.forEach((a,n)=>{o=Math.max(o,kn(s,t,a,n,-1,[])+kn(s,t,a,n,1,[])+1)}),{links:t,nodeGraph:s,maxPathLength:o}}function Qc(e,t,i,s){const o=s.indexOf(t);if(o!==-1){for(let n=o;n<s.length;n+=1)i.add(s[n]);return}s.push(t);const{toNode:a}=t;for(const n of e)n.fromNode===a&&Qc(e,n,i,s);s.pop()}function Kb(e){const t=new Set;for(const i of e)Qc(e,i,t,[]);return t.size!==0&&Vb.warnOnce("Some links formed circular references. These will be removed from the output."),t.size===0?e:e.filter(i=>!t.has(i))}function kn(e,t,i,s,o,a){if(a.includes(s))return 1/0;let n=o===-1?i.maxPathLengthBefore:i.maxPathLengthAfter;if(n===-1){n=0;const r=o===-1?i.linksBefore:i.linksAfter;for(const l of t){const{fromNode:c,toNode:h}=l,u=o===-1?h.id:c.id,d=o===-1?c.id:h.id,g=s===u?e.get(d):void 0;g!=null&&(r.push({node:g,link:l}),a?.push(s),n=Math.max(n,kn(e,t,g,d,o,a)+1),a?.pop())}o===-1?i.maxPathLengthBefore=n:i.maxPathLengthAfter=n}return n}var{Series:Wb,DataController:zb,keyProperty:Hb,valueProperty:Lo,Selection:fi,Group:Ki,TransformableText:$b}=Jc,Xb=class extends Jc.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s);const{datumIndex:o}=i,a=s.contextNodeData?.nodeData.find(n=>n.datumIndex.type===o.type&&n.datumIndex.index===o.index);this.size=a?.size,this.label=a?.type===1?a?.label:void 0}},ep=class extends Wb{constructor(){super(...arguments),this.NodeEvent=Xb,this.nodeCount=0,this.linkCount=0,this.linksDataModel=void 0,this.linksProcessedData=void 0,this.nodesDataModel=void 0,this.nodesProcessedData=void 0,this.processedNodes=new Map,this.linkGroup=this.contentGroup.appendChild(new Ki({name:"linkGroup"})),this.nodeGroup=this.contentGroup.appendChild(new Ki({name:"nodeGroup"})),this.focusLinkGroup=this.highlightGroup.appendChild(new Ki({name:"linkGroup"})),this.focusNodeGroup=this.highlightGroup.appendChild(new Ki({name:"nodeGroup"})),this.highlightLinkGroup=this.highlightGroup.appendChild(new Ki({name:"linkGroup"})),this.highlightNodeGroup=this.highlightGroup.appendChild(new Ki({name:"nodeGroup"})),this.labelSelection=fi.select(this.labelGroup,$b),this.linkSelection=fi.select(this.linkGroup,()=>this.linkFactory()),this.nodeSelection=fi.select(this.nodeGroup,()=>this.nodeFactory()),this.focusLinkSelection=fi.select(this.focusLinkGroup,()=>this.linkFactory()),this.focusNodeSelection=fi.select(this.focusNodeGroup,()=>this.nodeFactory()),this.highlightLinkSelection=fi.select(this.highlightLinkGroup,()=>this.linkFactory()),this.highlightNodeSelection=fi.select(this.highlightNodeGroup,()=>this.nodeFactory())}get nodes(){return this.properties.nodes}async processData(e){const{data:t,nodes:i}=this;if(t==null)return;const{fromKey:s,toKey:o,sizeKey:a,idKey:n,labelKey:r}=this.properties,l=new zb("standalone",e.suppressFieldDotNotation),c=i!=null?l.request(this.id,i,{props:[Hb(n,void 0,{id:"idValue",includeProperty:!1}),...r!=null?[Lo(r,void 0,{id:"labelValue",includeProperty:!1})]:[]],groupByKeys:!0}):null,h=e.request(this.id,t,{props:[Lo(s,void 0,{id:"fromValue",includeProperty:!1}),Lo(o,void 0,{id:"toValue",includeProperty:!1}),...a!=null?[Lo(a,void 0,{id:"sizeValue",includeProperty:!1,missingValue:0})]:[]],groupByKeys:!1});i!=null&&l.execute();const[u,d]=await Promise.all([c,h]);this.nodesDataModel=u?.dataModel,this.nodesProcessedData=u?.processedData,this.linksDataModel=d?.dataModel,this.linksProcessedData=d?.processedData;const g=new Map;if(u==null){const y=d.dataModel.resolveColumnById(this,"fromValue",d.processedData),f=d.dataModel.resolveColumnById(this,"toValue",d.processedData),m=S=>{const D=g.size;return{series:this,itemId:void 0,datum:{},datumIndex:{type:1,index:D},type:1,index:D,linksBefore:[],linksAfter:[],id:S,size:0,label:S}};d.processedData.dataSources.get(this.id)?.forEach((S,D)=>{const b=y[D],x=f[D];b==null||x==null||(g.has(b)||g.set(b,m(b)),g.has(x)||g.set(x,m(x)))})}else{const y=u.dataModel.resolveColumnById(this,"idValue",u.processedData),f=r!=null?u.dataModel.resolveColumnById(this,"labelValue",u.processedData):void 0;u.processedData.dataSources.get(this.id)?.forEach((m,S)=>{const D=y[S],b=f?.[S];g.set(D,{series:this,itemId:void 0,datum:m,datumIndex:{type:1,index:S},type:1,index:S,linksBefore:[],linksAfter:[],id:D,size:0,label:b})})}this.processedNodes=g}getNodeGraph(e,t,{includeCircularReferences:i}){const{linksDataModel:s,linksProcessedData:o}=this;if(s==null||o==null){const{links:y,nodeGraph:f,maxPathLength:m}=Zc(new Map().values(),[],i);return this.nodeCount=0,this.linkCount=0,{nodeGraph:f,links:y,maxPathLength:m}}const{sizeKey:a}=this.properties,n=s.resolveColumnById(this,"fromValue",o),r=s.resolveColumnById(this,"toValue",o),l=a!=null?s.resolveColumnById(this,"sizeValue",o):void 0,c=new Map;this.processedNodes.forEach(y=>{const f=e(y);c.set(y.id,f)});const h=[];o.dataSources.get(this.id)?.forEach((y,f)=>{const m=n[f],S=r[f],D=l!=null?l[f]:1,b=c.get(m),x=c.get(S);if(D<=0||b==null||x==null)return;const k=t({series:this,itemId:void 0,datum:y,datumIndex:{type:0,index:f},type:0,index:f,fromNode:b,toNode:x,size:D});h.push(k)});const{links:u,nodeGraph:d,maxPathLength:g}=Zc(c.values(),h,i);return d.forEach(y=>{y.datum.linksBefore=y.linksBefore.map(f=>f.link),y.datum.linksAfter=y.linksAfter.map(f=>f.link)}),this.nodeCount=d.size,this.linkCount=u.length,{nodeGraph:d,links:u,maxPathLength:g}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(e){const{seriesRect:t}=e,i={seriesRectWidth:t?.width??0,seriesRectHeight:t?.height??0};(this._nodeDataDependencies==null||this._nodeDataDependencies.seriesRectWidth!==i.seriesRectWidth||this._nodeDataDependencies.seriesRectHeight!==i.seriesRectHeight)&&(this._nodeDataDependencies=i),this.updateSelections();const s=this.contextNodeData?.nodeData??[],o=this.contextNodeData?.labelData??[];let a=this.ctx.highlightManager?.getActiveHighlight();if(a?.series===this&&a.type==null){const{itemId:h}=a;a=h!=null?s.find(u=>u.type===1&&u.id===h):void 0}else a?.series!==this&&(a=void 0);this.contentGroup.visible=this.visible,this.contentGroup.opacity=a!=null?this.properties.highlight.unhighlightedItem.opacity??1:1,this.labelSelection=this.updateLabelSelection({labelData:o,labelSelection:this.labelSelection}),this.updateLabelNodes({labelSelection:this.labelSelection}),this.linkSelection=this.updateLinkSelection({nodeData:s.filter(h=>h.type===0),datumSelection:this.linkSelection}),this.updateLinkNodes({datumSelection:this.linkSelection,isHighlight:!1}),this.nodeSelection=this.updateNodeSelection({nodeData:s.filter(h=>h.type===1),datumSelection:this.nodeSelection}),this.updateNodeNodes({datumSelection:this.nodeSelection,isHighlight:!1});let n,r,l,c;a?.type===1?(n=s.filter(h=>h.type===0&&(h.toNode===a||h.fromNode===a)),r=n.map(h=>h.fromNode===a?h.toNode:h.fromNode),r.push(a),l=[],c=[a]):a?.type===0?(n=[a],r=[a.fromNode,a.toNode],l=[a],c=[]):(n=[],r=[],l=[],c=[]),this.focusLinkSelection=this.updateLinkSelection({nodeData:n,datumSelection:this.focusLinkSelection}),this.updateLinkNodes({datumSelection:this.focusLinkSelection,isHighlight:!1}),this.focusNodeSelection=this.updateNodeSelection({nodeData:r,datumSelection:this.focusNodeSelection}),this.updateNodeNodes({datumSelection:this.focusNodeSelection,isHighlight:!1}),this.highlightLinkSelection=this.updateLinkSelection({nodeData:l,datumSelection:this.highlightLinkSelection}),this.updateLinkNodes({datumSelection:this.highlightLinkSelection,isHighlight:!0}),this.highlightNodeSelection=this.updateNodeSelection({nodeData:c,datumSelection:this.highlightNodeSelection}),this.updateNodeNodes({datumSelection:this.highlightNodeSelection,isHighlight:!0})}resetAnimation(e){}dataCount(){return NaN}getSeriesDomain(e){return[]}getSeriesRange(e,t){return[NaN,NaN]}legendItemSymbol(e,t,i={}){const{fills:s,strokes:o}=this.properties,{fill:a=s[t%s.length],fillOpacity:n=1,stroke:r=o[t%o.length],strokeWidth:l=0,strokeOpacity:c=1,lineDash:h=[0],lineDashOffset:u=0}=i;return{marker:{fill:a,fillOpacity:n,stroke:r,strokeWidth:l,strokeOpacity:c,lineDash:h,lineDashOffset:u}}}getLegendData(e){if(e!=="category")return[];const{showInLegend:t}=this.properties;return Array.from(this.processedNodes.values(),({id:i,label:s},o)=>({legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:!0,label:{text:s??i},symbol:this.legendItemSymbol(1,o),hideInLegend:!t,isFixed:!0}))}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.linkSelection.each((o,a)=>{const n=o.distanceSquared(e,t);n<i&&(i=n,s=a)}),this.nodeSelection.each((o,a)=>{const n=o.distanceSquared(e,t);n<i&&(i=n,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}getDatumAriaText(e,t){if(e.type===0)return this.ctx.localeManager.t("ariaAnnounceFlowProportionLink",{index:e.index+1,count:this.linkCount,from:e.fromNode.id,to:e.toNode.id,size:e.size,sizeName:this.properties.sizeName??this.properties.sizeKey});if(e.type===1)return this.ctx.localeManager.t("ariaAnnounceFlowProportionNode",{index:e.index+1,count:this.nodeCount,description:t})}pickFocus(e){const{datumIndexDelta:t,otherIndexDelta:i}=e,s=this.contextNodeData?.nodeData[e.datumIndex-e.datumIndexDelta];let o=s;if(i!==0||t===0)return;if(s?.type===0){const r=Array.from(this.linkSelection,h=>h.datum),c=r.indexOf(s)+t;if(c>=0&&c<r.length)o=r[c];else if(c>0)o=r[r.length-1];else{const h=Array.from(this.nodeSelection,u=>u.datum);o=h[h.length-1]}}else if(s?.type===1){const r=Array.from(this.nodeSelection,h=>h.datum),c=r.indexOf(s)+t;c>=0&&c<r.length?o=r[c]:c<0?o=r[0]:o=Array.from(this.linkSelection,u=>u.datum)[0]}if(o==null)return;const a=o.type===1?Array.from(this.nodeSelection).find(r=>r.datum===o):Array.from(this.linkSelection).find(r=>r.datum===o);if(a==null)return;const n=this.computeFocusBounds(a.node);if(n!=null)return{datum:a.datum,datumIndex:this.contextNodeData?.nodeData.indexOf(a.datum)??0,otherIndex:0,bounds:n,clipFocusBox:!0}}getCategoryValue(e){}datumIndexForCategoryValue(e){}};import{_ModuleSupport as Yb}from"ag-charts-community";var{Path:Ub,SceneChangeDetection:Yt}=Yb;function tp({radius:e,startAngle:t,endAngle:i,tension:s}){const o=e*Math.cos(t),a=e*Math.sin(t),n=e*Math.cos(i),r=e*Math.sin(i),l=o*s,c=a*s,h=n*s,u=r*s;return{x:[o,l,h,n],y:[a,c,u,r]}}var Vt=class extends Ub{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.radius=0,this.startAngle1=0,this.endAngle1=0,this.startAngle2=0,this.endAngle2=0,this.tension=1}tensionedCurveTo(e,t,i,s,o,a,n,r){const{path:l,tension:c}=this,h=1-c;l.cubicCurveTo((i-e)*h+e,(s-t)*h+t,(o-n)*h+n,(a-r)*h+r,n,r)}updatePath(){const{path:e,centerX:t,centerY:i,radius:s}=this;let{startAngle1:o,endAngle1:a,startAngle2:n,endAngle2:r}=this;o>n&&([o,n]=[n,o],[a,r]=[r,a]),e.clear();const l=t+s*Math.cos(o),c=i+s*Math.sin(o);e.moveTo(l,c),this.tensionedCurveTo(l,c,t,i,t,i,t+s*Math.cos(r),i+s*Math.sin(r)),e.arc(t,i,s,r,n,!0),this.tensionedCurveTo(t+s*Math.cos(n),i+s*Math.sin(n),t,i,t,i,t+s*Math.cos(a),i+s*Math.sin(a)),e.arc(t,i,s,a,o,!0),e.closePath()}};p([Yt()],Vt.prototype,"centerX",2),p([Yt()],Vt.prototype,"centerY",2),p([Yt()],Vt.prototype,"radius",2),p([Yt()],Vt.prototype,"startAngle1",2),p([Yt()],Vt.prototype,"endAngle1",2),p([Yt()],Vt.prototype,"startAngle2",2),p([Yt()],Vt.prototype,"endAngle2",2),p([Yt()],Vt.prototype,"tension",2);import{_ModuleSupport as qb}from"ag-charts-community";var{FillGradientDefaults:jb,FillPatternDefaults:Jb,FillImageDefaults:Zb,BaseProperties:ip,makeSeriesTooltip:Qb,SeriesProperties:eD,Property:te,Label:tD}=qb,In=class extends tD{constructor(){super(...arguments),this.spacing=1,this.maxWidth=1}};p([te],In.prototype,"spacing",2),p([te],In.prototype,"maxWidth",2);var Et=class extends ip{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0,this.tension=0}getStyle(e,t,i){const{fillOpacity:s,strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r,tension:l}=this,c=this.fill??e[i%e.length],h=this.stroke??t[i%e.length];return{fill:c,fillOpacity:s,stroke:h,strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r,tension:l}}};p([te],Et.prototype,"fill",2),p([te],Et.prototype,"fillOpacity",2),p([te],Et.prototype,"stroke",2),p([te],Et.prototype,"strokeOpacity",2),p([te],Et.prototype,"strokeWidth",2),p([te],Et.prototype,"lineDash",2),p([te],Et.prototype,"lineDashOffset",2),p([te],Et.prototype,"tension",2),p([te],Et.prototype,"itemStyler",2);var At=class extends ip{constructor(){super(...arguments),this.spacing=1,this.width=1,this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}getStyle(e,t,i){const{fillOpacity:s,strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this,l=this.fill??e[i%e.length],c=this.stroke??t[i%e.length];return{fill:l,fillOpacity:s,stroke:c,strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r}}};p([te],At.prototype,"spacing",2),p([te],At.prototype,"width",2),p([te],At.prototype,"fill",2),p([te],At.prototype,"fillOpacity",2),p([te],At.prototype,"stroke",2),p([te],At.prototype,"strokeOpacity",2),p([te],At.prototype,"strokeWidth",2),p([te],At.prototype,"lineDash",2),p([te],At.prototype,"lineDashOffset",2),p([te],At.prototype,"itemStyler",2);var Ve=class extends eD{constructor(){super(),this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.nodes=void 0,this.fillGradientDefaults=new jb,this.fillPatternDefaults=new Jb,this.fillImageDefaults=new Zb,this.fills=[],this.strokes=[],this.label=new In,this.link=new Et,this.node=new At,this.tooltip=Qb(),this.highlightStyle.deprecated=!1}};p([te],Ve.prototype,"fromKey",2),p([te],Ve.prototype,"toKey",2),p([te],Ve.prototype,"idKey",2),p([te],Ve.prototype,"idName",2),p([te],Ve.prototype,"labelKey",2),p([te],Ve.prototype,"labelName",2),p([te],Ve.prototype,"sizeKey",2),p([te],Ve.prototype,"sizeName",2),p([te],Ve.prototype,"nodes",2),p([te],Ve.prototype,"fillGradientDefaults",2),p([te],Ve.prototype,"fillPatternDefaults",2),p([te],Ve.prototype,"fillImageDefaults",2),p([te],Ve.prototype,"fills",2),p([te],Ve.prototype,"strokes",2),p([te],Ve.prototype,"label",2),p([te],Ve.prototype,"link",2),p([te],Ve.prototype,"node",2),p([te],Ve.prototype,"tooltip",2);var{SeriesNodePickMode:sp,CachedTextMeasurerPool:iD,TextWrapper:sD,TextUtils:oD,createDatumId:To,angleBetween:Ro,normalizeAngle360:aD,isBetweenAngles:op,Sector:nD,evaluateBezier:Po,applyShapeStyle:ap,getShapeStyle:Co,getLabelStyles:rD,BBox:lD,mergeDefaults:_o}=Bb,wo=e=>e.startAngle+Ro(e.startAngle,e.endAngle)/2,Eo=class extends ep{constructor(e){super({moduleCtx:e,pickModes:[sp.NEAREST_NODE,sp.EXACT_SHAPE_MATCH]}),this.properties=new Ve}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new Vt}nodeFactory(){return new nD}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0},properties:s}=this,{fromKey:o,toKey:a,sizeKey:n,labelKey:r,label:{spacing:l,maxWidth:c,fontSize:h},node:{width:u,spacing:d}}=s,g=t/2,y=i/2;let f=[];const{nodeGraph:m,links:S}=this.getNodeGraph(T=>({...T,centerX:g,centerY:y,innerRadius:NaN,outerRadius:NaN,startAngle:NaN,endAngle:NaN}),T=>({...T,centerX:g,centerY:y,radius:NaN,startAngle1:NaN,endAngle1:NaN,startAngle2:NaN,endAngle2:NaN}),{includeCircularReferences:!0});let D=0;m.forEach(({datum:T,linksBefore:_,linksAfter:P},O)=>{const E=_.reduce((F,{link:B})=>F+B.size,0)+P.reduce((F,{link:B})=>F+B.size,0);if(E===0)m.delete(O);else{const{label:F}=s;T.size=E,D+=T.size;const B=F.enabled?this.getLabelText(T.label,T.datum,r,"label",[],F,{datum:T.datum,value:T.label,fromKey:o,toKey:a,sizeKey:n,size:T.size}):void 0;T.label=B}});let b=0;if(this.isLabelEnabled()){const T=iD.getMeasurer({font:this.properties.label});let _=0;m.forEach(({datum:P})=>{const{id:O,label:E}=P;if(E==null)return;const F=sD.wrapText(E,{maxWidth:c,font:this.properties.label,textWrap:"never"}),{width:B}=T.measureText(F);_=Math.max(B,_),f.push({id:O,text:F,centerX:g,centerY:y,angle:NaN,radius:NaN,size:P.size})}),b=_+l}const x=m.size;let k=Math.min(t,i)/2-u-b,I=d/k;if(b!==0&&(x*I>=1.5*Math.PI||k<=0)&&(f=[],k=Math.min(t,i)/2-u,I=d/k),x*I>=2*Math.PI||k<=0){Gb.warnOnce("There was insufficient space to display the Chord Series.");return}const A=k,v=k+u,N=Math.max((2*Math.PI-x*I)/D,0);let L=0;m.forEach(({datum:T})=>{T.innerRadius=A,T.outerRadius=v,T.startAngle=L,T.endAngle=L+T.size*N,L=T.endAngle+I;const _=(T.innerRadius+T.outerRadius)/2,P=wo(T);T.midPoint={x:T.centerX+_*Math.cos(P),y:T.centerY+_*Math.sin(P)}});const M=[];m.forEach(({datum:T,linksBefore:_,linksAfter:P})=>{const O=wo(T),E=[..._.map(B=>({link:B.link,distance:Ro(wo(B.node.datum),O),after:!1})),...P.map(B=>({link:B.link,distance:Ro(wo(B.node.datum),O),after:!0}))];let F=T.startAngle;E.toSorted((B,G)=>B.distance-G.distance).forEach(({link:B,after:G})=>{const V=B.size*N;G?(B.startAngle1=F,B.endAngle1=F+V):(B.startAngle2=F,B.endAngle2=F+V),F+=B.size*N}),M.push(T)});const{tension:R}=this.properties.link;S.forEach(T=>{T.radius=k;const _=tp({radius:k,startAngle:T.startAngle1,endAngle:T.endAngle2,tension:R}),P=tp({radius:k,startAngle:T.startAngle2,endAngle:T.endAngle1,tension:R}),O=Po(..._.x,.5),E=Po(..._.y,.5),F=Po(...P.x,.5),B=Po(...P.y,.5);T.midPoint={x:T.centerX+(O+F)/2,y:T.centerY+(E+B)/2},M.push(T)}),f.forEach(T=>{const _=m.get(T.id)?.datum;_!=null&&(T.radius=v+l,T.angle=aD(_.startAngle+Ro(_.startAngle,_.endAngle)/2))}),f.sort((T,_)=>T.angle-_.angle);let C=1/0,w=-1/0;return f=f.filter(T=>{const _=oD.getLineHeight(h),P=Math.atan2(_/2,T.radius),O=T.angle-P,E=T.angle+P;return op(C,O,E)||op(w,O,E)?!1:(C=Math.min(O,C),w=Math.max(E,w),!0)}),{itemId:e,nodeData:M,labelData:f}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){const t={toKey:this.properties.toKey,fromKey:this.properties.fromKey,sizeKey:this.properties.sizeKey,size:NaN};e.labelSelection.each((i,{size:s,text:o,centerX:a,centerY:n,radius:r,angle:l})=>{t.size=s;const c=rD(this,void 0,t,this.properties.label),{fontStyle:h,fontWeight:u,fontSize:d,fontFamily:g,color:y}=c;i.visible=!0,i.translationX=a+r*Math.cos(l),i.translationY=n+r*Math.sin(l),i.text=o,i.fill=y,i.fontStyle=h,i.fontWeight=u,i.fontSize=d,i.fontFamily=g,i.textBaseline="middle",Math.cos(l)>=0?(i.textAlign="left",i.rotation=l):(i.textAlign="right",i.rotation=l-Math.PI),i.setBoxing(c)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>To([t.type,t.id]))}getNodeStyle({datumIndex:e,datum:t,size:i=0,label:s},o,a){const{id:n,properties:r}=this,{fills:l,strokes:c,fillGradientDefaults:h,fillPatternDefaults:u,fillImageDefaults:d}=r,{itemStyler:g}=r.node,y=this.getHighlightStyle(a,e),f=_o(y,r.node.getStyle(l,c,o));let m=Co(f,h,u,d);if(g!=null&&e!=null){const S=this.ctx.highlightManager?.getActiveHighlight(),D=this.cachedDatumCallback(To(e,"node",a?"highlight":"node"),()=>{const b=this.getHighlightStateString(S,a,e);return this.callWithContext(g,{seriesId:n,datum:t,highlighted:a,highlightState:b,...m,size:i,label:s})});D&&(m=Co(_o(D,m),h,u,d))}return m.opacity=1,m}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getShapeFillBBox();t.each((o,a)=>{const{datumIndex:n}=a,r=this.getNodeStyle(a,n.index,i);ap(o,r,s),o.centerX=a.centerX,o.centerY=a.centerY,o.innerRadius=a.innerRadius,o.outerRadius=a.outerRadius,o.startAngle=a.startAngle,o.endAngle=a.endAngle,o.inset=o.strokeWidth/2})}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>To([t.type,t.index,t.fromNode.id,t.toNode.id]))}getLinkStyle({datumIndex:e,datum:t},i,s){const{id:o,properties:a}=this,{fills:n,strokes:r,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:h}=a,{itemStyler:u}=a.link,d=this.getHighlightStyle(s,e),g=_o(d,a.link.getStyle(n,r,i.index));let y=Co(g,l,c,h);if(u!=null&&e!=null){const f=this.ctx.highlightManager?.getActiveHighlight(),m=this.cachedDatumCallback(To(e,"link",s?"highlight":"node"),()=>{const S=this.getHighlightStateString(f,s,i);return this.callWithContext(u,{seriesId:o,datum:t,highlighted:s,highlightState:S,...y})});m&&(y=Co(_o(m,y),l,c,h))}return y.opacity=1,y}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getShapeFillBBox();t.each((o,a)=>{const n=a.fromNode.datumIndex,r=this.getLinkStyle(a,n,i);o.centerX=a.centerX,o.centerY=a.centerY,o.radius=a.radius,o.startAngle1=a.startAngle1,o.endAngle1=a.endAngle1,o.startAngle2=a.startAngle2,o.endAngle2=a.endAngle2,o.tension=r.tension,ap(o,r,s)})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=Math.min(e,t),s=(e-i)/2,o=(t-i)/2,a=new lD(s,o,e,t);return{series:a,axis:a}}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:s,properties:o,ctx:{formatManager:a}}=this,{fromKey:n,toKey:r,sizeKey:l,sizeName:c,tooltip:h}=o,u=this.contextNodeData?.nodeData.find(D=>D.datumIndex.type===e.type&&D.datumIndex.index===e.index);if(u==null)return;const d=u.type===0?u.fromNode.index:u.index,g=u.type===0?`${u.fromNode.label} - ${u.toNode.label}`:u.label,y=e.type===0?i?.dataSources.get(this.id)?.[e.index]:s?.dataSources.get(this.id)?.[e.index],f=u.size;let m;if(u.type===0){const D=u.fromNode.datumIndex;m=this.getLinkStyle({datumIndex:e,datum:y},D,!1)}else{const D=u.label;m=this.getNodeStyle({datumIndex:e,datum:y,size:f,label:D},e.index,!1)}const S=[];if(l!=null){const D=a.format(this.callWithContext.bind(this),{type:"number",value:f,datum:y,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});S.push({label:c,fallbackLabel:l,value:D??String(f)})}return this.formatTooltipWithContext(h,{title:g,symbol:this.legendItemSymbol(u.type,d,m),data:S},{seriesId:t,datum:y,title:g,fromKey:n,toKey:r,sizeKey:l,sizeName:c,size:f,...m})}computeFocusBounds(e){return e}hasItemStylers(){return this.properties.node.itemStyler!=null||this.properties.link.itemStyler!=null}};Eo.className="ChordSeries",Eo.type="chord";import{_ModuleSupport as cD}from"ag-charts-community";import{constant as pD,fillGradientDefaults as hD,fillImageDefaults as uD,fillPatternDefaults as dD,required as An,string as Oo,undocumented as Mn}from"ag-charts-core";var{commonSeriesOptionsDefs:gD,chordSeriesThemeableOptionsDef:fD}=cD,Fo={...fD,...gD,type:An(pD("chord")),fromKey:An(Oo),toKey:An(Oo),sizeKey:Oo,sizeName:Oo};Fo.fillGradientDefaults=Mn(hD),Fo.fillPatternDefaults=Mn(dD),Fo.fillImageDefaults=Mn(uD);var VR={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],solo:!0,identifier:"chord",moduleFactory:e=>new Eo(e),themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:Ms.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:Ms.FILL_PATTERN_DEFAULTS,fillImageDefaults:Ms.FILL_IMAGE_DEFAULTS,highlightStyle:{series:{dimOpacity:.2}},highlight:Ms.singleSeriesHighlightStyle(),label:{...Ms.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:5,maxWidth:100},node:{spacing:8,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]},tension:.4}},legend:{enabled:!1,toggleSeries:!1}}},np={type:"series",name:"chord",chartType:"standalone",enterprise:!0,options:Fo,create:e=>new Eo(e)};import{_ModuleSupport as Wi}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:zi,CARTESIAN_POSITION:Hi},ThemeSymbols:{DEFAULT_SHADOW_COLOUR:yD}}=Wi,$i={$eq:[{$path:["/series/0/direction",void 0]},"horizontal"]},rp={autoRotate:{$path:"/series/0/stageLabel/autoRotate"},autoRotateAngle:{$path:"/series/0/stageLabel/autoRotateAngle"},avoidCollisions:{$path:["/series/0/stageLabel/avoidCollisions",!0]},border:{$path:["/series/0/stageLabel/border"]},color:{$path:["/series/0/stageLabel/color",{$ref:"textColor"}]},cornerRadius:{$path:["/series/0/stageLabel/cornerRadius"]},enabled:{$if:[{$eq:[{$path:"/series/0/stageLabel/enabled"},void 0]},!0,{$path:"/series/0/stageLabel/enabled"}]},fill:{$path:["/series/0/stageLabel/fill"]},fillOpacity:{$path:["/series/0/stageLabel/fillOpacity"]},fontSize:{$path:["/series/0/stageLabel/fontSize",{$ref:"fontSize"}]},fontStyle:{$path:["/series/0/stageLabel/fontStyle",{$ref:"fontStyle"}]},fontWeight:{$path:["/series/0/stageLabel/fontWeight",{$ref:"fontWeight"}]},format:{$path:"/series/0/stageLabel/format"},formatter:{$path:"/series/0/stageLabel/formatter"},itemStyler:{$path:"/series/0/stageLabel/itemStyler"},minSpacing:{$path:"/series/0/stageLabel/minSpacing"},padding:{$path:["/series/0/stageLabel/padding"]},rotation:{$path:["/series/0/stageLabel/rotation",0]}},WR=[{type:{$if:[$i,zi.NUMBER,zi.CATEGORY]},position:{$if:[$i,Hi.LEFT,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"after"]},Hi.RIGHT,Hi.LEFT]}]},label:{$if:[$i,void 0,rp]}},{type:{$if:[$i,zi.CATEGORY,zi.NUMBER]},position:{$if:[$i,{$if:[{$eq:[{$path:["/series/0/stageLabel/placement",void 0]},"before"]},Hi.TOP,Hi.BOTTOM]},Hi.BOTTOM]},label:{$if:[$i,rp,void 0]}}],zR={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacingRatio:.25,fills:[{$palette:"fill"}],strokes:[{$palette:"stroke"}],fillGradientDefaults:Wi.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:Wi.FILL_PATTERN_DEFAULTS,fillImageDefaults:Wi.FILL_IMAGE_DEFAULTS,label:{...Wi.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},dropOff:{enabled:!0,fillOpacity:.2,strokeWidth:{$isUserOption:["./stroke",2,0]}},shadow:{enabled:!1,color:yD,xOffset:3,yOffset:3,blur:5},highlight:Wi.singleSeriesHighlightStyle()},axes:{[zi.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[zi.CATEGORY]:{line:{enabled:!1}}}};import{_ModuleSupport as mD}from"ag-charts-community";import{_ModuleSupport as Nn}from"ag-charts-community";import{_ModuleSupport as SD}from"ag-charts-community";var{lineDistanceSquared:Bo,BBox:xD,Path:bD,SceneChangeDetection:Ut}=SD,lp=1e-6;function cp([e,t],[i,s]){return Math.abs(e-i)<=lp&&Math.abs(t-s)<=lp}var Ot=class extends bD{constructor(){super(...arguments),this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0}get midPoint(){const{x0:e,y0:t,x1:i,y1:s,x2:o,y2:a,x3:n,y3:r}=this;return{x:(e+i+o+n)/4,y:(t+s+a+r)/4}}distanceSquared(e,t){if(this.containsPoint(e,t))return 0;const{x0:i,y0:s,x1:o,y1:a,x2:n,y2:r,x3:l,y3:c}=this;return Math.min(Bo(e,t,i,s,o,a,1/0),Bo(e,t,o,a,n,r,1/0),Bo(e,t,n,r,l,c,1/0),Bo(e,t,l,c,i,s,1/0))}computeBBox(){const{x0:e,y0:t,x1:i,y1:s,x2:o,y2:a,x3:n,y3:r}=this,l=Math.min(e,i,o,n),c=Math.max(e,i,o,n)-l,h=Math.min(t,s,a,r),u=Math.max(t,s,a,r)-h;return new xD(l,h,c,u)}updatePath(){const{path:e,x0:t,y0:i,x1:s,y1:o,x2:a,y2:n,x3:r,y3:l}=this,c=[[t,i],[s,o],[a,n],[r,l]];e.clear();let h,u;c.forEach(d=>{if(h!=null&&cp(h,d)||u!=null&&cp(u,d))return;const[g,y]=d;h==null?e.moveTo(g,y):e.lineTo(g,y),h??(h=d),u=d}),e.closePath()}};p([Ut()],Ot.prototype,"x0",2),p([Ut()],Ot.prototype,"y0",2),p([Ut()],Ot.prototype,"x1",2),p([Ut()],Ot.prototype,"y1",2),p([Ut()],Ot.prototype,"x2",2),p([Ut()],Ot.prototype,"y2",2),p([Ut()],Ot.prototype,"x3",2),p([Ut()],Ot.prototype,"y3",2);import{_ModuleSupport as DD}from"ag-charts-community";var{NODE_UPDATE_STATE_TO_PHASE_MAPPING:vD}=DD;function pp(e,t,i,s){const{x0:o,y0:a,x1:n,y1:r,x2:l,y2:c,x3:h,y3:u,opacity:d}=e;return i?{x0:(o+h)/2,y0:(a+u)/2,x1:(n+l)/2,y1:(r+c)/2,x2:(n+l)/2,y2:(r+c)/2,x3:(o+h)/2,y3:(a+u)/2,opacity:d}:{x0:(o+n)/2,y0:(a+r)/2,x1:(o+n)/2,y1:(a+r)/2,x2:(l+h)/2,y2:(c+u)/2,x3:(l+h)/2,y3:(c+u)/2,opacity:d}}function kD(e,t){const i=a=>a==null;return{fromFn:(a,n,r)=>{r==="updated"&&i(n)?r="removed":r==="updated"&&i(a.previousDatum)&&(r="added");let l;r==="added"&&a.previousDatum==null&&t==="fade"?l={...Ns(a,n),opacity:0}:r==="unknown"||r==="added"?l=pp(n,a.previousDatum,e,t):l={x0:a.x0,y0:a.y0,x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2,x3:a.x3,y3:a.y3,opacity:a.opacity};const c=vD[r];return{...l,phase:c}},toFn:(a,n,r)=>{let l;return r==="removed"&&a.datum==null&&t==="fade"?l={...Ns(a,n),opacity:0}:r==="removed"||i(n)?l=pp(n,a.previousDatum,e,t):l=Ns(a,n),l}}}function Ns(e,t){const{x0:i,y0:s,x1:o,y1:a,x2:n,y2:r,x3:l,y3:c,opacity:h}=t;return{x0:i,y0:s,x1:o,y1:a,x2:n,y2:r,x3:l,y3:c,opacity:h}}var{SeriesNodePickMode:hp,SeriesZIndexMap:up,valueProperty:ID,keyProperty:AD,ChartAxisDirection:MD,updateLabelNode:ND,SMALLEST_KEY_INTERVAL:LD,LARGEST_KEY_INTERVAL:TD,diff:RD,fixNumericExtent:PD,seriesLabelFadeInAnimation:dp,resetMotion:CD,resetLabelFn:_D,animationValidation:wD,computeBarFocusBounds:ED,ContinuousScale:OD,Group:FD,Selection:BD,PointerEvents:gp,motion:GD,checkCrisp:VD,createDatumId:KD,applyShapeStyle:WD,getShapeStyle:zD,getShapeFill:HD}=Nn,$D=class extends Nn.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.stageKey,this.yKey=s.properties.valueKey}},fp=class extends Nn.AbstractBarSeries{constructor({moduleCtx:e,animationResetFns:t}){super({moduleCtx:e,pickModes:[hp.AXIS_ALIGNED,hp.EXACT_SHAPE_MATCH],propertyKeys:{x:["stageKey"],y:["valueKey"]},propertyNames:{x:[],y:[]},categoryKey:"xValue",datumSelectionGarbageCollection:!1,animationResetFns:{datum:t.datum,label:_D}}),this.NodeEvent=$D,this.connectorNodeGroup=this.contentGroup.appendChild(new FD({name:`${this.id}-series-connectorNodes`,zIndex:up.BACKGROUND})),this.connectorSelection=BD.select(this.connectorNodeGroup,()=>this.connectionFactory()),this.connectorNodeGroup.pointerEvents=gp.None}get pickModeAxis(){return"main-category"}setZIndex(e){return super.setZIndex(e),this.connectorNodeGroup.zIndex=[up.BACKGROUND,e],!0}isVertical(){return!super.isVertical()}connectionFactory(){return new Ot}async processData(e){const{stageKey:t,valueKey:i}=this.properties,{visible:s,id:o}=this,a=(y,f,m)=>s&&this.ctx.legendManager.getItemEnabled({seriesId:o,itemId:m}),n=this.getCategoryAxis()?.scale,r=this.getValueAxis()?.scale,{isContinuousX:l,xScaleType:c,yScaleType:h}=this.getScaleInformation({xScale:n,yScale:r}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(RD(this.id,this.processedData)),u.push(wD()));const d=this.visible?{}:{forceValue:0},{processedData:g}=await this.requestDataModel(e,this.data,{props:[AD(t,c,{id:"xValue"}),ID(i,h,{id:"yValue",...d,validation:a,invalidValue:0}),...l?[LD,TD]:[],...u],groupByKeys:!1});this.smallestDataInterval=g.reduced?.smallestKeyInterval,this.largestDataInterval=g.reduced?.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){const{processedData:t,dataModel:i,id:s,ctx:{legendManager:o}}=this;if(!t||!i)return[];const{keys:[a]}=t.domain;if(e===this.getCategoryDirection()){const n=i.resolveProcessedDataDefById(this,"xValue");return n?.def.type==="key"&&n?.def.valueType==="category"?this.hasData?a.filter((r,l)=>o.getItemEnabled({seriesId:s,itemId:l})):[]:this.padBandExtent(a)}else{const n=this.domainForClippedRange(e,["yValue"],"xValue"),r=Math.max(...n),l=[-r,r];return PD(l)}}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{hasData:e,data:t,dataModel:i,groupScale:s,processedData:o,id:a,ctx:{legendManager:n}}=this,r=this.getCategoryAxis(),l=this.getValueAxis();if(!(e&&t&&r&&l&&i&&o?.type==="ungrouped"))return;const c=r.scale,h=l.scale,u=this.getBarDirection()===MD.X,{stageKey:d,valueKey:g}=this.properties,{strokeWidth:y}=this.barStyle(),f=`${g}`,m={itemId:f,nodeData:[],labelData:[],connectorData:[],scales:this.calculateScaling(),groupScale:this.getScaling(this.groupScale),visible:this.visible},S=this.visible;if(!S)return m;const D=i.resolveKeysById(this,"xValue",o),b=i.resolveColumnById(this,"yValue",o),{barWidth:x,groupIndex:k}=this.updateGroupScale(r),I=OD.is(c)?x*-.5:0,A=VD(r?.scale,r?.visibleRange,this.smallestDataInterval,this.largestDataInterval);let v;return(o.dataSources.get(this.id)??[]).forEach((L,M)=>{const R=S&&n.getItemEnabled({seriesId:a,itemId:M}),C=D[M];if(C==null)return;const w=Math.round(c.convert(C))+s.convert(String(k))+I,T=b[M],_=Math.round(h.convert(-T)),P=Math.round(h.convert(T)),O=Math.max(y,Math.abs(P-_)),E={x:u?Math.min(P,_):w,y:u?w:Math.min(P,_),width:u?O:x,height:u?x:O},F={x:E.x+E.width/2,y:E.y+E.height/2},B=this.createLabelData({datumIndex:M,rect:E,barAlongX:u,yDatum:T,datum:L,visible:R}),G={index:M,series:this,itemId:f,datum:L,datumIndex:M,xValue:C,yValue:T,xKey:d,yKey:g,x:E.x,y:E.y,width:E.width,height:E.height,midPoint:F,strokeWidth:y,crisp:A,label:B,visible:R};if(m.nodeData.push(G),B!=null&&m.labelData.push(B),v!=null){const V=v.rect,K=v.nodeDatum,W=v.datumIndex;u?m.connectorData.push({datum:K,datumIndex:W,x0:V.x,y0:V.y+V.height,x1:V.x+V.width,y1:V.y+V.height,x2:E.x+E.width,y2:E.y,x3:E.x,y3:E.y,opacity:1}):m.connectorData.push({datum:K,datumIndex:W,x0:V.x+V.width,y0:V.y,x1:E.x,y1:E.y,x2:E.x,y2:E.y+E.height,x3:V.x+V.width,y3:V.y+V.height,opacity:1})}R&&(v={itemId:f,rect:E,nodeDatum:G,datumIndex:M})}),m}updateNodes(e,t){super.updateNodes(e,t);const{connectorSelection:i}=this,s=this.contextNodeData?.connectorData??[];this.connectorSelection=this.updateConnectorSelection({connectorSelection:i,connectorData:s}),this.updateConnectorNodes({connectorSelection:i})}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e,s=t??[];return i.update(s,void 0,o=>this.getDatumId(o))}updateConnectorSelection(e){const{connectorData:t,connectorSelection:i}=e;return i.update(this.connectorEnabled()?t:[],void 0,s=>this.getDatumId(s.datum))}updateConnectorNodes(e){const{fills:t,strokes:i,fillGradientDefaults:s,fillPatternDefaults:o,fillImageDefaults:a}=this.properties,{fill:n,fillOpacity:r,stroke:l,strokeOpacity:c,strokeWidth:h,lineDash:u,lineDashOffset:d}=this.connectorStyle(),g=this.getShapeFillBBox();e.connectorSelection.each((y,f)=>{const{datumIndex:m}=f;y.setProperties(Ns(y,f));const S=HD(n??t[m%t.length],s,o,a);WD(y,{fill:S,stroke:l??i[m%i.length],fillOpacity:r,strokeOpacity:c,strokeWidth:h,lineDash:u,lineDashOffset:d},g)})}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum);return i.length>0?i:void 0}updateLabelSelection(e){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=gp.None})}updateLabelNodes(e){const t={stageKey:this.properties.stageKey,valueKey:this.properties.valueKey};e.labelSelection.each((i,s)=>{i.fillOpacity=this.getHighlightStyle(!1,s.datumIndex).opacity??1,ND(this,i,t,this.properties.label,s)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{stageKey:a,valueKey:n,tooltip:r,legendItemName:l}=o,c=this.getCategoryAxis(),h=this.getValueAxis();if(!i||!s||!c||!h)return;const u=s.dataSources.get(this.id)?.[e],d=i.resolveKeysById(this,"xValue",s)[e],g=i.resolveColumnById(this,"yValue",s)[e];if(d!=null)return this.formatTooltipWithContext(r,{symbol:this.legendItemSymbol(e),data:[{label:this.getAxisValueText(c,"tooltip",d,u,a,l),value:this.getAxisValueText(h,"tooltip",g,u,n,l)}]},{seriesId:t,datum:u,title:a,stageKey:a,valueKey:n,...this.tooltipStyle(u,e)})}resetAllAnimation(e){super.resetAllAnimation(e),CD([this.connectorSelection],Ns)}animateEmptyUpdateReady({labelSelection:e}){const{connectorSelection:t}=this,i=this.isVertical(),o=kD(i,"normal");GD.fromToMotion(this.id,"connectors",this.ctx.animationManager,[t],o),dp(this,"labels",this.ctx.animationManager,e)}animateWaitingUpdateReady(e){const{labelSelection:t}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id),dp(this,"labels",this.ctx.animationManager,t)}getDatumId(e){return KD(e.xValue)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){return ED(this,this.contextNodeData?.nodeData[e])}legendItemSymbol(e){const{strokeWidth:t,fillOpacity:i,strokeOpacity:s,lineDash:o,lineDashOffset:a,fillGradientDefaults:n,fillPatternDefaults:r,fillImageDefaults:l}=this.barStyle(),{fills:c,strokes:h}=this.properties,u=c[e%c.length]??"black",d=h[e%h.length]??"black";return{marker:zD({fill:u,fillOpacity:i,stroke:d,strokeWidth:t,strokeOpacity:s,lineDash:o,lineDashOffset:a},n,r,l)}}getLegendData(e){const{id:t,processedData:i,dataModel:s,ctx:{legendManager:o},visible:a}=this;if(!s||!i||e!=="category")return[];const{showInLegend:n}=this.properties,r=s.resolveKeysById(this,"xValue",i);return(i.dataSources.get(this.id)??[]).map((l,c)=>{const h=r[c];if(h!=null)return{legendType:"category",id:t,datum:l,itemId:c,seriesId:t,enabled:a&&o.getItemEnabled({seriesId:t,itemId:c}),label:{text:String(h)},symbol:this.legendItemSymbol(c),skipAnimations:!0,hideInLegend:!n}}).filter(l=>l!=null)}hasItemStylers(){return this.properties.itemStyler!=null}};import{_ModuleSupport as XD}from"ag-charts-community";var{FillGradientDefaults:YD,FillPatternDefaults:UD,FillImageDefaults:qD,Label:jD,AbstractBarSeriesProperties:JD,makeSeriesTooltip:ZD,AxisLabel:QD,Property:We}=XD,Ln=class extends jD{constructor(){super(...arguments),this.spacing=0}};p([We],Ln.prototype,"placement",2),p([We],Ln.prototype,"spacing",2);var yp=class extends QD{};p([We],yp.prototype,"placement",2);var Ye=class extends JD{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new YD,this.fillPatternDefaults=new UD,this.fillImageDefaults=new qD,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new Ln,this.stageLabel=new yp,this.tooltip=ZD()}};p([We],Ye.prototype,"stageKey",2),p([We],Ye.prototype,"valueKey",2),p([We],Ye.prototype,"fills",2),p([We],Ye.prototype,"fillGradientDefaults",2),p([We],Ye.prototype,"fillPatternDefaults",2),p([We],Ye.prototype,"fillImageDefaults",2),p([We],Ye.prototype,"fillOpacity",2),p([We],Ye.prototype,"strokes",2),p([We],Ye.prototype,"strokeWidth",2),p([We],Ye.prototype,"strokeOpacity",2),p([We],Ye.prototype,"lineDash",2),p([We],Ye.prototype,"lineDashOffset",2),p([We],Ye.prototype,"label",2),p([We],Ye.prototype,"stageLabel",2),p([We],Ye.prototype,"tooltip",2);function mp(e,{x:t,y:i,width:s,height:o,opacity:a}){return{x1:t,y1:i,x2:t+s,y2:i+o,opacity:a??1}}var{Line:ev,ChartAxisDirection:tv}=mD,Tn=class extends fp{constructor(e){super({moduleCtx:e,animationResetFns:{datum:mp}}),this.properties=new Ye}get hasData(){const{id:e,ctx:{legendManager:t}}=this,i=this.data?.reduce((s,o,a)=>s+(t.getItemEnabled({seriesId:e,itemId:a})?1:0),0);return i!=null&&i>1}getBandScalePadding(){return{inner:1,outer:0}}connectorEnabled(){return!0}barStyle(){return{fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[],lineDashOffset:0,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults,fillImageDefaults:this.properties.fillImageDefaults}}connectorStyle(){const{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:n,fillImageDefaults:r}=this.properties;return{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:n,fillImageDefaults:r}}nodeFactory(){return new ev}createLabelData({datumIndex:e,rect:t,barAlongX:i,yDatum:s,datum:o,visible:a}){const{stageKey:n,valueKey:r,label:l}=this.properties,{spacing:c,placement:h}=l;if(!l.enabled)return;let u,d,g,y;if(i)switch(u=t.x+t.width/2,g="center",h){case"before":d=t.y-c,y="bottom";break;case"after":d=t.y+t.height+c,y="top";break;default:d=t.y+t.height/2,y="middle"}else switch(d=t.y+t.height/2,y="middle",h){case"before":u=t.x-c,g="right";break;case"after":u=t.x+t.width+c,g="left";break;default:u=t.x+t.width/2,g="center"}const f=this.getSeriesDomain(tv.Y),m=this.getLabelText(s,o,r,"y",f,l,{itemId:r,value:s,datum:o,stageKey:n,valueKey:r});return{x:u,y:d,textAlign:g,textBaseline:y,text:m,itemId:r,datum:o,datumIndex:e,series:this,visible:a}}updateDatumNodes(e){const t=this.getHighlightStyle(e.isHighlight);e.datumSelection.each((i,s)=>{i.setProperties(mp(i,s)),i.stroke=t?.stroke,i.strokeWidth=t?.strokeWidth??0,i.strokeOpacity=t?.strokeOpacity??1,i.lineDash=t?.lineDash,i.lineDashOffset=t?.lineDashOffset??0,i.opacity=t?.opacity??1})}tooltipStyle(e,t){const{fills:i,strokes:s}=this.properties,o=i[t%i.length]??"black",a=s[t%s.length]??"black",{fillOpacity:n,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}=this.barStyle();return{fill:o,fillOpacity:n,stroke:a,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}}hasItemStylers(){return this.properties.label.itemStyler!=null}};Tn.className="ConeFunnelSeries",Tn.type="cone-funnel";import{_ModuleSupport as iv}from"ag-charts-community";import{constant as sv,required as Rn,string as Sp}from"ag-charts-core";var{commonSeriesOptionsDefs:ov,coneFunnelSeriesThemeableOptionsDef:av,without:nv}=iv,rv={...nv(ov,["showInLegend"]),...av,type:Rn(sv("cone-funnel")),stageKey:Rn(Sp),valueKey:Rn(Sp)};import{_ModuleSupport as qt}from"ag-charts-community";var{ThemeConstants:{CARTESIAN_AXIS_TYPE:xp}}=qt,ZR={series:{direction:"vertical",fills:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},qt.SAFE_RANGE2_OPERATION]},strokes:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$palette:"secondSequentialColors"},qt.SAFE_RANGE2_OPERATION]},fillGradientDefaults:qt.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:qt.FILL_PATTERN_DEFAULTS,fillImageDefaults:qt.FILL_IMAGE_DEFAULTS,strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:{...qt.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},placement:"before",spacing:4},tooltip:{range:{$path:["/tooltip/range","nearest"]}},highlight:qt.singleSeriesHighlightStyle(!1)},seriesArea:{padding:{top:20,bottom:20}},axes:{[xp.NUMBER]:{nice:!1,gridLine:{enabled:!1},crosshair:{enabled:!1},label:{enabled:!1}},[xp.CATEGORY]:{line:{enabled:!1}}}},bp={type:"series",name:"cone-funnel",chartType:"cartesian",enterprise:!0,options:rv,create:e=>new Tn(e)};import{_ModuleSupport as lv}from"ag-charts-community";import{_ModuleSupport as cv}from"ag-charts-community";var{FillGradientDefaults:pv,FillPatternDefaults:hv,FillImageDefaults:uv,Label:dv,DropShadow:gv,AbstractBarSeriesProperties:fv,BaseProperties:yv,makeSeriesTooltip:mv,AxisLabel:Sv,Property:he}=cv,xv=class extends dv{},Dp=class extends Sv{};p([he],Dp.prototype,"placement",2);var Kt=class extends yv{constructor(){super(...arguments),this.enabled=!0,this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([he],Kt.prototype,"enabled",2),p([he],Kt.prototype,"fill",2),p([he],Kt.prototype,"fillOpacity",2),p([he],Kt.prototype,"stroke",2),p([he],Kt.prototype,"strokeWidth",2),p([he],Kt.prototype,"strokeOpacity",2),p([he],Kt.prototype,"lineDash",2),p([he],Kt.prototype,"lineDashOffset",2);var Be=class extends fv{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new pv,this.fillPatternDefaults=new hv,this.fillImageDefaults=new uv,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.spacingRatio=0,this.dropOff=new Kt,this.shadow=new gv().set({enabled:!1}),this.label=new xv,this.stageLabel=new Dp,this.tooltip=mv()}getStyle(e){const{fills:t,strokes:i,fillOpacity:s,strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this;return{fill:t[e%t.length],fillOpacity:s,stroke:i[e%i.length],strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r,opacity:1}}};p([he],Be.prototype,"stageKey",2),p([he],Be.prototype,"valueKey",2),p([he],Be.prototype,"fills",2),p([he],Be.prototype,"fillGradientDefaults",2),p([he],Be.prototype,"fillPatternDefaults",2),p([he],Be.prototype,"fillImageDefaults",2),p([he],Be.prototype,"fillOpacity",2),p([he],Be.prototype,"strokes",2),p([he],Be.prototype,"strokeWidth",2),p([he],Be.prototype,"strokeOpacity",2),p([he],Be.prototype,"lineDash",2),p([he],Be.prototype,"lineDashOffset",2),p([he],Be.prototype,"spacingRatio",2),p([he],Be.prototype,"itemStyler",2),p([he],Be.prototype,"dropOff",2),p([he],Be.prototype,"shadow",2),p([he],Be.prototype,"label",2),p([he],Be.prototype,"stageLabel",2),p([he],Be.prototype,"tooltip",2);var{ChartAxisDirection:vp,resetBarSelectionsFn:bv,prepareBarAnimationFunctions:kp,midpointStartingBarPosition:Ip,createDatumId:Dv,Rect:vv,motion:Ap,applyShapeStyle:kv,getShapeStyle:Mp,mergeDefaults:Np}=lv,Pn=class extends fp{constructor(e){super({moduleCtx:e,animationResetFns:{datum:bv}}),this.properties=new Be}getBandScalePadding(){return{inner:this.properties.spacingRatio,outer:0}}connectorEnabled(){return this.properties.dropOff.enabled}barStyle(){const{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:n,fillImageDefaults:r}=this.properties;return{fillOpacity:e,strokeOpacity:t,strokeWidth:i,lineDash:s,lineDashOffset:o,fillGradientDefaults:a,fillPatternDefaults:n,fillImageDefaults:r}}connectorStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:n}=this.properties.dropOff;return{fill:e,fillOpacity:t,stroke:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:n,fillGradientDefaults:this.properties.fillGradientDefaults,fillPatternDefaults:this.properties.fillPatternDefaults,fillImageDefaults:this.properties.fillImageDefaults}}nodeFactory(){return new vv}createLabelData({datumIndex:e,rect:t,yDatum:i,datum:s,visible:o}){const{valueKey:a,stageKey:n,label:r}=this.properties;if(!r.enabled)return;const l=this.getSeriesDomain(vp.Y),c=this.getLabelText(i,s,a,"y",l,r,{itemId:a,value:i,datum:s,stageKey:n,valueKey:a});return{x:t.x+t.width/2,y:t.y+t.height/2,textAlign:"center",textBaseline:"middle",text:c,itemId:n,datum:s,datumIndex:e,series:this,visible:o}}getItemStyle({datum:e},t,i){const{id:s,properties:o}=this,{stageKey:a,valueKey:n,itemStyler:r}=o,l=this.getHighlightStyle(i,t),c=Np(l,o.getStyle(t));let h=Mp(c,o.fillGradientDefaults,o.fillPatternDefaults,o.fillImageDefaults);if(r!=null){const u=this.ctx.highlightManager?.getActiveHighlight(),d=this.cachedDatumCallback(Dv(t,i?"highlight":"node"),()=>{const g=this.getHighlightStateString(u,i,t);return this.callWithContext(r,{seriesId:s,datum:e,highlighted:i,highlightState:g,stageKey:a,valueKey:n,...h})});d&&(h=Mp(Np(d,h),o.fillGradientDefaults,o.fillPatternDefaults,o.fillImageDefaults))}return h}updateDatumNodes(e){const{shadow:t}=this.properties,{datumSelection:i,isHighlight:s}=e,o=this.getCategoryDirection()===vp.X,a=this.getShapeFillBBox();i.each((n,r)=>{const{datumIndex:l}=r,c=this.getItemStyle(r,l,s);kv(n,c,a),n.visible=o?r.width>0:r.height>0,n.crisp=r.crisp,n.fillShadow=t})}tooltipStyle(e,t){return this.getItemStyle({datumIndex:t,datum:e},t,!1)}animateEmptyUpdateReady(e){super.animateEmptyUpdateReady(e);const{datumSelection:t}=e,i=this.isVertical(),o=kp(Ip(i,"normal"));Ap.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e);const{datumSelection:t}=e,{processedData:i}=this,s=i?.reduced?.diff?.[this.id],o=kp(Ip(this.isVertical(),"fade"));Ap.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o,(a,n)=>n.xValue,s)}hasItemStylers(){return this.properties.itemStyler!=null||this.properties.label.itemStyler!=null}};Pn.className="FunnelSeries",Pn.type="funnel";import{_ModuleSupport as Iv}from"ag-charts-community";import{constant as Av,required as Cn,string as Lp}from"ag-charts-core";var{commonSeriesOptionsDefs:Mv,funnelSeriesThemeableOptionsDef:Nv,without:Lv}=Iv,Tv={...Nv,...Lv(Mv,["showInLegend"]),type:Cn(Av("funnel")),stageKey:Cn(Lp),valueKey:Cn(Lp)},Tp={type:"series",name:"funnel",chartType:"cartesian",enterprise:!0,options:Tv,create:e=>new Pn(e)};import{_ModuleSupport as Ls}from"ag-charts-community";import{_ModuleSupport as Xi}from"ag-charts-community";import{_ModuleSupport as Rv}from"ag-charts-community";function _n(e,t,i){return Rv.callWithContext(e.chartService,t,i)}var Rp=class{*[Symbol.iterator](){const{node:e,datum:t}=this;e&&t&&(yield{node:e,datum:t})}nodes(){return this.node?[this.node]:[]}update(e,t,i,s){const o=e.nodes();if(o.length===0)this.node?.remove(),this.node=void 0;else{this.node===void 0&&(this.node=new i,this.node.fillOpacity=0,this.node.strokeOpacity=0,t.appendChild(this.node));const a=o[0],n=o.toReversed().find(r=>r.datum.datum.value>r.datum.datum.segmentStart)??o[o.length-1];this.node.datum=this.datum=a.datum,s(this.node,a,n)}}},Pp={fromFn:()=>({opacity:0,phase:"initial"}),toFn:()=>({opacity:1})};function Cp(e,t){if(e==null)return"";const{min:i,max:s}=t,o=i!==0?Math.ceil(Math.log10(Math.abs(i))):0,a=s!==0?Math.ceil(Math.log10(Math.abs(s))):0,n=Math.max(2-Math.max(o,a),0);return e.toFixed(n)}function Ts(e,t,i,s){if(i.text!=null)return i.text;const o=s??i.value;let a;if(i?.formatter!=null&&(a=_n(t,i.formatter,{seriesId:e,datum:void 0,value:o})),a!=null)return String(a)}function _p({path:e,x:t,y:i,size:s}){e.moveTo(t,i-s/2),e.lineTo(t,i+s/2)}import{clamp as wp,iterate as Pv}from"ag-charts-core";function Ep(e,t){const i=Pv(e.datumUnion.nodes(),e.targetSelection.nodes());return e.pickNodeNearestDistantObject(t,i)}function Op(e,t){const i=[{data:e.contextNodeData?.nodeData,selection:e.datumUnion},{data:e.contextNodeData?.targetData,selection:e.targetSelection}].filter(l=>l.data&&l.data.length>0),s=wp(0,t.otherIndex+t.otherIndexDelta,i.length-1);if(i.length===0)return;const{data:o,selection:a}=i[s];if(o==null||o.length===0)return;const n=wp(0,t.datumIndex,o.length-1),r=o[n];for(const l of a)if(l.datum===r)return{bounds:l.node,clipFocusBox:!0,datum:r,datumIndex:n,otherIndex:s}}import{_ModuleSupport as wn}from"ag-charts-community";import{_ModuleSupport as Cv}from"ag-charts-community";import{Logger as _v}from"ag-charts-core";var{BaseProperties:Fp,Property:Yi}=Cv,Go=class extends Fp{getSegments(e,t){const{values:i,step:s,count:o}=this,a=Math.min(...e.domain),n=Math.max(...e.domain);let r;if(i!=null){const l=i.filter(c=>c>a&&c<n).sort((c,h)=>c-h);r=[a,...l,n]}else if(s!=null){const l=[];for(let c=a;c<n;c+=s)l.push(c);l.push(n),r=l}else if(o!=null){const l=o+1;r=Array.from({length:l+1},(c,h)=>h/l*(n-a)+a)}else{const l=e.ticks({nice:!0,interval:void 0,tickCount:void 0,minTickCount:0,maxTickCount:1/0})?.ticks?.filter(c=>c>a&&c<n);r=l!=null?[a,...l,n]:void 0}return r!=null&&r.length>t&&(_v.warnOnce("the configured segmentation results in more than 1 item per pixel, ignoring. Supply a segmentation configuration that results in larger segments or omit this configuration"),r=void 0),r??(r=[a,n]),r}};p([Yi],Go.prototype,"values",2),p([Yi],Go.prototype,"step",2),p([Yi],Go.prototype,"count",2);var Rs=class extends Fp{constructor(){super(...arguments),this.enabled=!1,this.interval=new Go,this.spacing=0}};p([Yi],Rs.prototype,"enabled",2),p([Yi],Rs.prototype,"interval",2),p([Yi],Rs.prototype,"spacing",2);var{BaseProperties:Vo,makeSeriesTooltip:wv,SeriesProperties:Ev,PropertiesArray:En,Property:H,Label:Ov,AxisLabel:Fv}=wn,Bp=class extends Ov{};p([H],Bp.prototype,"spacing",2);var $e=class extends Vo{constructor(){super(...arguments),this.value=0,this.label=new Bp}};p([H],$e.prototype,"text",2),p([H],$e.prototype,"value",2),p([H],$e.prototype,"shape",2),p([H],$e.prototype,"placement",2),p([H],$e.prototype,"spacing",2),p([H],$e.prototype,"size",2),p([H],$e.prototype,"rotation",2),p([H],$e.prototype,"fill",2),p([H],$e.prototype,"fillOpacity",2),p([H],$e.prototype,"stroke",2),p([H],$e.prototype,"strokeWidth",2),p([H],$e.prototype,"strokeOpacity",2),p([H],$e.prototype,"lineDash",2),p([H],$e.prototype,"lineDashOffset",2),p([H],$e.prototype,"label",2);var pt=class extends Vo{constructor(){super(...arguments),this.enabled=!0,this.thicknessRatio=1,this.fills=new En(wn.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([H],pt.prototype,"enabled",2),p([H],pt.prototype,"thickness",2),p([H],pt.prototype,"thicknessRatio",2),p([H],pt.prototype,"fills",2),p([H],pt.prototype,"fillMode",2),p([H],pt.prototype,"fill",2),p([H],pt.prototype,"fillOpacity",2),p([H],pt.prototype,"stroke",2),p([H],pt.prototype,"strokeWidth",2),p([H],pt.prototype,"strokeOpacity",2),p([H],pt.prototype,"lineDash",2),p([H],pt.prototype,"lineDashOffset",2);var Ps=class extends Vo{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};p([H],Ps.prototype,"values",2),p([H],Ps.prototype,"step",2),p([H],Ps.prototype,"minSpacing",2),p([H],Ps.prototype,"maxSpacing",2);var Gp=class extends Fv{constructor(){super(...arguments),this.placement=void 0}};p([H],Gp.prototype,"placement",2);var Ue=class extends Vo{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new En(wn.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new Ps,this.label=new Gp}};p([H],Ue.prototype,"min",2),p([H],Ue.prototype,"max",2),p([H],Ue.prototype,"fills",2),p([H],Ue.prototype,"fillMode",2),p([H],Ue.prototype,"fill",2),p([H],Ue.prototype,"fillOpacity",2),p([H],Ue.prototype,"stroke",2),p([H],Ue.prototype,"strokeWidth",2),p([H],Ue.prototype,"strokeOpacity",2),p([H],Ue.prototype,"lineDash",2),p([H],Ue.prototype,"lineDashOffset",2),p([H],Ue.prototype,"defaultFill",2),p([H],Ue.prototype,"interval",2),p([H],Ue.prototype,"label",2);var Ko=class extends wt{constructor(){super(...arguments),this.placement="inside-center",this.avoidCollisions=!0}};p([H],Ko.prototype,"text",2),p([H],Ko.prototype,"placement",2),p([H],Ko.prototype,"avoidCollisions",2);var qe=class extends Ev{constructor(){super(...arguments),this.value=0,this.segmentation=new Rs,this.defaultColorRange=[],this.targets=new En($e),this.defaultTarget=new $e,this.defaultScale=new Ue,this.direction="vertical",this.thickness=1,this.cornerRadius=0,this.cornerMode="container",this.margin=0,this.scale=new Ue,this.bar=new pt,this.label=new Ko,this.tooltip=wv()}};p([H],qe.prototype,"value",2),p([H],qe.prototype,"segmentation",2),p([H],qe.prototype,"defaultColorRange",2),p([H],qe.prototype,"targets",2),p([H],qe.prototype,"defaultTarget",2),p([H],qe.prototype,"defaultScale",2),p([H],qe.prototype,"direction",2),p([H],qe.prototype,"thickness",2),p([H],qe.prototype,"cornerRadius",2),p([H],qe.prototype,"cornerMode",2),p([H],qe.prototype,"margin",2),p([H],qe.prototype,"scale",2),p([H],qe.prototype,"bar",2),p([H],qe.prototype,"label",2),p([H],qe.prototype,"tooltip",2);import{_ModuleSupport as Bv}from"ag-charts-community";var{CachedTextMeasurerPool:Gv,BBox:Vv}=Bv;function On(e){const{x0:t,y0:i,x1:s,y1:o,horizontalInset:a,verticalInset:n}=e,r=Math.min(t,s)+a,l=Math.min(i,o)+n,c=Math.max(Math.abs(s-t)-2*a,0),h=Math.max(Math.abs(o-i)-2*n,0);return{x:r,y:l,width:c,height:h}}function Kv(e,t){if(t==null)return!0;const i=On(e),s=1e-6,o=i.x+s,a=i.y+s,n=i.x+i.width-s,r=i.y+i.height-s,l=t.x,c=t.x+t.width,h=t.y,u=t.y+t.height;return Math.max(o,l)<=Math.min(n,c)&&Math.max(a,h)<=Math.min(r,u)}function Fn(e){const{clipX0:t,clipX1:i,clipY0:s,clipY1:o}=e;return t!=null&&i!=null||s!=null&&o!=null}function Wv(e){if(!Fn(e))return;const{x0:t,y0:i,x1:s,y1:o}=e,{x:a,y:n,width:r,height:l}=On(e);let{clipX0:c,clipX1:h,clipY0:u,clipY1:d}=e;(c==null||h==null)&&(c=t,h=s),(u==null||d==null)&&(u=i,d=o);const g=Math.min(c,h),y=Math.min(u,d),f=Math.abs(h-c),m=Math.abs(d-u);return c=Math.max(a,g),u=Math.max(n,y),h=Math.min(a+r,g+f),d=Math.min(n+l,y+m),new Vv(Math.min(c,h),Math.min(u,d),Math.abs(h-c),Math.abs(d-u))}function Vp(e,t){const i=e?"initial":"update";return{node:{fromFn(o,a){const n=o.previousDatum;let{x0:r,y0:l,x1:c,y1:h,clipX0:u,clipY0:d,clipX1:g,clipY1:y}=n??a;const{horizontalInset:f,verticalInset:m}=a,S=n!=null&&Fn(n),D=Fn(a);return S&&D||(!S&&D?({x0:r,y0:l,x1:c,y1:h,clipX0:u,clipY0:d,clipX1:g,clipY1:y}=a,e&&(t?g=a.clipX0:y=a.clipY0)):S&&!D?({x0:r,y0:l,x1:c,y1:h}=a,u=void 0,d=void 0,g=void 0,y=void 0):e&&(t?c=r:h=l)),{x0:r,y0:l,x1:c,y1:h,clipX0:u,clipY0:d,clipX1:g,clipY1:y,horizontalInset:f,verticalInset:m,phase:i}},toFn(o,a){const{x0:n,y0:r,x1:l,y1:c,clipX0:h,clipY0:u,clipX1:d,clipY1:g,horizontalInset:y,verticalInset:f}=a;return{x0:n,y0:r,x1:l,y1:c,clipX0:h,clipY0:u,clipX1:d,clipY1:g,horizontalInset:y,verticalInset:f}},applyFn(o,a){o.setProperties(Wo(o,a))}}}}function Wo(e,t){const{x:i,y:s,width:o,height:a}=On(t),n=Wv(t),r=Kv(t,n);return{x:i,y:s,width:o,height:a,clipBBox:n,visible:r}}var zv={Before:"right",Center:"center",After:"left"},Hv={Before:"top",Center:"middle",After:"bottom"},$v={Before:-1,Center:-.5,After:0},Xv={Before:0,Center:-.5,After:-1};function Yv(e,t,i,s,o,a){const{seriesRect:n,gaugeRect:r,barRect:l}=o,{padding:c,horizontal:h}=s;i.each((u,d)=>{const g=Ts(e.id,t,d,a?.label);let y,f;d.placement==="outside-start"?h?(y=r.x,f=n.height):(y=n.width,f=n.height-(r.y+r.height)):d.placement==="outside-end"?h?(y=n.width-(r.x+r.width),f=n.height):(y=n.width,f=r.y):d.avoidCollisions&&(y=r.width,f=r.height);let m;if(g==null)return;if(y!=null&&f!=null)m=xs(g,d,{padding:c},()=>({width:y,height:f,meta:null}))?.[0];else{const T={fontSize:d.fontSize,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontFamily:d.fontFamily,lineHeight:d.lineHeight},{width:_,height:P}=Gv.measureText(g,{font:T});m={text:g,fontSize:d.fontSize,lineHeight:wi(d,d.fontSize),width:_,height:P}}if(m==null){u.visible=!1;return}const S=h?r.x:r.y+r.height,D=h?r.x+r.width:r.y,b=h?l.x:l.y+l.height,x=h?l.x+l.width:l.y,k=d.spacing*(h?1:-1);let I,A,v,N;switch(d.placement){case"outside-start":I=-1/0,A=1/0,v=S-k,N="Before";break;case"outside-end":I=-1/0,A=1/0,v=D+k,N="After";break;case"inside-start":I=S,A=x,v=S+k,N="After";break;case"inside-end":I=x,A=D,v=D-k,N="Before";break;case"inside-center":I=S,A=D,v=(S+D)/2,N="Center";break;case"bar-inside":I=b,A=x,v=(b+x)/2,N="Center";break;case"bar-inside-end":I=b,A=x,v=x-k,N="Before";break;case"bar-outside-end":I=x,A=D,v=x+k,N="After";break;case"bar-end":I=-1/0,A=1/0,v=x,N="Center";break}const L=h?v:r.x+r.width/2,M=h?r.y+r.height/2:v;let R,C;h?(R=L+$v[N]*m.width,C=R+m.width):(R=M+Xv[N]*m.height,C=R+m.height);const w=Math.min(R,C)>=Math.min(I,A)&&Math.max(R,C)<=Math.max(I,A);if(d.avoidCollisions&&!w){u.visible=!1;return}u.visible=!0,u.text=m.text,u.fontSize=m.fontSize,u.lineHeight=m.lineHeight,u.textAlign=h?zv[N]:"center",u.textBaseline=h?"middle":Hv[N],u.x=L,u.y=M})}var{fromToMotion:Bn,resetMotion:Uv,SeriesNodePickMode:Kp,StateMachine:qv,createDatumId:Wp,CachedTextMeasurerPool:jv,toRadians:zp,BBox:jt,Group:yi,PointerEvents:Hp,Selection:mi,Rect:Jv,Text:$p,TransformableText:Zv,Marker:Qv,LinearScale:e0,AxisTickGenerator:t0,NiceMode:i0,easing:s0,getColorStops:o0,findRangeExtent:a0,tickFormat:n0,mergeDefaults:r0,applyShapeStyle:l0}=Xi,c0={before:180,middle:0,after:0},p0={before:90,middle:0,after:-90},h0=class{constructor(e,t){this.gauge=e,this.ctx=t}get scale(){return this.gauge.scale}get label(){return this.gauge.properties.scale.label}get interval(){return this.gauge.properties.scale.interval}tickFormatter(e,t,i,s,o){const{format:a}=this.label;let n;return a!=null&&(n=n0(t,typeof a=="string"?a:void 0)),(r,l)=>{const{formatter:c}=this.label;let h;return c&&(h??(h=_n(this.ctx,c,{value:r,index:l,domain:e,boundSeries:void 0}))),h??(h=n?.(r)),h??this.gauge.formatLabel(r)}}inRange(){return!0}},zo=class extends Xi.Series{constructor(e){super({moduleCtx:e,pickModes:[Kp.EXACT_SHAPE_MATCH,Kp.NEAREST_NODE]}),this.properties=new qe,this.seriesRect=jt.NaN,this.gaugeRect=jt.NaN,this.scale=new e0,this.originX=0,this.originY=0,this.scaleGroup=this.contentGroup.appendChild(new yi({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new yi({name:"itemGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new yi({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new yi({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new yi({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new yi({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new yi({name:"tickGroup"})),this.scaleSelection=mi.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=mi.select(this.itemGroup,()=>this.nodeFactory()),this.targetSelection=mi.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=mi.select(this.itemTargetLabelGroup,$p),this.labelSelection=mi.select(this.itemLabelGroup,$p),this.highlightTargetSelection=mi.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=mi.select(this.tickGroup,Zv),this.datumUnion=new Rp,this.axis=new h0(this,e),this.tickGenerator=new t0(this.axis),this.animationState=new qv("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=Hp.None,this.tickGroup.pointerEvents=Hp.None}get range(){return this.horizontal?[0,this.gaugeRect.width]:[0,this.gaugeRect.height]}get horizontal(){return this.properties.direction==="horizontal"}get hasData(){return!0}nodeFactory(){const e=new Jv;return e.crisp=!0,e}markerFactory(){return new Qv}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){return Cp(e,this.properties.scale)}createLinearGradient(e,t,i){const{properties:s,horizontal:o}=this,{defaultColorRange:a}=s;return{type:"gradient",gradient:"linear",colorSpace:"oklch",colorStops:o0(t,a,e.domain,i),rotation:o?90:0}}getShapeFillBBox(){const{properties:e,originX:t,originY:i,horizontal:s,scale:o}=this,{thickness:a}=e,n=a0(o.range);return new jt(t,i,s?n:a,s?a:n)}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:s=t.text,value:o=t.value??0,shape:a=t.shape??"triangle",rotation:n=t.rotation??0,strokeWidth:r=t.strokeWidth??0,placement:l=t.placement??"middle",spacing:c=t.spacing??0,size:h=t.size??0,fill:u=t.fill??"black",fillOpacity:d=t.fillOpacity??1,stroke:g=t.stroke??"black",strokeOpacity:y=t.strokeOpacity??1,lineDash:f=t.lineDash??[0],lineDashOffset:m=t.lineDashOffset??0}=i,{enabled:S=t.label.enabled,color:D=t.label.color??"black",fontStyle:b=t.label.fontStyle??"normal",fontWeight:x=t.label.fontWeight??"normal",fontSize:k=t.label.fontSize,fontFamily:I=t.label.fontFamily,spacing:A=t.label.spacing??0}=i.label;return{text:s,value:o,shape:a,placement:l,spacing:c,size:h,rotation:n,fill:u,fillOpacity:d,stroke:g,strokeWidth:r,strokeOpacity:y,lineDash:f,lineDashOffset:m,label:{enabled:S,color:D,fontStyle:b,fontWeight:x,fontSize:k,fontFamily:I,spacing:A}}})}getTargetPoint(e){const{properties:t,originX:i,originY:s,horizontal:o,scale:a,gaugeRect:n}=this,{thickness:r}=t,{value:l,placement:c,spacing:h,size:u}=e,d=a.convert(l);let g;switch(c){case"before":g=-(h+u/2);break;case"after":g=r+h+u/2;break;default:g=r/2;break}return{x:i+n.x+(o?d:g),y:s+n.y+(o?g:d)}}getTargetLabel(e){const{size:t,placement:i,label:s}=e,{spacing:o,color:a,fontStyle:n,fontWeight:r,fontSize:l,fontFamily:c}=s,h=void 0,u=t/2+o;let d,g,y=0,f=0;return this.horizontal?(d="center",i==="after"?(g="top",f=u):(g="bottom",f=-u)):(g="middle",i==="before"?(d="right",y=-u):(d="left",y=u)),{offsetX:y,offsetY:f,fill:a,textAlign:d,textBaseline:g,fontStyle:n,fontWeight:r,fontSize:l,fontFamily:c,lineHeight:h}}labelDatum(e,t){const{placement:i,avoidCollisions:s,spacing:o,text:a,color:n,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:u,lineHeight:d,wrapping:g,overflowStrategy:y,formatter:f=m=>this.formatLabel(m.value)}=e;return{placement:i,avoidCollisions:s,spacing:o,text:a,value:t,fill:n,fontSize:r,minimumFontSize:l,fontStyle:c,fontWeight:h,fontFamily:u,lineHeight:d,wrapping:g,overflowStrategy:y,formatter:f}}verticalLabelInset(){const{properties:e}=this,{label:t}=e,i=t.text?.split(`
`),s=wi(t,t.fontSize)*(i?.length??1);return t.spacing+s}horizontalLabelInset(){const{scale:e,properties:t}=this,{scale:i,label:s}=t,o=s.text?.split(`
`),a=jv.getMeasurer({font:s}),n=i.interval.values??e.ticks({nice:!1,interval:i.interval.step,minTickCount:0,maxTickCount:6,tickCount:5})?.ticks??[],l=(o??n?.map(c=>Ts(this.id,this.ctx,this.labelDatum(s,c))??"")).reduce((c,h)=>{const{width:u}=a.measureText(h);return Math.max(c,u)},0);return s.spacing+l}createNodeData(){const{id:e,properties:t,horizontal:i,scale:s,seriesRect:o}=this,{value:a,segmentation:n,thickness:r,cornerRadius:l,cornerMode:c,bar:h,scale:u,label:d}=t;s.domain=[u.min,u.max],s.range=i?[0,o.width]:[o.height,0];let g,y;i?(y=1,g=Math.PI/2):u.label.placement==="before"?(y=1,g=0):(y=-1,g=0);const f=g-Math.PI/2;let m,S,D,b;i?(m=0,S=o.width,D=(o.height-r)/2,b=D+r,d.placement==="outside-start"?m+=this.horizontalLabelInset():d.placement==="outside-end"&&(S-=this.horizontalLabelInset())):(m=(o.width-r)/2,S=m+r,b=0,D=o.height,d.placement==="outside-start"?D-=this.verticalLabelInset():d.placement==="outside-end"&&(b+=this.verticalLabelInset())),this.gaugeRect=new jt(Math.min(m,S),Math.min(D,b),Math.abs(S-m),Math.abs(b-D));const x=0,k=0;s.domain=[u.min,u.max],s.range=i?[m,S]:[D,b];const{ticks:I}=this.tickGenerator.generateTicks({domain:s.domain,range:this.range,reverse:!1,primaryTickCount:void 0,defaultTickMinSpacing:0,visibleRange:[0,1],niceMode:i0.Off,labelX:0,parallelFlipRotation:g,regularFlipRotation:f,sideFlag:y,sizeLimit:void 0,removeOverflowLabels:!1}).tickData,A=!1,v=this.getTargets(),N=[],L=[],M=[],R=[],[C,w]=s.range,T=Math.abs(w-C),_=i?s.convert(a):S,P=i?b:s.convert(a),O=n.enabled?n.spacing/2:0,E=i?O:0,F=i?0:O,B=Math.min(h.thickness??Math.round(h.thicknessRatio*r),r),G=-(r-B)/2,V=i?0:G,K=i?G:0,W=c==="item",$=Math.ceil(T);let X=n.enabled?n.interval.getSegments(s,$):void 0;const q=h.fill??this.createLinearGradient(s,h.fills,h.fillMode),Z=u.fill??(h.enabled&&u.fills.length===0?u.defaultFill:void 0)??this.createLinearGradient(s,u.fills,u.fillMode);if(X==null&&W){const j=Math.min(...s.domain),Y=Math.max(...s.domain),oe={value:a,segmentStart:j,segmentEnd:Y};if(h.enabled){const fe=Math.min(l,B/2,T/2)*(A?-1:1),ce=i?fe:0,xe=i?0:fe;N.push({series:this,itemId:"value",datum:oe,datumIndex:{type:0},type:0,x0:x+m-ce-V,y0:k+D-xe-K,x1:x+_+ce+V,y1:k+P+xe+K,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:q,horizontalInset:E,verticalInset:F})}const ie=Math.min(l,r/2,T/2)*(A?-1:1),J=i?ie:0,Se=i?0:ie;R.push({series:this,itemId:"scale",datum:oe,datumIndex:{type:0},type:0,x0:x+m-J,y0:k+D-Se,x1:x+S+J,y1:k+b+Se,clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:l,topRightCornerRadius:l,bottomRightCornerRadius:l,bottomLeftCornerRadius:l,fill:Z,horizontalInset:E,verticalInset:F})}else{X??(X=s.domain);const j=x+m-V,Y=k+D-K,oe=x+_+V,ue=k+P+K;for(let ie=0;ie<X.length-1;ie+=1){const J=X[ie+0],Se=X[ie+1],le={value:a,segmentStart:J,segmentEnd:Se},fe=ie===0,ce=ie===X.length-2,xe=s.convert(J),Pe=s.convert(Se),Ze=W||fe?l:0,bt=W||ce?l:0,nt=i?Ze:bt,Pt=bt,ls=i?bt:Ze,cs=Ze;h.enabled&&N.push({series:this,itemId:`value-${ie}`,datum:le,datumIndex:{type:0},type:0,x0:x+(i?xe:m),y0:k+(i?D:xe),x1:x+(i?Pe:S),y1:k+(i?b:Pe),clipX0:j,clipY0:Y,clipX1:oe,clipY1:ue,topLeftCornerRadius:nt,topRightCornerRadius:Pt,bottomRightCornerRadius:ls,bottomLeftCornerRadius:cs,fill:q,horizontalInset:E,verticalInset:F}),R.push({series:this,itemId:`scale-${ie}`,datum:le,datumIndex:{type:0},type:0,x0:x+(i?xe:m),y0:k+(i?D:xe),x1:x+(i?Pe:S),y1:k+(i?b:Pe),clipX0:void 0,clipY0:void 0,clipX1:void 0,clipY1:void 0,topLeftCornerRadius:nt,topRightCornerRadius:Pt,bottomRightCornerRadius:ls,bottomLeftCornerRadius:cs,fill:Z,horizontalInset:E,verticalInset:F})}}d.enabled&&M.push(this.labelDatum(d,a));const se=i?c0:p0;for(let j=0;j<v.length;j+=1){const Y=v[j],{value:oe,text:ue,shape:ie,size:J,fill:Se,fillOpacity:le,stroke:fe,strokeWidth:ce,strokeOpacity:xe,lineDash:Pe,lineDashOffset:Ze}=Y,bt=this.getTargetPoint(Y),nt=zp(Y.rotation+se[Y.placement]);L.push({series:this,itemId:`target-${j}`,midPoint:bt,datum:{value:oe},datumIndex:{type:1,index:j},type:1,value:oe,text:ue,x:bt.x,y:bt.y,shape:ie,size:J,rotation:nt,fill:Se,fillOpacity:le,stroke:fe,strokeOpacity:xe,strokeWidth:ce,lineDash:Pe,lineDashOffset:Ze,label:this.getTargetLabel(Y)})}return{itemId:e,nodeData:N,tickData:I,targetData:L,labelData:M,scaleData:R}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,targetSelection:s,targetLabelSelection:o,scaleSelection:a,highlightTargetSelection:n,tickSelection:r}=this;this.seriesRect=e??jt.NaN;const l=this.checkResize(e);this.updateSelections(l),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const c=this.contextNodeData?.nodeData??[],h=this.contextNodeData?.labelData??[],u=this.contextNodeData?.targetData??[],d=this.contextNodeData?.scaleData??[],g=this.contextNodeData?.tickData??[],y=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:d,scaleSelection:a}),this.updateScaleNodes({scaleSelection:a}),this.targetSelection=this.updateTargetSelection({targetData:u,targetSelection:s}),this.updateTargetNodes({targetSelection:s,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:u,targetLabelSelection:o}),this.updateTargetLabelNodes({targetLabelSelection:o}),this.datumSelection=this.updateDatumSelection({nodeData:c,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:h,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:y!=null?[y]:[],targetSelection:n}),this.updateTargetNodes({targetSelection:n,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:g,tickSelection:r}),this.updateTickNodes({tickSelection:r}),l&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Wp(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i,properties:s}=this,{bar:o}=s,{fillOpacity:a,stroke:n,strokeOpacity:r,lineDash:l,lineDashOffset:c}=o,h=o.strokeWidth,u=i.animationManager.isSkipped(),d=this.getShapeFillBBox();t.each((g,y)=>{const{topLeftCornerRadius:f,topRightCornerRadius:m,bottomRightCornerRadius:S,bottomLeftCornerRadius:D,fill:b}=y;g.fill=b,g.fillBBox=d,g.fillOpacity=a,g.stroke=n,g.strokeOpacity=r,g.strokeWidth=h,g.lineDash=l,g.lineDashOffset=c,g.topLeftCornerRadius=f,g.topRightCornerRadius=m,g.bottomRightCornerRadius=S,g.bottomLeftCornerRadius=D,g.pointerEvents=this.properties.bar.enabled?Xi.PointerEvents.All:Xi.PointerEvents.None,(u||g.previousDatum==null)&&g.setProperties(Wo(g,y))}),this.datumUnion.update(t,this.itemGroup,Xi.Rect,(g,y,f)=>{g.pointerEvents=Xi.PointerEvents.None,g.clipBBox??(g.clipBBox=new jt(NaN,NaN,NaN,NaN)),g.x=y.x,g.y=y.y,g.clipBBox.x=y.clipBBox?.x??y.x,g.clipBBox.y=y.clipBBox?.y??y.y,this.horizontal?(g.height=g.clipBBox.height=f.height,g.width=f===y?f.width:f.x+f.width,g.clipBBox.width=g.width-(f.width-(f.clipBBox?.width??f.width)),g.topLeftCornerRadius=y.topLeftCornerRadius,g.bottomLeftCornerRadius=y.bottomLeftCornerRadius,g.topRightCornerRadius=f.topRightCornerRadius,g.bottomRightCornerRadius=f.bottomRightCornerRadius):(g.width=g.clipBBox.width=f.width,g.height=f===y?f.height:f.x+f.height,g.clipBBox.height=g.height-(f.height-(f.clipBBox?.height??f.height)),g.topLeftCornerRadius=y.topLeftCornerRadius,g.topRightCornerRadius=y.topRightCornerRadius,g.bottomLeftCornerRadius=f.bottomLeftCornerRadius,g.bottomRightCornerRadius=f.bottomRightCornerRadius)})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>Wp(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,{scale:i}=this.properties,{fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:n,lineDash:r,lineDashOffset:l}=i,c=this.getShapeFillBBox();t.each((h,u)=>{const{topLeftCornerRadius:d,topRightCornerRadius:g,bottomRightCornerRadius:y,bottomLeftCornerRadius:f,fill:m}=u;h.fill=m,h.fillBBox=c,h.fillOpacity=s,h.stroke=o,h.strokeOpacity=a,h.strokeWidth=n,h.lineDash=r,h.lineDashOffset=l,h.topLeftCornerRadius=d,h.topRightCornerRadius=g,h.bottomRightCornerRadius=y,h.bottomLeftCornerRadius=f,h.setProperties(Wo(h,u))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e;t.each((s,o)=>{const{x:a,y:n,shape:r,size:l,rotation:c,fill:h,fillOpacity:u,stroke:d,strokeOpacity:g,strokeWidth:y,lineDash:f,lineDashOffset:m}=o,S=this.getHighlightStyle(i,o.datumIndex),D=r0(S,{fill:h,fillOpacity:u,stroke:d,strokeOpacity:g,strokeWidth:y,lineDash:f,lineDashOffset:m,opacity:1});l0(s,D),s.size=l,s.shape=r==="line"?_p:r,s.translationX=a,s.translationY=n,s.rotation=c})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,s)=>{const{x:o,y:a,text:n}=s,{offsetX:r,offsetY:l,fill:c,fontStyle:h,fontWeight:u,fontSize:d,fontFamily:g,textAlign:y,textBaseline:f}=s.label;i.visible=!0,i.x=o+r,i.y=a+l,i.text=n,i.fill=c,i.fontStyle=h,i.fontWeight=u,i.fontSize=d,i.fontFamily=g,i.textAlign=y,i.textBaseline=f})}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.tickId)}updateTickNodes(e){const{gaugeRect:t,properties:i}=this,s=i.defaultScale,{enabled:o,color:a,fontFamily:n=s.label.fontFamily,fontSize:r=s.label.fontSize,fontStyle:l,fontWeight:c=s.label.fontWeight,spacing:h}=i.scale.label;let{placement:u}=i.scale.label;const d=zp(i.scale.label.rotation??0);let g,y,f,m;this.horizontal?(u??(u="after"),g="center",y=u==="before"?"bottom":"top",m=this.originY+t.y+(u==="before"?-h:t.height+h)):(u??(u="before"),g=u==="before"?"end":"start",y="middle",f=this.originX+t.x+(u==="before"?-h:t.width+h)),e.tickSelection.each((S,D)=>{if(!o){S.visible=!1;return}const b=f??D.translation,x=m??D.translation;S.visible=!0,S.text=D.tickLabel,S.fill=a,S.fontFamily=n,S.fontSize=r,S.fontStyle=l,S.fontWeight=c,S.textBaseline=y,S.textAlign=g,S.x=b,S.y=x,S.rotationCenterX=b,S.rotationCenterY=x,S.rotation=d})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>"primary")}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((s,o)=>{s.fill=o.fill,s.fontStyle=o.fontStyle,s.fontWeight=o.fontWeight,s.fontFamily=o.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,horizontal:i,scale:s,seriesRect:o,gaugeRect:a}=this,{x:n,y:r,width:l,height:c}=a,h=e?.label??this.properties.value;let u;if(i){const y=s.convert(h);u=new jt(n,r,y-n,c)}else{const y=s.convert(h);u=new jt(n,y,l,c-y)}const d={seriesRect:o,gaugeRect:a,barRect:u},{margin:g}=this.properties;Yv(this,this.ctx,t,{padding:g,horizontal:i},d,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),Uv([this.datumSelection],Wo),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i=0,s=0;if(this.labelSelection.each((o,a)=>{o.opacity=1,i=o.previousDatum?.value??e.from??a.value,s=a.value}),!this.labelsHaveExplicitText())if(i===s)this.formatLabelText({label:s});else{const o=`${this.id}_labels`;t.animate({id:o,groupId:"label",from:{label:i},to:{label:s},phase:e.phase??"update",ease:s0.easeOut,onUpdate:a=>this.formatLabelText(a),onStop:()=>this.formatLabelText({label:s})})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Vp(!0,this.horizontal);Bn(this.id,"node",e,[this.datumSelection],t,(i,s)=>s.itemId),Bn(this.id,"label",e,[this.labelSelection],Pp,()=>"primary"),this.animateLabelText({from:0,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t}=Vp(!1,this.horizontal);Bn(this.id,"node",e,[this.datumSelection],t,(i,s)=>s.itemId),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}getSeriesDomain(){return[0,1]}dataCount(){return NaN}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:s}=i;let o,a;if(e.type===0?(o=i.value,a=i.label.text):{value:o,text:a}=i.targets[e.index],o!=null)return this.formatTooltipWithContext(s,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(o)}]},{seriesId:t,title:void 0,datum:void 0,value:o})}pickNodeClosestDatum(e){return Ep(this,e)}pickFocus(e){return Op(this,e)}getCaptionText(){return this.formatLabel(this.properties.value)}getCategoryValue(e){}datumIndexForCategoryValue(e){}hasItemStylers(){return!1}};zo.className="LinearGaugeSeries",zo.type="linear-gauge";var hP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"linear-gauge",moduleFactory:e=>new zo(e),themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{thickness:50,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},Ls.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",Ls.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{spacing:11}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:1},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"after",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},defaultScale:{label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}}},label:{...Ls.LABEL_BOXING_DEFAULTS,enabled:!1,placement:"inside-start",fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},fontSize:{$rem:2},minimumFontSize:Ls.FONT_SIZE.SMALL,spacing:18,color:{$ref:"chartBackgroundColor"}},margin:4,tooltip:{range:{$path:["/tooltip/range",10]}}}}},Xp={type:"series",name:"linear-gauge",chartType:"standalone",enterprise:!0,options:Ls.linearGaugeSeriesOptionsDef,create:e=>new zo(e)};import{_ModuleSupport as Ho}from"ag-charts-community";import{_ModuleSupport as Gn}from"ag-charts-community";var Cs={zoom:{axes:"xy",anchorPointX:"pointer",anchorPointY:"pointer",buttons:{anchorPointX:"middle",anchorPointY:"middle"}},legend:{enabled:!1},gradientLegend:{enabled:!1,...Gn.LEGEND_CONTAINER_THEME}};function je(e){const t=Gn.deepClone(e);return Gn.jsonWalk(t,i=>{typeof i=="object"&&"$palette"in i&&(i.$mapPalette=i.$palette,delete i.$palette)}),t}import{_ModuleSupport as Yp}from"ag-charts-community";import{Logger as Up}from"ag-charts-core";import{_ModuleSupport as u0}from"ag-charts-community";var d0=1e-9;function qp(e,t,i,s){const[o,a]=e,[n,r]=t,l=n-o,c=r-a,h=l*l+c*c;let u,d;if(Math.abs(h)<d0)u=o,d=a;else{let f=((i-o)*l+(s-a)*c)/h;f=Math.max(0,Math.min(1,f)),u=o+f*(n-o),d=a+f*(r-a)}const g=i-u,y=s-d;return g*g+y*y}function jp(e,t,i){let s=1/0,o=e[e.length-1];for(const a of e)s=Math.min(s,qp(o,a,t,i)),o=a;return Math.sqrt(s)}function Vn(e){let[t,i]=e[0],s=0;for(let o=1;o<e.length;o+=1){const[a,n]=e[o],r=Math.hypot(a-t,n-i);s+=r,t=a,i=n}return s}function $o(e){if(e.length===0)return;const t=Vn(e)/2;let[i,s]=e[0],o=0;for(let a=1;a<e.length;a+=1){const[n,r]=e[a],l=Math.hypot(n-i,r-s),c=o+l;if(c>t){const h=(t-o)/l,u=[i+(n-i)*h,s+(r-s)*h],d=Math.atan2(r-s,n-i);return{point:u,angle:d}}o=c,i=n,s=r}}import{_ModuleSupport as g0}from"ag-charts-community";var{LonLatBBox:f0}=g0;function Si(e,t){return e.forEach(i=>{const[s,o]=i;t=f0.extend(t,s,o,s,o)}),t}function y0(e){if(e.length===0)return;let t=0,i=0,s=0,[o,a]=e[e.length-1];for(const[n,r]of e){const l=o*r-n*a;s+=l,t+=(o+n)*l,i+=(a+r)*l,o=n,a=r}return s*=3,[t/s,i/s]}function Xo(e,t,i){let s=!1,o=1/0;for(const a of e){let n=a[a.length-1],[r,l]=n;for(const c of a){const[h,u]=c;u>i!=l>i&&t<(r-h)*(i-u)/(l-u)+h&&(s=!s),o=Math.min(o,qp(n,c,t,i)),n=c,r=h,l=u}}return(s?-1:1)*Math.sqrt(o)}var{Path:m0,ExtendedPath2D:S0,BBox:x0,SceneChangeDetection:b0,SceneObjectChangeDetection:D0,objectsEqual:v0}=u0,Ui=class extends m0{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new S0}computeBBox(){return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.bbox?.clone()}updatePath(){const{projectedGeometry:e}=this;this.strokePath.clear(),this.path.clear(),this.bbox=e!=null?this.drawGeometry(e,void 0):void 0}drawPath(e){super.drawPath(e),this.renderStroke(e,this.strokePath.getPath2D())}containsPoint(e,t){const{projectedGeometry:i}=this;return i==null||!this.getBBox().containsPoint(e,t)?!1:this.geometryDistance(i,e,t)<=0}distanceSquared(e,t){const{projectedGeometry:i}=this;if(i==null)return 1/0;const s=this.geometryDistance(i,e,t);return s>0?s*s:0}geometryDistance(e,t,i){const{renderMode:s,strokeWidth:o}=this,a=(s&1)!==0,n=(s&2)!==0,r=Math.max(o/2,1)+1;switch(e.type){case"GeometryCollection":return e.geometries.reduce((l,c)=>Math.min(l,this.geometryDistance(c,t,i)),1/0);case"MultiPolygon":return a?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(Xo(c,t,i),0)),1/0):1/0;case"Polygon":return a?Math.max(Xo(e.coordinates,t,i),0):1/0;case"MultiLineString":return n?e.coordinates.reduce((l,c)=>Math.min(l,Math.max(jp(c,t,i)-r,0)),1/0):1/0;case"LineString":return n?Math.max(jp(e.coordinates,t,i)-r,0):1/0;case"MultiPoint":case"Point":default:return 1/0}}drawGeometry(e,t){const{renderMode:i,path:s,strokePath:o}=this,a=(i&1)!==0,n=(i&2)!==0;switch(e.type){case"GeometryCollection":e.geometries.forEach(r=>{t=this.drawGeometry(r,t)});break;case"MultiPolygon":a&&e.coordinates.forEach(r=>{t=this.drawPolygon(s,r,t)});break;case"Polygon":a&&(t=this.drawPolygon(s,e.coordinates,t));break;case"LineString":n&&(t=this.drawLineString(o,e.coordinates,t,!1));break;case"MultiLineString":n&&e.coordinates.forEach(r=>{t=this.drawLineString(o,r,t,!1)});break;case"Point":case"MultiPoint":break}return t}drawPolygon(e,t,i){if(t.length<1)return i;i=this.drawLineString(e,t[0],i,!0);for(let s=1;s<t.length;s+=1){const o=t[s];this.drawLineString(e,o,void 0,!0)}return i}drawLineString(e,t,i,s){if(t.length<2)return i;const o=s?t.length-1:t.length;for(let a=0;a<o;a+=1){const[n,r]=t[a];if(a===0?e.moveTo(n,r):e.lineTo(n,r),i==null)i=new x0(n,r,0,0);else{const{x:l,y:c}=i,h=l+i.width,u=c+i.height;i.x=Math.min(l,n),i.y=Math.min(c,r),i.width=Math.max(h,n)-i.x,i.height=Math.max(u,r)-i.y}}return s&&e.closePath(),i}};p([D0({equals:v0})],Ui.prototype,"projectedGeometry",2),p([b0()],Ui.prototype,"renderMode",2);import{_ModuleSupport as k0}from"ag-charts-community";var{LonLatBBox:Kn}=k0;function qi(e,t){if(e.bbox!=null){const[i,s,o,a]=e.bbox;return t=Kn.extend(t,i,s,o,a),t}switch(e.type){case"GeometryCollection":e.geometries.forEach(i=>{t=qi(i,t)});break;case"MultiPolygon":e.coordinates.forEach(i=>{i.length>0&&(t=Si(i[0],t))});break;case"Polygon":e.coordinates.length>0&&(t=Si(e.coordinates[0],t));break;case"MultiLineString":e.coordinates.forEach(i=>{t=Si(i,t)});break;case"LineString":t=Si(e.coordinates,t);break;case"MultiPoint":e.coordinates.forEach(i=>{const[s,o]=i;t=Kn.extend(t,s,o,s,o)});break;case"Point":{const[i,s]=e.coordinates;t=Kn.extend(t,i,s,i,s);break}}return t}function Yo(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach(s=>{const o=Yo(s);if(o==null)return;const a=Si(o[0],void 0);if(a==null)return;const n=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(t==null||n>t)&&(t=n,i=o)}),i}case"MultiPolygon":{let t,i;return e.coordinates.forEach(s=>{const o=Si(s[0],void 0);if(o==null)return;const a=Math.abs(o.lat1-o.lat0)*Math.abs(o.lon1-o.lon0);(t==null||a>t)&&(t=a,i=s)}),i}case"Polygon":return e.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function Uo(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.forEach(s=>{const o=Uo(s);if(o==null)return;const a=Vn(o);a!=null&&(t==null||a>t)&&(t=a,i=o)}),i}case"MultiLineString":{let t=0,i;return e.coordinates.forEach(s=>{const o=Vn(s);o>t&&(t=o,i=s)}),i}case"LineString":return e.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function Wn(e,t){if(e==null)return!1;switch(e.type){case"GeometryCollection":return e.geometries.some(i=>Wn(i,t));case"MultiPolygon":case"Polygon":return(t&1)!==0;case"MultiLineString":case"LineString":return(t&2)!==0;case"MultiPoint":case"Point":return(t&4)!==0}}function Jt(e,t){switch(e.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:e.geometries.map(i=>Jt(i,t))};case"Polygon":return{type:"Polygon",coordinates:zn(e.coordinates,t)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:I0(e.coordinates,t)};case"MultiLineString":return{type:"MultiLineString",coordinates:zn(e.coordinates,t)};case"LineString":return{type:"LineString",coordinates:Hn(e.coordinates,t)};case"MultiPoint":return{type:"MultiPoint",coordinates:Hn(e.coordinates,t)};case"Point":return{type:"Point",coordinates:t.convert(e.coordinates)}}}function I0(e,t){return e.map(i=>zn(i,t))}function zn(e,t){return e.map(i=>Hn(i,t))}function Hn(e,t){return e.map(i=>t.convert(i))}function A0(){return{fromFn:(i,s,o)=>o==="removed"?{scalingX:1,scalingY:1}:i.previousDatum==null?{scalingX:0,scalingY:0}:{scalingX:i.scalingX,scalingY:i.scalingY},toFn:(i,s,o)=>o==="removed"?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}}}function Jp(e,t){const i=e.contextNodeData?.nodeData[t.datumIndex];if(i!==void 0){for(const s of e.datumSelection.nodes())if(s.datum===i)return s}}import{_ModuleSupport as Zp}from"ag-charts-community";var bP=class extends Zp.SeriesProperties{},_s=class extends Zp.DataModelSeries{addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>{this.onLegendItemClick(e)}),this.ctx.eventsHub.on("legend:item-double-click",e=>{this.onLegendItemDoubleClick(e)}))}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}};import{_ModuleSupport as M0}from"ag-charts-community";var{Property:Ie,SeriesProperties:N0,makeSeriesTooltip:L0,Label:T0}=M0,ve=class extends N0{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new T0,this.tooltip=L0()}};p([Ie],ve.prototype,"topology",2),p([Ie],ve.prototype,"title",2),p([Ie],ve.prototype,"legendItemName",2),p([Ie],ve.prototype,"idKey",2),p([Ie],ve.prototype,"topologyIdKey",2),p([Ie],ve.prototype,"idName",2),p([Ie],ve.prototype,"labelKey",2),p([Ie],ve.prototype,"labelName",2),p([Ie],ve.prototype,"sizeKey",2),p([Ie],ve.prototype,"sizeName",2),p([Ie],ve.prototype,"colorKey",2),p([Ie],ve.prototype,"colorName",2),p([Ie],ve.prototype,"sizeDomain",2),p([Ie],ve.prototype,"colorRange",2),p([Ie],ve.prototype,"maxStrokeWidth",2),p([Ie],ve.prototype,"stroke",2),p([Ie],ve.prototype,"strokeOpacity",2),p([Ie],ve.prototype,"strokeWidth",2),p([Ie],ve.prototype,"lineDash",2),p([Ie],ve.prototype,"lineDashOffset",2),p([Ie],ve.prototype,"itemStyler",2),p([Ie],ve.prototype,"label",2),p([Ie],ve.prototype,"tooltip",2);var{getMissCount:R0,getLabelStyles:P0,createDatumId:Qp,SeriesNodePickMode:eh,valueProperty:ws,CachedTextMeasurerPool:C0,ColorScale:_0,LinearScale:w0,Selection:$n,Text:E0,Transformable:O0}=Yp,qo=class extends _s{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[eh.EXACT_SHAPE_MATCH,eh.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new ve,this._chartTopology=void 0,this.colorScale=new _0,this.sizeScale=new w0,this.datumSelection=$n.select(this.contentGroup,()=>this.nodeFactory()),this.labelSelection=$n.select(this.labelGroup,E0),this.highlightDatumSelection=$n.select(this.highlightGroup,()=>this.nodeFactory()),this._previousDatumMidPoint=void 0}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new Ui;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:s,colorScale:o}=this,{topologyIdKey:a,idKey:n,sizeKey:r,colorKey:l,labelKey:c,sizeDomain:h,colorRange:u}=this.properties,d=new Map;i?.features.forEach(b=>{const x=b.properties?.[a];x==null||!Wn(b.geometry,2)||d.set(x,b)});const g=this.sizeScale.type,y=this.colorScale.type,f=this.scale?.type,{dataModel:m,processedData:S}=await this.requestDataModel(e,t,{props:[ws(n,f,{id:"idValue",includeProperty:!1}),ws(n,f,{id:"featureValue",includeProperty:!1,processor:()=>b=>d.get(b)}),...c!=null?[ws(c,"category",{id:"labelValue"})]:[],...r!=null?[ws(r,g,{id:"sizeValue"})]:[],...l!=null?[ws(l,y,{id:"colorValue"})]:[]]}),D=m.resolveColumnById(this,"featureValue",S);if(this.topologyBounds=D.reduce((b,x)=>{const k=x?.geometry;return k==null?b:qi(k,b)},void 0),r!=null){const b=m.resolveProcessedDataIndexById(this,"sizeValue"),x=S.domain.values[b]??[];s.domain=h??x}if(u!=null&&this.isColorScaleValid()){const b=m.resolveProcessedDataIndexById(this,"colorValue");o.domain=S.domain.values[b],o.range=u,o.update()}i==null&&Up.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=R0(this,i.defs.values[s].missing);return!(o===0||o===a)}getLabelDatum(e,t,i,s){if(t==null||i==null)return;const o=Uo(i);if(o==null)return;const{idKey:a,idName:n,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:d,label:g}=this.properties;if(u==null||!g.enabled)return;const y=this.getLabelText(t,e,u,"label",[],g,{value:t,datum:e,idKey:a,idName:n,sizeKey:r,sizeName:l,colorKey:c,colorName:h,labelKey:u,labelName:d});if(y==null)return;const f=s.measureText(String(y)),m=$o(o);if(m==null)return;const[S,D]=m.point,{width:b,height:x}=f;return{point:{x:S,y:D,size:0},label:{width:b,height:x,text:y},anchor:void 0,placement:void 0}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:s,properties:o,scale:a}=this,{idKey:n,sizeKey:r,colorKey:l,labelKey:c,label:h,legendItemName:u}=o;if(t==null||i==null)return;const d=t.resolveColumnById(this,"idValue",i),g=t.resolveColumnById(this,"featureValue",i),y=c!=null?t.resolveColumnById(this,"labelValue",i):void 0,f=r!=null?t.resolveColumnById(this,"sizeValue",i):void 0,m=l!=null?t.resolveColumnById(this,"colorValue",i):void 0,S=o.maxStrokeWidth??o.strokeWidth;s.range=[Math.min(o.strokeWidth,S),S];const D=C0.getMeasurer({font:h}),b=new Map;i.dataSources.get(this.id)?.forEach((N,L)=>{const M=d[L],R=g[L]?.geometry??void 0,C=R!=null&&a!=null?Jt(R,a):void 0;M!=null&&C!=null&&b.set(M,C)});const x=[],k=[],I=[];(i.dataSources.get(this.id)??[]).forEach((N,L)=>{const M=d[L],R=m?.[L],C=f?.[L],w=y?.[L],T=b.get(M);T==null&&I.push(M);const _=this.getLabelDatum(N,w,T,D);_!=null&&k.push(_),x.push({series:this,itemId:n,datum:N,datumIndex:L,idValue:M,labelValue:w,colorValue:R,sizeValue:C,projectedGeometry:T,legendItemName:u})});const v=10;if(I.length>v){const N=I.length-v;I.length=v,I.push(`(+${N} more)`)}return I.length>0&&Up.warnOnce("some data items do not have matches in the provided topology",I),{itemId:e,nodeData:x,labelData:k}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,highlightDatumSelection:t}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;let i=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:s}=this.properties,o=s!=null&&i?.datum==null&&s===i?.legendItemName;i!=null&&(i.series!==this&&!o||i.datum==null)&&(i=void 0);const a=this.contextNodeData?.nodeData??[];this.datumSelection=this.updateDatumSelection({nodeData:a,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:i!=null?[i]:[],datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Qp(t.idValue))}getItemBaseStyle(e,t){const{properties:i}=this,s=this.getHighlightStyle(e,t?.datumIndex);return{stroke:s?.stroke??i.stroke,strokeWidth:s?.strokeWidth??i.strokeWidth,strokeOpacity:s?.strokeOpacity??i.strokeOpacity,lineDash:s?.lineDash??i.lineDash,lineDashOffset:s?.lineDashOffset??i.lineDashOffset,opacity:s?.opacity??1}}getItemStyleOverrides(e,t,i,s,o,a,n){const{id:r,properties:l,colorScale:c,sizeScale:h}=this,{colorRange:u,itemStyler:d}=l;let g;if(!a&&i!=null&&(g??(g={}),g.stroke=this.isColorScaleValid()?c.convert(i):u?.[0]??l.stroke),s!=null&&(g??(g={}),g.strokeWidth=h.convert(s,{clamp:!0})),d!=null){const y=this.cachedDatumCallback(Qp(e,a?"highlight":"node"),()=>{const f=this.ctx.highlightManager?.getActiveHighlight(),m=this.getHighlightStateString(f,a,n);return this.callWithContext(d,{seriesId:r,datum:t,highlighted:a,highlightState:m,...o,...g})});g??(g={}),Object.assign(g,y)}return g}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e;t.each((s,o)=>{const{datum:a,datumIndex:n,colorValue:r,sizeValue:l,projectedGeometry:c}=o;if(c==null){s.visible=!1,s.projectedGeometry=void 0;return}const h=this.getItemBaseStyle(i,o),u=this.getItemStyleOverrides(String(n),a,r,l,h,i,n);s.visible=!0,s.projectedGeometry=c,s.stroke=u?.stroke??h.stroke,s.strokeWidth=u?.strokeWidth??h.strokeWidth,s.strokeOpacity=u?.strokeOpacity??h.strokeOpacity,s.lineDash=u?.lineDash??h.lineDash,s.lineDashOffset=u?.lineDashOffset??h.lineDashOffset})}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=Yp.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){e.labelSelection.each((t,{x:i,y:s,width:o,height:a,text:n},r)=>{const l=P0(this,void 0,this.properties,this.properties.label),{color:c,fontStyle:h,fontWeight:u,fontSize:d,fontFamily:g}=l;t.visible=!0,t.x=i+o/2,t.y=s+a/2,t.text=n,t.fill=c,t.fontStyle=h,t.fontWeight=u,t.fontSize=d,t.fontFamily=g,t.textAlign="center",t.textBaseline="middle",t.fillOpacity=this.getHighlightStyle(!1,r).opacity??1,t.setBoxing(l)})}resetAnimation(){}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.datumSelection.each((o,a)=>{const n=o.distanceSquared(e,t);n<i&&(i=n,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,s=i!=null?Uo(i):void 0,o=s!=null?$o(s)?.point:void 0,a=o!=null?{x:o[0],y:o[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:a},a}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:s}=this,{strokeWidth:o,strokeOpacity:a,lineDash:n}=s;let{stroke:r}=s;if(e!=null&&this.isColorScaleValid()){const c=t.resolveColumnById(this,"colorValue",i)[e];r=this.colorScale.convert(c)}return{marker:{fill:void 0,fillOpacity:0,stroke:void 0,strokeWidth:0,strokeOpacity:0,lineDash:[0],lineDashOffset:0,enabled:!1},line:{stroke:r,strokeWidth:o,strokeOpacity:a,lineDash:n}}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:s,visible:o}=this,{title:a,legendItemName:n,idKey:r,idName:l,colorKey:c,colorRange:h,showInLegend:u}=this.properties;if(e==="gradient"&&c!=null&&h!=null){const d=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:s,series:this.getFormatterContext("color"),colorRange:h,colorDomain:d}]}else return e==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:o,label:{text:n??a??l??r},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!u}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o,ctx:{formatManager:a}}=this,{idKey:n,idName:r,colorKey:l,colorName:c,sizeKey:h,sizeName:u,labelKey:d,labelName:g,title:y,legendItemName:f,tooltip:m}=o;if(!i||!s)return;const S=s.dataSources.get(this.id)?.[e],D=i.resolveColumnById(this,"idValue",s),b=h!=null?i.resolveColumnById(this,"sizeValue",s)[e]:void 0,x=l!=null?i.resolveColumnById(this,"colorValue",s)[e]:void 0,k=[];if(this.isLabelEnabled()&&d!=null&&d!==n){const A=i.resolveColumnById(this,"labelValue",s)[e],v=a.format(this.callWithContext.bind(this),{type:"category",value:A,datum:S,seriesId:t,legendItemName:f,key:d,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});k.push({label:g,fallbackLabel:d,value:v??A})}if(b!=null&&h!=null){const A=i.getDomain(this,"sizeValue","value",s),v=a.format(this.callWithContext.bind(this),{type:"number",value:b,datum:S,seriesId:t,legendItemName:f,key:h,source:"tooltip",property:"size",domain:A,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});k.push({label:u,fallbackLabel:h,value:v??String(b)})}if(x!=null&&l!=null){const A=i.getDomain(this,"colorValue","value",s),v=a.format(this.callWithContext.bind(this),{type:"number",value:x,datum:S,seriesId:t,legendItemName:f,key:l,source:"tooltip",property:"color",domain:A,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});k.push({label:c,fallbackLabel:l,value:v??String(x)})}const I=this.getItemBaseStyle(!1);return Object.assign(I,this.getItemStyleOverrides(String(e),e,x,b,I,!1,e)),this.formatTooltipWithContext(m,{heading:D[e],title:y??f,symbol:this.legendItemSymbol(e),data:k},{seriesId:t,datum:S,title:y,idKey:n,idName:r,colorKey:l,colorName:c,sizeKey:h,sizeName:u,labelKey:d,labelName:g,...I})}computeFocusBounds(e){const t=Jp(this,e);return t?O0.toCanvas(this.contentGroup,t.getBBox()):void 0}hasItemStylers(){return this.properties.itemStyler!=null}};qo.className="MapLineSeries",qo.type="map-line";import{_ModuleSupport as F0}from"ag-charts-community";import{and as B0,arrayLength as G0,arrayOf as V0,color as K0,constant as W0,geoJson as z0,required as th,string as Mt,undocumented as H0}from"ag-charts-core";var{commonSeriesOptionsDefs:$0,mapLineSeriesThemeableOptionsDef:X0,without:Y0}=F0,ih={...Y0($0,["highlightStyle","highlight"]),...X0,type:th(W0("map-line")),idKey:th(Mt),sizeKey:Mt,colorKey:Mt,labelKey:Mt,idName:Mt,sizeName:Mt,colorName:Mt,labelName:Mt,topology:z0,topologyIdKey:Mt,legendItemName:Mt,title:Mt};ih.colorRange=H0(B0(V0(K0),G0(1)));var IP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",moduleFactory:e=>new qo(e),themeTemplate:{...Cs,series:{stroke:je(Ho.SAFE_STROKE_FILL_OPERATION),colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},je(Ho.SAFE_RANGE2_OPERATION)]},strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{...Ho.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:je(Ho.multiSeriesHighlightStyle(!1))},tooltip:{range:"exact"}}},sh={type:"series",name:"map-line",chartType:"topology",enterprise:!0,options:ih,create:e=>new qo(e)};import{_ModuleSupport as U0}from"ag-charts-community";import{Logger as q0}from"ag-charts-core";import{_ModuleSupport as j0}from"ag-charts-community";var{Property:xi,SeriesProperties:J0,makeSeriesTooltip:Z0}=j0,Zt=class extends J0{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=Z0()}};p([xi],Zt.prototype,"topology",2),p([xi],Zt.prototype,"stroke",2),p([xi],Zt.prototype,"strokeOpacity",2),p([xi],Zt.prototype,"strokeWidth",2),p([xi],Zt.prototype,"lineDash",2),p([xi],Zt.prototype,"lineDashOffset",2),p([xi],Zt.prototype,"tooltip",2);var{createDatumId:Q0,Group:ek,Selection:tk,PointerEvents:oh}=U0,jo=class extends _s{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[]}),this.properties=new Zt,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new ek({name:"itemGroup"})),this.datumSelection=tk.select(this.itemGroup,()=>this.nodeFactory()),this.itemGroup.pointerEvents=oh.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0}nodeFactory(){const e=new Ui;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e.pointerEvents=oh.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const s=i.geometry;return s==null?t:qi(s,t)},void 0),e==null&&q0.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i}=this;if(t==null)return;const s=[],o=[];return t.features.forEach((a,n)=>{const{geometry:r}=a,l=r!=null&&i!=null?Jt(r,i):void 0;l!=null&&s.push({series:this,itemId:n,datum:a,datumIndex:0,index:n,projectedGeometry:l})}),{itemId:e,nodeData:s,labelData:o}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Q0(t.index))}updateDatumNodes(e){const{properties:t}=this,{datumSelection:i}=e,{stroke:s,strokeOpacity:o,lineDash:a,lineDashOffset:n}=t,r=t.strokeWidth;i.each((l,c)=>{const{projectedGeometry:h}=c;if(h==null){l.visible=!1,l.projectedGeometry=void 0;return}l.visible=!0,l.projectedGeometry=h,l.stroke=s,l.strokeWidth=r,l.strokeOpacity=o,l.lineDash=a,l.lineDashOffset=n})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}computeFocusBounds(e){}hasItemStylers(){return!1}};jo.className="MapLineBackgroundSeries",jo.type="map-line-background";import{_ModuleSupport as ik}from"ag-charts-community";import{constant as sk,geoJson as ok,required as ak}from"ag-charts-core";var{mapLineBackgroundSeriesThemeableOptionsDef:nk}=ik,rk={...nk,type:ak(sk("map-line-background")),topology:ok},RP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",moduleFactory:e=>new jo(e),themeTemplate:{...Cs,series:{stroke:{$path:["/1",{$mapPalette:"stroke"},{$mapPalette:"secondHierarchyColors"}]},strokeWidth:1,lineDash:[0],lineDashOffset:0}}},ah={type:"series",name:"map-line-background",chartType:"topology",enterprise:!0,options:rk,create:e=>new jo(e)};import{_ModuleSupport as ji}from"ag-charts-community";import{ValidationError as lk,validate as ck}from"ag-charts-core";import{_ModuleSupport as nh}from"ag-charts-community";import{Logger as pk}from"ag-charts-core";var hk=void 0,uk=void 0;uk=hk;var dk=void 0,gk=void 0;gk=dk;var fk=void 0,yk=void 0;yk=fk;var mk=void 0,Sk=void 0;Sk=mk;import{insertListItemsSorted as xk}from"ag-charts-core";function rh(e,t,i){const s=Si(e[0],void 0);if(s==null)return;const o=(s.lon0+s.lon1)/2,a=(s.lat0+s.lat1)/2,n=Math.abs(s.lon1-s.lon0),r=Math.abs(s.lat1-s.lat0),l=y0(e[0]),[c,h]=l,u=-Xo(e,c,h);let d;const g=(k,I)=>{const v=Math.max(I-u,0);return k-.5*v},y=(k,I,A)=>{const{distance:v,maxDistance:N}=i(e,k,I,A),L=Math.hypot(c-k,h-I),M=Math.min(Math.max(c,k-A/2),k+A/2),R=Math.min(Math.max(h,I-A/2),I+A/2),C=Math.hypot(c-M,h-R),w=g(v,L),T=g(N,C);return{distance:v,maxDistance:N,value:w,maxValue:T,x:k,y:I,stride:A}},f=(k,I,A,v)=>{const N=y(I,A,v);N.maxDistance>=0&&k.push(N)},m=Math.min(n,r)/2;let S={value:y(o,a,m),next:null};for(;S!=null;){const k=S.value,{distance:I,value:A,maxValue:v,x:N,y:L,stride:M}=k;if(S=S.next,I>0&&(d==null||A>d.value)&&(d=k),d!=null&&v-d.value<=t)continue;const R=M/2,C=[];f(C,N-R,L-R,R),f(C,N+R,L-R,R),f(C,N-R,L+R,R),f(C,N+R,L+R,R),C.sort(lh),S=xk(S,C,lh)}if(d==null)return;const{distance:D,x:b,y:x}=d;return{x:b,y:x,distance:D}}var lh=(e,t)=>t.maxValue-e.maxValue;function Xn(e,t){const i=rh(e,t,(a,n,r,l)=>{const c=-Xo(a,n,r),h=c+l*Math.SQRT2;return{distance:c,maxDistance:h}});if(i==null)return;const{x:s,y:o}=i;return[s,o]}function ch(e,t){let i;switch(e.type){case"GeometryCollection":return e.geometries.flatMap(s=>ch(s,t));case"MultiPoint":return e.coordinates;case"Point":return[e.coordinates];case"MultiPolygon":{const s=Yo(e);i=s!=null?Xn(s,t):void 0;break}case"Polygon":{const s=e.coordinates;i=s!=null?Xn(s,t):void 0;break}case"MultiLineString":{const s=Uo(e);i=s!=null?$o(s)?.point:void 0;break}case"LineString":{const s=e.coordinates;i=$o(s)?.point;break}}return i!=null?[i]:[]}import{_ModuleSupport as bk}from"ag-charts-community";var{BBox:Dk}=bk;function ph(e){if(!e)return;const{range:t}=e,i=t[0][0],s=t[0][1],o=t[1][0]-i,a=t[1][1]-s,n=new Dk(i,s,o,a);return{series:n,axis:n}}import{_ModuleSupport as vk}from"ag-charts-community";var{FillGradientDefaults:kk,FillPatternDefaults:Ik,FillImageDefaults:Ak,Property:ae,SeriesProperties:Mk,makeSeriesTooltip:Nk,Label:Lk}=vk,hh=class extends Lk{constructor(){super(...arguments),this.placement="bottom"}};p([ae],hh.prototype,"placement",2);var ne=class extends Mk{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape="circle",this.size=6,this.fill="black",this.fillGradientDefaults=new kk,this.fillPatternDefaults=new Ik,this.fillImageDefaults=new Ak,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.label=new hh,this.tooltip=Nk()}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:s,stroke:o,strokeWidth:a,strokeOpacity:n,lineDash:r,lineDashOffset:l}=this;return{size:e,shape:t,fill:i,fillOpacity:s,opacity:1,stroke:o,strokeWidth:a,strokeOpacity:n,lineDash:r,lineDashOffset:l}}};p([ae],ne.prototype,"topology",2),p([ae],ne.prototype,"title",2),p([ae],ne.prototype,"legendItemName",2),p([ae],ne.prototype,"idKey",2),p([ae],ne.prototype,"topologyIdKey",2),p([ae],ne.prototype,"idName",2),p([ae],ne.prototype,"latitudeKey",2),p([ae],ne.prototype,"latitudeName",2),p([ae],ne.prototype,"longitudeKey",2),p([ae],ne.prototype,"longitudeName",2),p([ae],ne.prototype,"labelKey",2),p([ae],ne.prototype,"labelName",2),p([ae],ne.prototype,"sizeKey",2),p([ae],ne.prototype,"sizeName",2),p([ae],ne.prototype,"colorKey",2),p([ae],ne.prototype,"colorName",2),p([ae],ne.prototype,"colorRange",2),p([ae],ne.prototype,"shape",2),p([ae],ne.prototype,"size",2),p([ae],ne.prototype,"maxSize",2),p([ae],ne.prototype,"sizeDomain",2),p([ae],ne.prototype,"fill",2),p([ae],ne.prototype,"fillGradientDefaults",2),p([ae],ne.prototype,"fillPatternDefaults",2),p([ae],ne.prototype,"fillImageDefaults",2),p([ae],ne.prototype,"fillOpacity",2),p([ae],ne.prototype,"stroke",2),p([ae],ne.prototype,"strokeWidth",2),p([ae],ne.prototype,"strokeOpacity",2),p([ae],ne.prototype,"lineDash",2),p([ae],ne.prototype,"lineDashOffset",2),p([ae],ne.prototype,"itemStyler",2),p([ae],ne.prototype,"label",2),p([ae],ne.prototype,"tooltip",2);var{CachedTextMeasurerPool:Tk,fromToMotion:Rk,StateMachine:Pk,getMissCount:Ck,createDatumId:uh,SeriesNodePickMode:dh,valueProperty:bi,computeMarkerFocusBounds:_k,ColorScale:wk,LinearScale:Ek,Group:Ok,Selection:Yn,Text:Fk,Marker:Un,applyShapeStyle:Bk,getShapeStyle:qn,getLabelStyles:Gk,LonLatBBox:Vk,mergeDefaults:gh}=nh,Jo=class extends _s{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{size:["colorKey"],color:["colorKey"],label:["labelKey"]},propertyNames:{size:["sizeName"],color:["colorName"],label:["labelName"]},pickModes:[dh.EXACT_SHAPE_MATCH,dh.NEAREST_NODE],usesPlacedLabels:!0}),this.properties=new ne,this._chartTopology=void 0,this.colorScale=new wk,this.sizeScale=new Ek,this.markerGroup=this.contentGroup.appendChild(new Ok({name:"markerGroup"})),this.labelSelection=Yn.select(this.labelGroup,Fk,!1),this.markerSelection=Yn.select(this.markerGroup,Un,!1),this.highlightMarkerSelection=Yn.select(this.highlightGroup,Un),this.animationState=new Pk("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},resize:{target:"ready",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){const e=this.properties.latitudeKey!=null&&this.properties.longitudeKey!=null;return super.hasData&&(this.topology!=null||e)}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[3,e],this.highlightGroup.zIndex=[4,e],!0}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}async processData(e){if(this.data==null)return;const{data:t,topology:i,sizeScale:s,colorScale:o}=this,{topologyIdKey:a,idKey:n,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:u,sizeDomain:d,colorRange:g}=this.properties,y=new Map;i?.features.forEach(v=>{const N=v.properties?.[a];N!=null&&y.set(N,v)});const f=this.sizeScale.type,m=this.colorScale.type,S=this.scale?.type,D=r!=null&&l!=null,{dataModel:b,processedData:x}=await this.requestDataModel(e,t,{props:[...n!=null?[bi(n,S,{id:"idValue",includeProperty:!1}),bi(n,S,{id:"featureValue",includeProperty:!1,processor:()=>v=>y.get(v)})]:[],...D?[bi(r,S,{id:"latValue"}),bi(l,S,{id:"lonValue"})]:[],...u?[bi(u,"category",{id:"labelValue"})]:[],...c?[bi(c,f,{id:"sizeValue"})]:[],...h?[bi(h,m,{id:"colorValue"})]:[]]}),k=n!=null?b.resolveColumnById(this,"featureValue",x):void 0,I=D?b.resolveColumnById(this,"latValue",x):void 0,A=D?b.resolveColumnById(this,"lonValue",x):void 0;if(this.topologyBounds=x.dataSources.get(this.id)?.reduce((v,N,L)=>{const R=k?.[L]?.geometry;if(R!=null&&(v=qi(R,v)),I!=null&&A!=null){const C=A[L],w=I[L];v=Vk.extend(v,C,w,C,w)}return v},void 0),c!=null){const v=b.resolveProcessedDataIndexById(this,"sizeValue"),N=x.domain.values[v]??[];s.domain=d??N}if(g!=null&&this.isColorScaleValid()){const v=b.resolveProcessedDataIndexById(this,"colorValue");o.domain=x.domain.values[v],o.range=g,o.update()}this.animationState.transition("updateData")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=Ck(this,i.defs.values[s].missing);return!(o===0||o===a)}getLabelDatum(e,t,i,s,o,a){if(t==null)return;const{idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:d,sizeName:g,colorKey:y,colorName:f,labelKey:m,labelName:S,label:D,shape:b}=this.properties;if(m==null||!D.enabled)return;const{placement:x}=D,k=this.getLabelText(t,e,m,"label",[],D,{value:t,datum:e,idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,sizeKey:d,sizeName:g,colorKey:y,colorName:f,labelKey:m,labelName:S});if(k==null)return;const{width:I,height:A}=a.measureText(String(k)),v=Un.anchor(b);return{point:{x:i,y:s,size:o},label:{width:I,height:A,text:k},anchor:v,placement:x}}createNodeData(){const{id:e,dataModel:t,processedData:i,sizeScale:s,properties:o,scale:a}=this,{idKey:n,latitudeKey:r,longitudeKey:l,sizeKey:c,colorKey:h,labelKey:u,label:d,legendItemName:g}=o;if(t==null||i==null||a==null)return;const y=r!=null&&l!=null,f=n!=null?t.resolveColumnById(this,"idValue",i):void 0,m=n!=null?t.resolveColumnById(this,"featureValue",i):void 0,S=y?t.resolveColumnById(this,"latValue",i):void 0,D=y?t.resolveColumnById(this,"lonValue",i):void 0,b=u!=null?t.resolveColumnById(this,"labelValue",i):void 0,x=c!=null?t.resolveColumnById(this,"sizeValue",i):void 0,k=h!=null?t.resolveColumnById(this,"colorValue",i):void 0,I=o.maxSize??o.size;s.range=[Math.min(o.size,I),I];const A=Tk.getMeasurer({font:d});let v;f!=null&&m!=null&&(v=new Map,i.dataSources.get(this.id)?.forEach((w,T)=>{const _=f[T],P=m[T]?.geometry??void 0,O=P!=null&&a!=null?Jt(P,a):void 0;_!=null&&O!=null&&v.set(_,O)}));const N=[],L=[],M=[];(i.dataSources.get(this.id)??[]).forEach((w,T)=>{const _=f?.[T],P=D?.[T],O=S?.[T],E=k?.[T],F=x?.[T],B=b?.[T],G=F!=null?s.convert(F,{clamp:!0}):o.size,V=_!=null?v?.get(_):void 0;if(_!=null&&Jt==null&&M.push(_),P!=null&&O!=null){const[K,W]=a.convert([P,O]),$=this.getLabelDatum(w,B,K,W,G,A);$&&L.push($),N.push({series:this,itemId:r,datum:w,datumIndex:T,index:-1,idValue:_,lonValue:P,latValue:O,labelValue:B,sizeValue:F,colorValue:E,point:{x:K,y:W,size:G},midPoint:{x:K,y:W},legendItemName:g})}else V!=null&&ch(V,1).forEach(([K,W],$)=>{const X=this.getLabelDatum(w,B,K,W,G,A);X&&L.push(X),N.push({series:this,itemId:r,datum:w,datumIndex:T,index:$,idValue:_,lonValue:P,latValue:O,labelValue:B,sizeValue:F,colorValue:E,point:{x:K,y:W,size:G},midPoint:{x:K,y:W},legendItemName:g})})});const C=10;if(M.length>C){const w=M.length-C;M.length=C,M.push(`(+${w} more)`)}return M.length>0&&pk.warnOnce("some data items do not have matches in the provided topology",M),{itemId:e,nodeData:N,labelData:L}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}checkScaleChange(){return this.previousScale===this.scale?!1:(this.previousScale=this.scale,!0)}update({seriesRect:e}){const t=this.checkResize(e),i=this.checkScaleChange(),{markerSelection:s,highlightMarkerSelection:o}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;let a=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:n}=this.properties,r=n!=null&&a?.datum==null&&n===a?.legendItemName;a!=null&&(a.series!==this&&!r||a.datum==null)&&(a=void 0);const l=this.contextNodeData?.nodeData??[];this.markerSelection=this.updateMarkerSelection({markerData:l,markerSelection:s}),this.updateMarkerNodes({markerSelection:s,isHighlight:!1,highlightedDatum:a}),this.highlightMarkerSelection=this.updateMarkerSelection({markerData:a!=null?[a]:[],markerSelection:o}),this.updateMarkerNodes({markerSelection:o,isHighlight:!0,highlightedDatum:a}),(i||t)&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePlacedLabelData(e){this.labelSelection=this.labelSelection.update(e,t=>{t.pointerEvents=nh.PointerEvents.None}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){e.labelSelection.each((t,{x:i,y:s,width:o,height:a,text:n},r)=>{const l=Gk(this,void 0,this.properties,this.properties.label),{color:c,fontStyle:h,fontWeight:u,fontSize:d,fontFamily:g}=l;t.visible=!0,t.x=i+o/2,t.y=s+a/2,t.text=n,t.fill=c,t.fontStyle=h,t.fontWeight=u,t.fontSize=d,t.fontFamily=g,t.textAlign="center",t.textBaseline="middle",t.fillOpacity=this.getHighlightStyle(!1,r).opacity??1,t.setBoxing(l)})}updateMarkerSelection(e){const{markerData:t,markerSelection:i}=e;return i.update(t,void 0,s=>uh([s.index,s.idValue,s.lonValue,s.latValue]))}getMarkerItemStyle({datumIndex:e,datum:t,colorValue:i,sizeValue:s},o){const{id:a,properties:n,colorScale:r,sizeScale:l}=this,{colorRange:c,itemStyler:h,fillGradientDefaults:u,fillPatternDefaults:d,fillImageDefaults:g}=n,y=this.getHighlightStyle(o,e),f=gh(y,n.getStyle());!o&&i!=null&&(f.fill=this.isColorScaleValid()?r.convert(i):c?.[0]??f.fill),s!=null&&(f.size=l.convert(s,{clamp:!0}));let m=qn(f,u,d,g);if(h!=null&&e!=null){const S=this.cachedDatumCallback(uh(e,o?"highlight":"node"),()=>{const D=this.ctx.highlightManager?.getActiveHighlight(),b=this.getHighlightStateString(D,o,e);return this.callWithContext(h,{seriesId:a,datum:t,highlighted:o,highlightState:b,...m})});S&&(m=qn(gh(S,f),u,d,g))}return m}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i,highlightedDatum:s}=e,o=ph(this.scale);t.each((a,n)=>{const{datum:r,point:l}=n,c=this.getMarkerItemStyle(n,i);a.shape=c.shape,a.size=c.size,Bk(a,c,o),a.x=l.x,a.y=l.y,a.scalingCenterX=l.x,a.scalingCenterY=l.y,a.zIndex=!i&&s!=null&&r===s.datum?1:0})}isProcessedDataAnimatable(){return!0}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:e}=this.ctx,t=A0();Rk(this.id,"markers",e,[this.markerSelection,this.highlightMarkerSelection],t)}getLabelData(){return this.isLabelEnabled()?this.contextNodeData?.labelData??[]:[]}pickNodeClosestDatum(e){const{x:t,y:i}=e;let s=1/0,o;return this.contextNodeData?.nodeData.forEach(a=>{const{x:n,y:r,size:l}=a.point,c=Math.max(Math.abs(n-t)-l,0),h=Math.max(Math.abs(r-i)-l,0),u=c*c+h*h;u<s&&(s=u,o=a)}),o!=null?{datum:o,distance:Math.sqrt(s)}:void 0}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:s}=this,{shape:o,fillOpacity:a,stroke:n,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:h}=s;let{fill:u}=s;if(e!=null&&this.isColorScaleValid()){const g=t.resolveColumnById(this,"colorValue",i)[e];u=this.colorScale.convert(g)}return{marker:qn({shape:o,fill:u,fillOpacity:a,stroke:n,strokeWidth:r,strokeOpacity:l,lineDash:c,lineDashOffset:h},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:s,visible:o}=this,{title:a,legendItemName:n,idName:r,idKey:l,colorKey:c,colorRange:h,showInLegend:u}=this.properties;if(e==="gradient"&&c!=null&&h!=null){const d=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:s,series:this.getFormatterContext("color"),colorRange:h,colorDomain:d}]}else return e==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:o,label:{text:n??a??r??l??s},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!u}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o,ctx:{formatManager:a}}=this,{idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,colorKey:d,colorName:g,sizeKey:y,sizeName:f,labelKey:m,labelName:S,title:D,legendItemName:b,tooltip:x}=o;if(!i||!s)return;const k=s.dataSources.get(this.id)?.[e],I=y!=null?i.resolveColumnById(this,"sizeValue",s)[e]:void 0,A=d!=null?i.resolveColumnById(this,"colorValue",s)[e]:void 0,v=[];if(this.isLabelEnabled()&&m!=null&&m!==n){const M=i.resolveColumnById(this,"labelValue",s)[e],R=a.format(this.callWithContext.bind(this),{type:"category",value:M,datum:k,seriesId:t,legendItemName:b,key:m,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});v.push({label:S,fallbackLabel:m,value:R??M})}if(y!=null&&I!=null){const M=i.getDomain(this,"sizeValue","value",s),R=a.format(this.callWithContext.bind(this),{type:"number",value:I,datum:k,seriesId:t,legendItemName:b,key:y,source:"tooltip",property:"size",domain:M,boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});v.push({label:f,fallbackLabel:y,value:R??String(I)})}if(d!=null&&A!=null){const M=i.getDomain(this,"colorValue","value",s),R=a.format(this.callWithContext.bind(this),{type:"number",value:A,datum:k,seriesId:t,legendItemName:b,key:d,source:"tooltip",property:"color",domain:M,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});v.push({label:g,fallbackLabel:d,value:R??String(A)})}let N;if(n!=null)N=i.resolveColumnById(this,"idValue",s)[e];else if(l!=null&&h!=null){const M=i.resolveColumnById(this,"latValue",s)[e],R=i.resolveColumnById(this,"lonValue",s)[e];N=`${Math.abs(M).toFixed(4)}\xB0 ${M>=0?"N":"S"}, ${Math.abs(R).toFixed(4)}\xB0 ${R>=0?"W":"E"}`}const L=this.getMarkerItemStyle({datumIndex:e,datum:k,colorValue:A,sizeValue:I},!1);return this.formatTooltipWithContext(x,{heading:N,title:D??b,symbol:this.legendItemSymbol(e),data:v},{seriesId:t,datum:k,title:D,idKey:n,idName:r,latitudeKey:l,latitudeName:c,longitudeKey:h,longitudeName:u,colorKey:d,colorName:g,sizeKey:y,sizeName:f,labelKey:m,labelName:S,...L})}getFormattedMarkerStyle(e){const t=this.getMarkerItemStyle(e,!1);return{size:t.size,shape:t.shape}}computeFocusBounds(e){return _k(this,e)}hasItemStylers(){return this.properties.itemStyler!=null}};Jo.className="MapMarkerSeries",Jo.type="map-marker";import{_ModuleSupport as Kk}from"ag-charts-community";import{constant as Wk,geoJson as zk,required as Hk,string as et}from"ag-charts-core";var{commonSeriesOptionsDefs:$k,mapMarkerSeriesThemeableOptionsDef:Xk,without:Yk}=Kk,Uk={...Yk($k,["highlightStyle","highlight"]),...Xk,type:Hk(Wk("map-marker")),idKey:et,latitudeKey:et,longitudeKey:et,sizeKey:et,colorKey:et,labelKey:et,idName:et,latitudeName:et,longitudeName:et,sizeName:et,colorName:et,labelName:et,topology:zk,topologyIdKey:et,legendItemName:et,title:et},VP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",moduleFactory:e=>new Jo(e),themeTemplate:{...Cs,series:{shape:"circle",maxSize:30,fill:{$mapPalette:"fill"},stroke:{$mapPalette:"stroke"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},je(ji.SAFE_RANGE2_OPERATION)]},fillGradientDefaults:je(ji.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS),fillPatternDefaults:je(ji.FILL_PATTERN_DEFAULTS),fillImageDefaults:je(ji.FILL_IMAGE_DEFAULTS),fillOpacity:.5,label:{...ji.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:je(ji.multiSeriesHighlightStyle())},tooltip:{range:"exact"}}},fh={type:"series",name:"map-marker",chartType:"topology",enterprise:!0,options:Uk,create:e=>new Jo(e),validate(e,t,i){const s=ck(e,t,i),{cleared:o,invalid:a}=s;if(o?.idKey==null&&(o?.latitudeKey==null||o?.longitudeKey==null)){const n=l=>i?`${i}.${l}`:l,r=`Either \`${n("idKey")}\` or both \`${n("latitudeKey")}\` and \`${n("longitudeKey")}\` are required.`;a.push(new lk("required",r,null,i))}return s}};import{_ModuleSupport as Ji}from"ag-charts-community";import{_ModuleSupport as yh}from"ag-charts-community";import{Logger as mh}from"ag-charts-core";function qk(e,{aspectRatio:t,precision:i}){const s=rh(e,i,(l,c,h,u)=>{const d=Jk(l,c,h,t),g=d+2*u*t,y=d*Math.SQRT2,f=g*Math.SQRT2;return{distance:y,maxDistance:f}});if(s==null)return;const{x:o,y:a,distance:n}=s,r=n/Math.SQRT2;return{x:o,y:a,maxWidth:r}}function jk(e,t,i,s,o){const[a,n]=e,[r,l]=t,c=1/o,h=r-a,u=l-n,[d,g]=n<=l?e:t,[y,f]=a<=r?e:t,[m,S]=n<=l?t:e,[D,b]=a<=r?t:e;let x=1/0;if(h!==0){const L=u/h;for(let M=0;M<=1;M+=1){const R=M===0?c:-c,C=(L*a-n-R*i+s)/(L-R);if(C>=y&&C<=D){const w=Math.abs(i-C)*2;x=Math.min(x,w)}}}else for(let L=0;L<=1;L+=1){const R=(L===0?c:-c)*(a-i)+s;if(R>=g&&R<=S){const w=Math.abs(s-R)*2*o;x=Math.min(x,w)}}const k=o,I=Math.abs((d-i)/(g-s)),A=Math.abs((m-i)/(S-s));if(S<s&&A<k){const M=Math.abs(s-S)*2*o;x=Math.min(x,M)}else if(g>s&&I<k){const M=Math.abs(s-g)*2*o;x=Math.min(x,M)}const v=Math.abs((f-s)/(y-i)),N=Math.abs((b-s)/(D-i));if(D<i&&N<c){const L=Math.abs(i-D)*2;x=Math.min(x,L)}else if(y>i&&v<c){const L=Math.abs(i-y)*2;x=Math.min(x,L)}return x}function Jk(e,t,i,s){let o=!1,a=1/0;for(const n of e){let r=n[n.length-1],[l,c]=r;for(const h of n){const[u,d]=h;d>i!=c>i&&t<(l-u)*(i-d)/(c-d)+u&&(o=!o);const g=jk(r,h,t,i,s);a=Math.min(a,g),r=h,l=u,c=d}}return(o?1:-1)*a}function Zo(e,t,i){i>=t&&(e.maxX=Math.min(e.maxX,i-t)),i<=t&&(e.minX=Math.max(e.minX,i-t))}function Zk(e,t,i,s,o,a){const n=o-a/2,r=o+a/2,[l,c]=t,[h,u]=i,d=h-l,g=u-c,[y,f]=l<=h?t:i,[m,S]=l<=h?i:t;if(d!==0){const D=g/d;for(let b=0;b<=1;b+=1){const k=((b===0?n:r)-c)/D+l;k>=y&&k<=m&&Zo(e,s,k)}}else Math.max(n,Math.min(c,u))<=Math.min(r,Math.max(c,u))&&Zo(e,s,l);return m<s&&S>=n&&S<=r?Zo(e,s,m):y>s&&f>=n&&f<=r&&Zo(e,s,y),e}function Qk(e,t,i,s){const o={minX:-1/0,maxX:1/0};for(const r of e){let l=r[r.length-1];for(const c of r)Zk(o,l,c,t,i,s),l=c}const{minX:a,maxX:n}=o;return Number.isFinite(a)&&Number.isFinite(n)?{x:t+(a+n)/2,width:n-a}:{x:t,width:0}}import{_ModuleSupport as eI}from"ag-charts-community";var{Property:me,SeriesProperties:tI,makeSeriesTooltip:iI,FillGradientDefaults:sI,FillPatternDefaults:oI,FillImageDefaults:aI}=eI,ge=class extends tI{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillGradientDefaults=new sI,this.fillPatternDefaults=new oI,this.fillImageDefaults=new aI,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new Ds,this.tooltip=iI()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,opacity:1}}};p([me],ge.prototype,"topology",2),p([me],ge.prototype,"title",2),p([me],ge.prototype,"legendItemName",2),p([me],ge.prototype,"idKey",2),p([me],ge.prototype,"idName",2),p([me],ge.prototype,"topologyIdKey",2),p([me],ge.prototype,"labelKey",2),p([me],ge.prototype,"labelName",2),p([me],ge.prototype,"colorKey",2),p([me],ge.prototype,"colorName",2),p([me],ge.prototype,"colorRange",2),p([me],ge.prototype,"fill",2),p([me],ge.prototype,"fillGradientDefaults",2),p([me],ge.prototype,"fillPatternDefaults",2),p([me],ge.prototype,"fillImageDefaults",2),p([me],ge.prototype,"fillOpacity",2),p([me],ge.prototype,"stroke",2),p([me],ge.prototype,"strokeOpacity",2),p([me],ge.prototype,"strokeWidth",2),p([me],ge.prototype,"lineDash",2),p([me],ge.prototype,"lineDashOffset",2),p([me],ge.prototype,"padding",2),p([me],ge.prototype,"itemStyler",2),p([me],ge.prototype,"label",2),p([me],ge.prototype,"tooltip",2);var{getMissCount:nI,createDatumId:Sh,SeriesNodePickMode:xh,valueProperty:Qo,CachedTextMeasurerPool:rI,TextUtils:bh,ColorScale:lI,Group:Dh,Selection:jn,Text:cI,PointerEvents:pI,applyShapeStyle:hI,getShapeStyle:Jn,getLabelStyles:uI,mergeDefaults:vh}=yh,kh=yh.MercatorScale.fixedScale(),ea=class extends _s{constructor(e){super({moduleCtx:e,categoryKey:void 0,propertyKeys:{color:["colorKey"],label:["labelKey"]},propertyNames:{color:["colorName"],label:["labelName"]},pickModes:[xh.EXACT_SHAPE_MATCH,xh.NEAREST_NODE]}),this.properties=new ge,this._chartTopology=void 0,this.colorScale=new lI,this.itemGroup=this.contentGroup.appendChild(new Dh({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Dh({name:"itemLabelGroup"})),this.datumSelection=jn.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=jn.select(this.itemLabelGroup,cI),this.highlightDatumSelection=jn.select(this.highlightGroup,()=>this.nodeFactory()),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=pI.None}getNodeData(){return this.contextNodeData?.nodeData}get topology(){return this.properties.topology??this._chartTopology}get hasData(){return super.hasData&&this.topology!=null}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[1,e],this.highlightGroup.zIndex=[2,e],!0}isLabelEnabled(){return this.properties.labelKey!=null&&this.properties.label.enabled}nodeFactory(){const e=new Ui;return e.renderMode=1,e.lineJoin="round",e}async processData(e){if(this.data==null)return;const{data:t,topology:i,colorScale:s}=this,{topologyIdKey:o,idKey:a,colorKey:n,labelKey:r,colorRange:l}=this.properties,c=new Map;i?.features.forEach(f=>{const m=f.properties?.[o];m==null||!Wn(f.geometry,1)||c.set(m,f)});const h=this.colorScale.type,u=this.scale?.type,{dataModel:d,processedData:g}=await this.requestDataModel(e,t,{props:[Qo(a,u,{id:"idValue",includeProperty:!1}),Qo(a,u,{id:"featureValue",includeProperty:!1,processor:()=>f=>c.get(f)}),...r?[Qo(r,"category",{id:"labelValue"})]:[],...n?[Qo(n,h,{id:"colorValue"})]:[]]}),y=d.resolveColumnById(this,"featureValue",g);if(this.topologyBounds=y.reduce((f,m)=>{const S=m?.geometry;return S==null?f:qi(S,f)},void 0),l!=null&&this.isColorScaleValid()){const f=d.resolveProcessedDataIndexById(this,"colorValue");s.domain=g.domain.values[f],s.range=l,s.update()}i==null&&mh.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const s=t.resolveProcessedDataIndexById(this,"colorValue"),o=i.input.count,a=nI(this,i.defs.values[s].missing);return!(o===0||o===a)}getLabelLayout(e,t,i,s,o){if(t==null||s==null)return;const{idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:h,padding:u,label:d}=this.properties;if(c==null||!d.enabled)return;const g=this.getLabelText(t,e,c,"label",[],d,{value:t,datum:e,idKey:a,idName:n,colorKey:r,colorName:l,labelKey:c,labelName:h});if(g==null)return;const y=i.measureText(String(g)),f=g.split(`
`).length,m=(y.width+2*u)/(f*bh.getLineHeight(d.fontSize)+2*u);if(o?.geometry===s&&o?.labelText===g&&o?.aspectRatio===m)return o;const S=Jt(s,kh),D=Yo(S);if(D==null)return;const b=qk(D,{aspectRatio:m,precision:.001});if(b==null)return;const{x,y:k,maxWidth:I}=b;return{geometry:s,labelText:g,aspectRatio:m,x,y:k,maxWidth:I,fixedPolygon:D}}getLabelDatum(e,t){const{scale:i}=this;if(i==null)return;const{padding:s,label:o}=this.properties,{labelText:a,aspectRatio:n,x:r,y:l,maxWidth:c,fixedPolygon:h}=e,u={width:Math.ceil(c*t),height:Math.ceil(c*t/n),meta:r},d=xs(a,o,{padding:s},(x,k)=>{if(!k)return u;const I=Qk(h,r,l,x/t);return{width:I.width*t,height:x,meta:I.x}});if(d==null)return;const[{text:g,fontSize:y,lineHeight:f,width:m},S]=d;if(g===bh.EllipsisChar)return;const D=m<u.width?r:S,b=this.scale.convert(kh.invert([D,l]));return{x:b[0],y:b[1],text:g,fontSize:y,lineHeight:f}}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:s,scale:o,previousLabelLayouts:a}=this,{idKey:n,colorKey:r,labelKey:l,label:c,legendItemName:h}=s;if(t==null||i==null)return;const u=o!=null?(o.range[1][0]-o.range[0][0])/o.bounds.width:NaN,d=t.resolveColumnById(this,"idValue",i),g=t.resolveColumnById(this,"featureValue",i),y=l!=null?t.resolveColumnById(this,"labelValue",i):void 0,f=r!=null?t.resolveColumnById(this,"colorValue",i):void 0,m=rI.getMeasurer({font:c}),S=new Map;this.previousLabelLayouts=S;const D=[],b=[],x=[];(i.dataSources.get(this.id)??[]).forEach((A,v)=>{const N=d[v],L=f?.[v],M=y?.[v],R=g[v]?.geometry??void 0;R==null&&x.push(N);const C=this.getLabelLayout(A,M,m,R,a?.get(N));C!=null&&S.set(N,C);const w=C!=null&&o!=null?this.getLabelDatum(C,u):void 0;w!=null&&b.push(w);const T=R!=null&&o!=null?Jt(R,o):void 0;D.push({series:this,itemId:n,datum:A,datumIndex:v,idValue:N,colorValue:L,labelValue:M,projectedGeometry:T,legendItemName:h})});const I=10;if(x.length>I){const A=x.length-I;x.length=I,x.push(`(+${A} more)`)}return x.length>0&&mh.warnOnce("some data items do not have matches in the provided topology",x),{itemId:e,nodeData:D,labelData:b}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e,labelSelection:t,highlightDatumSelection:i}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;let s=this.ctx.highlightManager?.getActiveHighlight();const{legendItemName:o}=this.properties,a=o!=null&&s?.datum==null&&o===s?.legendItemName;s!=null&&(s.series!==this&&!a||s.datum==null)&&(s=void 0);const n=this.contextNodeData?.nodeData??[],r=this.contextNodeData?.labelData??[];this.datumSelection=this.updateDatumSelection({nodeData:n,datumSelection:e}),this.updateDatumNodes({datumSelection:e,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:t}),this.updateLabelNodes({labelSelection:t}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:s!=null?[s]:[],datumSelection:i}),this.updateDatumNodes({datumSelection:i,isHighlight:!0})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Sh(t.idValue))}getItemStyle({datumIndex:e,datum:t,colorValue:i},s){const{id:o,properties:a,colorScale:n}=this,{colorRange:r,itemStyler:l}=a,c=this.getHighlightStyle(s,e),h=vh(c,a.getStyle());!s&&i!=null&&(h.fill=this.isColorScaleValid()?n.convert(i):r?.[0]??h.fill);let u=Jn(h,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);if(l!=null&&e!=null){const d=this.cachedDatumCallback(Sh(e,s?"highlight":"node"),()=>{const g=this.ctx.highlightManager?.getActiveHighlight(),y=this.getHighlightStateString(g,s,e);return this.callWithContext(l,{seriesId:o,datum:t,highlighted:s,highlightState:y,...u})});d&&(u=Jn(vh(d,u),this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults))}return u}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,s=ph(this.scale);t.each((o,a)=>{const{projectedGeometry:n}=a;if(n==null){o.visible=!1,o.projectedGeometry=void 0;return}const r=this.getItemStyle(a,i);o.visible=!0,o.projectedGeometry=n,hI(o,r,s)})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){e.labelSelection.each((t,{x:i,y:s,text:o,fontSize:a,lineHeight:n},r)=>{const l=uI(this,void 0,this.properties,this.properties.label),{color:c,fontStyle:h,fontWeight:u,fontFamily:d}=l;t.visible=!0,t.x=i,t.y=s,t.text=o,t.fill=c,t.fontStyle=h,t.fontWeight=u,t.fontSize=a,t.lineHeight=n,t.fontFamily=d,t.textAlign="center",t.textBaseline="middle",t.fillOpacity=this.getHighlightStyle(!1,r).opacity??1,t.setBoxing(l)})}resetAnimation(){}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.datumSelection.each((o,a)=>{const n=o.distanceSquared(e,t);n<i&&(i=n,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if(t?.datum===e)return t.point;const i=e.projectedGeometry,s=i!=null?Yo(i):void 0,o=s!=null?Xn(s,2):void 0,a=o!=null?{x:o[0],y:o[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:a},a}legendItemSymbol(e){const{dataModel:t,processedData:i,properties:s}=this,{fillOpacity:o,stroke:a,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:c}=s;let{fill:h}=s;if(e!=null&&this.isColorScaleValid()){const d=t.resolveColumnById(this,"colorValue",i)[e];h=this.colorScale.convert(d)}return{marker:Jn({fill:h,fillOpacity:o,stroke:a,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:c},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(e){const{processedData:t,dataModel:i}=this;if(t==null||i==null)return[];const{id:s,visible:o}=this,{title:a,legendItemName:n,idKey:r,idName:l,colorKey:c,colorRange:h,showInLegend:u}=this.properties;if(e==="gradient"&&c!=null&&h!=null){const d=t.domain.values[i.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:o,seriesId:s,series:this.getFormatterContext("color"),colorRange:h,colorDomain:d}]}else return e==="category"?[{legendType:"category",id:s,itemId:s,seriesId:s,enabled:o,label:{text:n??a??l??r},symbol:this.legendItemSymbol(),legendItemName:n,hideInLegend:!u}]:[]}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o,ctx:{formatManager:a}}=this,{idKey:n,idName:r,colorKey:l,colorName:c,labelKey:h,labelName:u,legendItemName:d,title:g,tooltip:y}=o;if(!i||!s)return;const f=s.dataSources.get(this.id)?.[e],m=i.resolveColumnById(this,"idValue",s)[e],S=l!=null?i.resolveColumnById(this,"colorValue",s)[e]:void 0,D=[];if(this.isLabelEnabled()&&h!=null&&h!==n){const x=i.resolveColumnById(this,"labelValue",s)[e],k=a.format(this.callWithContext.bind(this),{type:"category",value:x,datum:f,seriesId:t,legendItemName:d,key:h,source:"tooltip",property:"label",domain:[],boundSeries:this.getFormatterContext("label")});D.push({label:u,fallbackLabel:h,value:k??x})}if(S!=null){const x=i.getDomain(this,"colorValue","value",s),k=a.format(this.callWithContext.bind(this),{type:"number",value:S,datum:f,seriesId:t,legendItemName:d,key:l,source:"tooltip",property:"color",domain:x,boundSeries:this.getFormatterContext("color"),fractionDigits:void 0});D.push({label:c,fallbackLabel:l,value:k??String(S)})}const b=this.getItemStyle({datum:f,datumIndex:e,colorValue:S},!1);return this.formatTooltipWithContext(y,{heading:m,title:g??d,symbol:this.legendItemSymbol(e),data:D},{seriesId:t,datum:f,title:g,idKey:n,idName:r,colorKey:l,colorName:c,labelKey:h,labelName:u,...b})}computeFocusBounds(e){return Jp(this,e)}hasItemStylers(){return this.properties.itemStyler!=null}};ea.className="MapShapeSeries",ea.type="map-shape";import{_ModuleSupport as dI}from"ag-charts-community";import{constant as gI,geoJson as fI,required as Ih,string as Wt}from"ag-charts-core";var{commonSeriesOptionsDefs:yI,mapShapeSeriesThemeableOptionsDef:mI,without:SI}=dI,xI={...SI(yI,["highlightStyle","highlight"]),...mI,type:Ih(gI("map-shape")),idKey:Ih(Wt),colorKey:Wt,labelKey:Wt,idName:Wt,colorName:Wt,labelName:Wt,topology:fI,topologyIdKey:Wt,legendItemName:Wt,title:Wt},YP={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",moduleFactory:e=>new ea(e),themeTemplate:{...Cs,series:{fill:{$mapPalette:"fill"},stroke:{$ref:"chartBackgroundColor"},colorRange:{$if:[{$eq:[{$mapPalette:"type"},"inbuilt"]},{$mapPalette:"divergingColors"},je(Ji.SAFE_RANGE2_OPERATION)]},fillGradientDefaults:je(Ji.FILL_GRADIENT_LINEAR_DEFAULTS),fillPatternDefaults:je(Ji.FILL_PATTERN_DEFAULTS),fillImageDefaults:je(Ji.FILL_IMAGE_DEFAULTS),fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{...Ji.LABEL_BOXING_DEFAULTS,color:{$ref:"chartBackgroundColor"},fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:"bold",overflowStrategy:"hide"},highlight:je(Ji.multiSeriesHighlightStyle(!0))},tooltip:{range:"exact"}}},Ah={type:"series",name:"map-shape",chartType:"topology",enterprise:!0,options:xI,create:e=>new ea(e)};import{_ModuleSupport as Zn}from"ag-charts-community";import{_ModuleSupport as bI}from"ag-charts-community";import{Logger as DI}from"ag-charts-core";import{_ModuleSupport as vI}from"ag-charts-community";var{FillGradientDefaults:kI,FillPatternDefaults:II,FillImageDefaults:AI,Property:ft,SeriesProperties:MI,makeSeriesTooltip:NI}=vI,ht=class extends MI{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillGradientDefaults=new kI,this.fillPatternDefaults=new II,this.fillImageDefaults=new AI,this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=NI()}};p([ft],ht.prototype,"topology",2),p([ft],ht.prototype,"fill",2),p([ft],ht.prototype,"fillGradientDefaults",2),p([ft],ht.prototype,"fillPatternDefaults",2),p([ft],ht.prototype,"fillImageDefaults",2),p([ft],ht.prototype,"fillOpacity",2),p([ft],ht.prototype,"stroke",2),p([ft],ht.prototype,"strokeOpacity",2),p([ft],ht.prototype,"strokeWidth",2),p([ft],ht.prototype,"lineDash",2),p([ft],ht.prototype,"lineDashOffset",2),p([ft],ht.prototype,"tooltip",2);var{createDatumId:LI,Selection:TI,Group:RI,PointerEvents:Mh,getShapeStyle:PI}=bI,ta=class extends _s{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[]}),this.properties=new ht,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new RI({name:"itemGroup"})),this.datumSelection=TI.select(this.itemGroup,()=>this.nodeFactory()),this.itemGroup.pointerEvents=Mh.None}get topology(){return this.properties.topology??this._chartTopology}get focusable(){return!1}setOptionsData(){}setChartData(){}getNodeData(){}get hasData(){return!1}renderToOffscreenCanvas(){return!0}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,e,0],this.highlightGroup.zIndex=[0,e,1],!0}nodeFactory(){const e=new Ui;return e.renderMode=1,e.lineJoin="round",e.pointerEvents=Mh.None,e}processData(){const{topology:e}=this;this.topologyBounds=e?.features.reduce((t,i)=>{const s=i.geometry;return s==null?t:qi(s,t)},void 0),e==null&&DI.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}createNodeData(){const{id:e,topology:t,scale:i}=this;if(t==null)return;const s=[],o=[];return t.features.forEach((a,n)=>{const{geometry:r}=a,l=r!=null&&i!=null?Jt(r,i):void 0;l!=null&&s.push({series:this,itemId:n,datum:a,datumIndex:0,index:n,projectedGeometry:l})}),{itemId:e,nodeData:s,labelData:o}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update(){const{datumSelection:e}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.labelGroup.visible=this.visible;const{nodeData:t=[]}=this.contextNodeData??{};this.datumSelection=this.updateDatumSelection({nodeData:t,datumSelection:e}),this.updateDatumNodes({datumSelection:e})}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>LI(t.index))}updateDatumNodes(e){const{properties:t}=this,{datumSelection:i}=e,{fill:s,fillOpacity:o,stroke:a,strokeOpacity:n,lineDash:r,lineDashOffset:l}=t,c=t.strokeWidth;i.each((h,u)=>{const{projectedGeometry:d}=u;if(d==null){h.visible=!1,h.projectedGeometry=void 0;return}h.visible=!0,h.projectedGeometry=d;const g=PI({fill:s,fillOpacity:o,stroke:a,strokeWidth:c,strokeOpacity:n,lineDash:r,lineDashOffset:l},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);h.setProperties(g)})}resetAnimation(){}getLegendData(){return[]}getTooltipContent(e){}pickFocus(){}computeFocusBounds(e){}hasItemStylers(){return!1}};ta.className="MapShapeBackgroundSeries",ta.type="map-shape-background";import{_ModuleSupport as CI}from"ag-charts-community";import{constant as _I,geoJson as wI,required as EI}from"ag-charts-core";var{commonSeriesOptionsDefs:OI,mapShapeBackgroundSeriesThemeableOptionsDef:FI}=CI,BI={...FI,...OI,type:EI(_I("map-shape-background")),topology:wI},eC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",moduleFactory:e=>new ta(e),themeTemplate:{...Cs,series:{fill:{$path:["/1",{$mapPalette:"fill"},{$mapPalette:"hierarchyColors"}]},stroke:{$ref:"chartBackgroundColor"},strokeWidth:1,fillGradientDefaults:je(Zn.FILL_GRADIENT_LINEAR_HIERARCHY_DEFAULTS),fillPatternDefaults:je(Zn.FILL_PATTERN_HIERARCHY_DEFAULTS),fillImageDefaults:je(Zn.FILL_IMAGE_DEFAULTS)}}},Nh={type:"series",name:"map-shape-background",chartType:"topology",enterprise:!0,options:BI,create:e=>new ta(e)};import{_ModuleSupport as GI}from"ag-charts-community";import{_ModuleSupport as VI}from"ag-charts-community";import{_ModuleSupport as ia}from"ag-charts-community";import{isDefined as KI}from"ag-charts-core";var{DEFAULT_POLAR_DIRECTION_KEYS:WI,DEFAULT_POLAR_DIRECTION_NAMES:zI,ChartAxisDirection:Ft,PolarAxis:HI,diff:$I,fixNumericExtent:XI,groupAccumulativeValueProperty:Lh,keyProperty:YI,normaliseGroupTo:UI,resetLabelFn:qI,seriesLabelFadeInAnimation:jI,seriesLabelFadeOutAnimation:JI,valueProperty:ZI,animationValidation:QI,createDatumId:Th,SeriesNodePickMode:Rh,normalizeAngle360:Ph,CategoryScale:eA,motion:Ch,applyShapeStyle:tA,isGradientFill:iA,getShapeStyle:Qn,updateLabelNode:sA,mergeDefaults:_h}=ia,oA=class extends ia.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},wh=class extends ia.PolarSeries{constructor(e,{animationResetFns:t}){super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:WI,propertyNames:zI,canHaveAxes:!0,pickModes:[Rh.NEAREST_NODE,Rh.EXACT_SHAPE_MATCH],animationResetFns:{...t,label:qI}}),this.NodeEvent=oA,this.groupScale=new eA,this.circleCache={r:0,cx:0,cy:0}}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Ft.Angle)return t.getDomain(this,"angleValue","key",i);{const s=t.getDomain(this,"radiusValue-end","value",i),o=Number.isFinite(s[1]-s[0])?[s[0]>0?0:s[0],s[1]<0?0:s[1]]:[];return XI(o)}}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:s}=this.properties,o=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),n=`${a}-trailing`,r=[];KI(s)&&r.push(UI([a,n],Math.abs(s))),o&&this.processedData&&r.push($I(this.id,this.processedData)),o&&r.push(QI());const l=this.visible?{}:{forceValue:0},c=this.axes[Ft.Radius]?.scale.type,h=this.axes[Ft.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[YI(t,h,{id:"angleValue"}),ZI(i,c,{id:"radiusValue-raw",invalidValue:null,...l}),...Lh(i,"normal","current",{id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},c),...Lh(i,"trailing","current",{id:"radiusValue-start",invalidValue:null,groupId:n,separateNegative:!0,...l},c),...r],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e!==s.r||t!==s.cx||i!==s.cy?(this.circleCache={r:e,cx:t,cy:i},!0):!1}isRadiusAxisReversed(){return this.axes[Ft.Radius]?.isReversed()}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=this.createNodeData()??{};this.nodeData=t,this.nodeDataRefresh=!1}getAxisInnerRadius(){const e=this.axes[Ft.Radius];return e instanceof HI?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t,groupScale:i}=this;if(!t||!e||e.type!=="grouped")return;const s=this.axes[Ft.Angle],o=this.axes[Ft.Radius],a=s?.scale,n=o?.scale;if(!a||!n)return;const r=t.resolveKeysById(this,"angleValue",e),l=t.resolveColumnById(this,"radiusValue-start",e),c=t.resolveColumnById(this,"radiusValue-end",e),h=t.resolveColumnById(this,"radiusValue-raw",e),u=t.resolveProcessedDataIndexById(this,"radiusValue-range");let d=0,g=0;s instanceof ai&&(d=s.groupPaddingInner,g=s.paddingInner);const f=(a.bandwidth??0)*(1-g),{index:m,visibleGroupCount:S}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);i.domain=Array.from({length:S}).map((P,O)=>String(O)),i.range=[-f/2,f/2],i.paddingInner=S>1?d:0;const D=this.isRadiusAxisReversed(),b=D?this.radius:this.getAxisInnerRadius(),x=D?this.getAxisInnerRadius():this.radius,k=x+b,{angleKey:I,radiusKey:A,angleName:v,radiusName:N,label:L}=this.properties,M=this.getSeriesDomain(Ft.Radius),R=(P,O,E,F)=>{const B=this.getLabelText(O,P,A,"radius",M,L,{value:O,datum:P,angleKey:I,radiusKey:A,angleName:v,radiusName:N});if(B)return{x:E,y:F,text:B,textAlign:"center",textBaseline:"middle"}},C=[],w={itemId:A,nodeData:C,labelData:C};if(!this.visible)return w;const{dataSources:T}=e,_=T.get(this.id)??[];for(const{datumIndex:P,group:O}of t.forEachGroupDatum(this,e)){const E=_[P],F=r[P];if(F==null)return;const B=h[P],G=B>=0&&!Object.is(B,-0),V=l[P],K=c[P],W=O.aggregation[u][G?1:0]??0,$=G===D;if(V===void 0||K===void 0)return;let X,q;if(_.length===1)X=-.5*Math.PI,q=1.5*Math.PI;else{const fe=a.convert(F);X=Ph(fe+i.convert(String(m))),q=Ph(X+i.bandwidth)}const Z=X+i.bandwidth/2,se=k-n.convert(V),j=k-n.convert(K),Y=(se+j)/2,oe=k-n.convert(0),ue=k-n.convert(W),ie=Math.cos(Z)*Y,J=Math.sin(Z)*Y,Se=this.properties.label.enabled?R(E,B,ie,J):void 0,le=this.getColumnWidth(X,q);C.push({series:this,datum:E,datumIndex:P,point:{x:ie,y:J,size:0},midPoint:{x:ie,y:J},label:Se,angleValue:F,radiusValue:B,negative:$,innerRadius:se,outerRadius:j,stackInnerRadius:oe,stackOuterRadius:ue,startAngle:X,endAngle:q,midAngle:Z,axisInnerRadius:b,axisOuterRadius:x,columnWidth:le,index:P})}return{itemId:A,nodeData:C,labelData:C}}getColumnWidth(e,t){return NaN}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemStyle(e,t){const{id:i,properties:s}=this,{angleKey:o,radiusKey:a,itemStyler:n,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=s,h=this.getHighlightStyle(t,e.datumIndex),u=_h(h,s.getStyle());let d=Qn(u,r,l,c);if(n!=null&&e!=null){const g=this.cachedDatumCallback(Th(this.getDatumId(e),t?"highlight":"node"),()=>{const y=this.ctx.highlightManager?.getActiveHighlight(),f=this.getHighlightStateString(y,t,e.datumIndex);return this.callWithContext(n,{seriesId:i,datum:e.datum,highlighted:t,highlightState:f,angleKey:o,radiusKey:a,...d})});g&&(d=Qn(_h(g,d),r,l,c))}return d}updateSectorSelection(e,t){let i=[];if(t){const r=this.ctx.highlightManager?.getActiveHighlight();r?.datum&&r.series===this&&i.push(r)}else i=this.nodeData;const s=this.isRadiusAxisReversed(),o=s?this.radius:this.getAxisInnerRadius(),a=s?this.getAxisInnerRadius():this.radius,n=this.getShapeFillBBox();e.update(i,void 0,r=>this.getDatumId(r)).each((r,l)=>{const{midPoint:c}=l,h=this.getItemStyle(l,t),u=h.fill,g=iA(u)&&u.bounds==="item"?{centerX:c?.x??0,centerY:c?.y??0}:{centerX:0,centerY:0,innerRadius:o,outerRadius:a};this.updateItemPath(r,l,t),tA(r,h,n,g),r.cornerRadius=h.cornerRadius,r.lineJoin="round"})}updateLabels(){const e=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.update(this.nodeData).each((t,i)=>{const s=this.getHighlightStateString(e,!1,i.datumIndex);sA(this,t,this.properties,this.properties.label,i.label,!1,s),t.fillOpacity=this.getHighlightStyle(!1,i.datumIndex).opacity??1})}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();Ch.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),jI(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();Ch.fromToMotion(this.id,"datums",t,[e],i),JI(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a}=this,{angleKey:n,angleName:r,radiusKey:l,radiusName:c,tooltip:h}=a,u=o[Ft.Angle],d=o[Ft.Radius],g=this.nodeData?.[e];if(!i||!s||!u||!d||!g)return;const y=s.dataSources.get(this.id)?.[e],f=i.resolveKeysById(this,"angleValue",s)[e],m=i.resolveColumnById(this,"radiusValue-raw",s)[e];if(f==null)return;const S=this.getItemStyle(g,!1);return this.formatTooltipWithContext(h,{heading:this.getAxisValueText(u,"tooltip",f,y,n,void 0),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(d,"tooltip",m,y,l,void 0)}]},{seriesId:t,datum:y,title:r,angleKey:n,angleName:r,radiusKey:l,radiusName:c,...S})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:n,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=this.properties,h=Qn({fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:n},r,l,c);return ia.isGradientFill(h.fill)&&(h.fill={...h.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:h}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{radiusKey:s,radiusName:o,showInLegend:a}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i,label:{text:o??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(e){return Th(e.angleValue)}computeLabelsBBox(){return null}};import{_ModuleSupport as aA}from"ag-charts-community";var{SeriesProperties:nA,FillGradientDefaults:rA,FillPatternDefaults:lA,FillImageDefaults:cA,makeSeriesTooltip:pA,Property:_e,Label:hA}=aA,Ae=class extends nA{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new rA,this.fillPatternDefaults=new lA,this.fillImageDefaults=new cA,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new hA,this.tooltip=pA()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,cornerRadius:r}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,cornerRadius:r,opacity:1}}};p([_e],Ae.prototype,"angleKey",2),p([_e],Ae.prototype,"angleName",2),p([_e],Ae.prototype,"radiusKey",2),p([_e],Ae.prototype,"radiusName",2),p([_e],Ae.prototype,"fill",2),p([_e],Ae.prototype,"fillGradientDefaults",2),p([_e],Ae.prototype,"fillPatternDefaults",2),p([_e],Ae.prototype,"fillImageDefaults",2),p([_e],Ae.prototype,"fillOpacity",2),p([_e],Ae.prototype,"stroke",2),p([_e],Ae.prototype,"strokeWidth",2),p([_e],Ae.prototype,"strokeOpacity",2),p([_e],Ae.prototype,"lineDash",2),p([_e],Ae.prototype,"lineDashOffset",2),p([_e],Ae.prototype,"cornerRadius",2),p([_e],Ae.prototype,"itemStyler",2),p([_e],Ae.prototype,"rotation",2),p([_e],Ae.prototype,"stackGroup",2),p([_e],Ae.prototype,"normalizedTo",2),p([_e],Ae.prototype,"label",2),p([_e],Ae.prototype,"tooltip",2);import{_ModuleSupport as uA}from"ag-charts-community";import{_ModuleSupport as dA}from"ag-charts-community";var{motion:gA}=dA;function Eh(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(n,r,l)=>{t.forEach(c=>{const h=e[c];let u=(l==="removed"||l==="updated"?n:r)[c],d=(l==="removed"?n:r)[c];isNaN(d)&&(d=n.previousDatum?.[c]??NaN);const g=u-d;Math.abs(g)>Math.PI&&(u-=Math.sign(g)*2*Math.PI),h.set(r,{from:u,to:d})})},s=(n,r)=>({startAngle:e.startAngle.get(n)[r],endAngle:e.endAngle.get(n)[r]});return{calculate:i,from:n=>s(n,"from"),to:n=>s(n,"to")}}function Oh(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.startAngle)||isNaN(e.previousDatum.endAngle))return"added";if(isNaN(t.startAngle)||isNaN(t.endAngle))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function fA(e){const t=Eh();return{toFn:(o,a,n)=>{const{startAngle:r,endAngle:l}=t.to(a);let c,h,u,d,g;return n==="removed"?(c=o.innerRadius,h=o.innerRadius,u=o.columnWidth,d=o.axisInnerRadius,g=o.axisOuterRadius):(c=isNaN(a.innerRadius)?e:a.innerRadius,h=isNaN(a.outerRadius)?e:a.outerRadius,u=isNaN(a.columnWidth)?o.columnWidth:a.columnWidth,d=a.axisInnerRadius,g=a.axisOuterRadius),{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:g,startAngle:r,endAngle:l}},fromFn:(o,a,n)=>{n=Oh(o,a,n),t.calculate(o,a,n);const{startAngle:r,endAngle:l}=t.from(a);let c,h,u,d,g;n==="removed"||n==="updated"?(c=o.innerRadius,h=o.outerRadius,u=o.columnWidth,d=o.axisInnerRadius,g=o.axisOuterRadius):(c=e,h=e,u=a.columnWidth,d=a.axisInnerRadius,g=a.axisOuterRadius);const y=gA.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:h,columnWidth:u,axisInnerRadius:d,axisOuterRadius:g,startAngle:r,endAngle:l,phase:y}}}}function yA(e,{innerRadius:t,outerRadius:i,columnWidth:s,axisInnerRadius:o,axisOuterRadius:a,startAngle:n,endAngle:r}){return{innerRadius:t,outerRadius:i,columnWidth:s,axisInnerRadius:o,axisOuterRadius:a,startAngle:n,endAngle:r}}var{SectorBox:sa,motion:mA}=uA;function er(e){const{negative:t,innerRadius:i,outerRadius:s,stackInnerRadius:o,stackOuterRadius:a}=e;return{innerRadius:t?a:o,outerRadius:t?o:a,clipInnerRadius:t?s:i,clipOuterRadius:t?i:s}}function SA(e){const t=Eh();return{toFn:(o,a,n)=>{const{startAngle:r,endAngle:l}=t.to(a);let c,h,u;if(n==="removed")c=e,h=e,u=new sa(r,l,c,h);else{let d,g;({innerRadius:c,outerRadius:h,clipInnerRadius:d,clipOuterRadius:g}=er(a)),isNaN(c)&&(c=e),isNaN(h)&&(h=e),isNaN(d)&&(d=e),isNaN(g)&&(g=e),u=new sa(r,l,d,g)}return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:u}},fromFn:(o,a,n)=>{n=Oh(o,a,n),t.calculate(o,a,n);const{startAngle:r,endAngle:l}=t.from(a);let c,h,u;n==="removed"||n==="updated"?(c=o.innerRadius,h=o.outerRadius,u=o.clipSector):(c=e,h=e),u??(u=new sa(r,l,c,h));const d=mA.NODE_UPDATE_STATE_TO_PHASE_MAPPING[n];return{innerRadius:c,outerRadius:h,startAngle:r,endAngle:l,clipSector:u,phase:d}}}}function xA(e,t){const{startAngle:i,endAngle:s}=t,{innerRadius:o,outerRadius:a,clipInnerRadius:n,clipOuterRadius:r}=er(t),l=new sa(i,s,n,r);return{innerRadius:o,outerRadius:a,startAngle:i,endAngle:s,clipSector:l}}var{Sector:bA,SectorBox:DA,PolarZIndexMap:tr}=VI,oa=class extends wh{constructor(e){super(e,{animationResetFns:{item:xA}}),this.properties=new Ae}setZIndex(e){return super.setZIndex(e),this.contentGroup.zIndex=[0,tr.FOREGROUND,e],this.highlightGroup.zIndex=[0,tr.HIGHLIGHT,e],this.labelGroup.zIndex=[0,tr.LABEL,e],!0}getStackId(){return`nightingale-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new bA}updateItemPath(e,t,i){const{negative:s}=t;if(e.centerX=0,e.centerY=0,e.startOuterCornerRadius=s?0:this.properties.cornerRadius,e.endOuterCornerRadius=s?0:this.properties.cornerRadius,e.startInnerCornerRadius=s?this.properties.cornerRadius:0,e.endInnerCornerRadius=s?this.properties.cornerRadius:0,i){const{startAngle:o,endAngle:a}=t,{innerRadius:n,outerRadius:r,clipInnerRadius:l,clipOuterRadius:c}=er(t);e.innerRadius=n,e.outerRadius=r,e.startAngle=o,e.endAngle=a,e.clipSector=new DA(o,a,l,c)}}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return SA(e)}hasItemStylers(){return this.properties.itemStyler!=null}};oa.className="NightingaleSeries",oa.type="nightingale";import{_ModuleSupport as vA}from"ag-charts-community";import{boolean as Fh,constant as kA,number as IA,required as ir,string as Es}from"ag-charts-core";var{commonSeriesOptionsDefs:AA,nightingaleSeriesThemeableOptionsDef:MA}=vA,NA={...AA,...MA,type:ir(kA("nightingale")),angleKey:ir(Es),radiusKey:ir(Es),angleName:Es,radiusName:Es,grouped:Fh,stacked:Fh,stackGroup:Es,normalizedTo:IA};import{_ModuleSupport as Zi}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:Bh,POLAR_AXIS_SHAPE:Gh}}=Zi,LA={series:{fill:{$palette:"fill"},stroke:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$ref:"chartBackgroundColor"},{$palette:"stroke"}]},fillGradientDefaults:Zi.FILL_GRADIENT_RADIAL_SERIES_DEFAULTS,fillPatternDefaults:Zi.FILL_PATTERN_DEFAULTS,fillImageDefaults:Zi.FILL_IMAGE_DEFAULTS,strokeWidth:1,label:{...Zi.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:Zi.multiSeriesHighlightStyle()},axes:{[Bh.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:Gh.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[Bh.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:Gh.CIRCLE}}}},{ThemeConstants:{POLAR_AXIS_TYPE:Vh}}=GI,hC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",moduleFactory:e=>new oa(e),defaultAxes:[{type:Vh.ANGLE_CATEGORY},{type:Vh.RADIUS_NUMBER}],themeTemplate:LA,stackable:!0,groupable:!0,stackedByDefault:!0},Kh={type:"series",name:"nightingale",chartType:"polar",enterprise:!0,options:NA,create:e=>new oa(e)};import{_ModuleSupport as Wh}from"ag-charts-community";import{_ModuleSupport as TA}from"ag-charts-community";var{SeriesProperties:RA,FillGradientDefaults:PA,FillPatternDefaults:CA,FillImageDefaults:_A,makeSeriesTooltip:wA,Property:Me,Label:zh,DropShadow:EA}=TA,OA=class extends zh{},sr=class extends zh{constructor(){super(...arguments),this.spacing=0}};p([Me],sr.prototype,"spacing",2),p([Me],sr.prototype,"placement",2);var Te=class extends RA{constructor(){super(...arguments),this.fills=[],this.fillGradientDefaults=new PA,this.fillPatternDefaults=new CA,this.fillImageDefaults=new _A,this.fillOpacity=1,this.strokes=[],this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.direction="vertical",this.reverse=void 0,this.spacing=0,this.aspectRatio=void 0,this.shadow=new EA().set({enabled:!1}),this.label=new OA,this.stageLabel=new sr,this.tooltip=wA()}getStyle(e=0){const{fills:t,strokes:i,fillOpacity:s,strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this;return{fill:t[e%t.length],fillOpacity:s,stroke:i[e%i.length],strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:r,opacity:1}}};p([Me],Te.prototype,"stageKey",2),p([Me],Te.prototype,"valueKey",2),p([Me],Te.prototype,"fills",2),p([Me],Te.prototype,"fillGradientDefaults",2),p([Me],Te.prototype,"fillPatternDefaults",2),p([Me],Te.prototype,"fillImageDefaults",2),p([Me],Te.prototype,"fillOpacity",2),p([Me],Te.prototype,"strokes",2),p([Me],Te.prototype,"strokeWidth",2),p([Me],Te.prototype,"strokeOpacity",2),p([Me],Te.prototype,"lineDash",2),p([Me],Te.prototype,"lineDashOffset",2),p([Me],Te.prototype,"direction",2),p([Me],Te.prototype,"reverse",2),p([Me],Te.prototype,"spacing",2),p([Me],Te.prototype,"aspectRatio",2),p([Me],Te.prototype,"itemStyler",2),p([Me],Te.prototype,"shadow",2),p([Me],Te.prototype,"label",2),p([Me],Te.prototype,"stageLabel",2),p([Me],Te.prototype,"tooltip",2);function Hh(e,{x:t,y:i,top:s,right:o,bottom:a,left:n}){e.x0=t-s/2,e.x1=t+s/2,e.x2=t+a/2,e.x3=t-a/2,e.y0=i-n/2,e.y1=i-o/2,e.y2=i+o/2,e.y3=i+n/2}function FA(e){return{fromFn:(o,a)=>{const{x:n,y:r}=a;let{top:l,right:c,bottom:h,left:u}=a;return e==="vertical"?(l=0,h=0):(u=0,c=0),{x:n,y:r,top:l,right:c,bottom:h,left:u}},toFn:(o,a)=>{const{x:n,y:r,top:l,right:c,bottom:h,left:u}=a;return{x:n,y:r,top:l,right:c,bottom:h,left:u}},applyFn:Hh}}var{StateMachine:BA,valueProperty:$h,SeriesNodePickMode:Xh,CachedTextMeasurerPool:GA,TextUtils:VA,createDatumId:KA,BBox:or,Group:ar,Selection:aa,Text:Yh,PointerEvents:Uh,applyShapeStyle:WA,mergeDefaults:qh,fromToMotion:zA,seriesLabelFadeInAnimation:HA,getShapeStyle:nr,getLabelStyles:$A}=Wh,rr=class extends Wh.DataModelSeries{constructor(e){super({moduleCtx:e,categoryKey:void 0,pickModes:[Xh.EXACT_SHAPE_MATCH,Xh.NEAREST_NODE]}),this.properties=new Te,this.itemGroup=this.contentGroup.appendChild(new ar({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new ar({name:"itemLabelGroup"})),this.stageLabelGroup=this.contentGroup.appendChild(new ar({name:"stageLabelGroup"})),this.datumSelection=aa.select(this.itemGroup,()=>this.nodeFactory()),this.labelSelection=aa.select(this.itemLabelGroup,Yh),this.stageLabelSelection=aa.select(this.stageLabelGroup,Yh),this.highlightDatumSelection=aa.select(this.highlightGroup,()=>this.nodeFactory()),this.animationState=new BA("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{clear:"empty",reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable()),this.itemLabelGroup.pointerEvents=Uh.None,this.stageLabelGroup.pointerEvents=Uh.None}addChartEventListeners(){this.cleanup.register(this.ctx.eventsHub.on("legend:item-click",e=>this.onLegendItemClick(e)))}nodeFactory(){return new Ot}getNodeData(){return this.contextNodeData?.nodeData}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}async processData(e){if(this.data==null)return;const{id:t,visible:i,ctx:{legendManager:s}}=this,{stageKey:o,valueKey:a}=this.properties,n="category",r="number",l=(h,u,d)=>i&&s.getItemEnabled({seriesId:t,itemId:d}),c=this.visible?{}:{forceValue:0};await this.requestDataModel(e,this.data,{props:[$h(o,n,{id:"xValue"}),$h(a,r,{id:"yValue",...c,validation:l,invalidValue:0})]})}createNodeData(){const{id:e,dataModel:t,processedData:i,properties:s,visible:o,ctx:{legendManager:a}}=this,{stageKey:n,valueKey:r,direction:l,reverse:c=l==="horizontal",spacing:h,aspectRatio:u,label:d,stageLabel:g}=s;if(t==null||i==null)return;const y=l==="horizontal",f=t.resolveColumnById(this,"xValue",i),m=t.resolveColumnById(this,"yValue",i),S=t.getDomain(this,"xValue","value",i),D=t.getDomain(this,"yValue","value",i),b=GA.getMeasurer({font:g});let x,k;y?(x="center",k=g.placement==="before"?"bottom":"top"):(x=g.placement==="after"?"left":"right",k="middle");const I=g.enabled?[]:void 0;let A=0,v=0,N=0;const L=i.dataSources.get(this.id)??[];L.forEach((G,V)=>{const K=f[V],W=m[V],$=o&&a.getItemEnabled({seriesId:e,itemId:V});if(N+=W,I==null)return;const X=this.getLabelText(K,G,n,"x",S,this.properties.stageLabel,{datum:G,value:W,stageKey:n,valueKey:r}),{width:q}=b.measureText(X),Z=X.split(`
`).length*VA.getLineHeight(d.fontSize);A=Math.max(A,q),v=Math.max(v,Z),I.push({x:NaN,y:NaN,text:X,textAlign:x,textBaseline:k,visible:$})});const M=this._nodeDataDependencies?.seriesRectWidth??0,R=this._nodeDataDependencies?.seriesRectHeight??0,C=h*(i.input.count-1);let w;if(y){const G=v+g.spacing;w=new or(0,g.placement==="before"?G:0,M,R-G)}else{const G=A+g.spacing;w=new or(g.placement==="after"?0:G,0,M-G,R)}if(u!=null&&u!==0){const G=l==="horizontal"?1/u:u,V=Math.min(w.width,w.height*G),K=V/G;w=new or(w.x+(w.width-V)/2,w.y+(w.height-K)/2,V,K)}let T,_;y?_=g.placement==="before"?w.y-g.spacing:w.y+w.height+g.spacing:T=g.placement==="after"?w.x+w.width+g.spacing:w.x-g.spacing;const P=w.width-(y?C:0),O=w.height-(y?0:C);if(P<0||O<0)return;const E=[],F=[];let B=0;return L.forEach((G,V)=>{const K=f[V],W=m[V],$=o&&a.getItemEnabled({seriesId:e,itemId:V}),X=B+W,q=(B+X)/(2*N),Z=(X-B)/N,se=y?P*q+h*V:P*.5,j=y?O*.5:O*q+h*V,Y=w.x+se,oe=w.y+j;if(I!=null){const ce=I[V];ce.x=T??Y,ce.y=_??oe}let ue,ie,J,Se;if(y){const ce=P*Z;ue=ce,J=ce;const xe=(se+ce/2)*(O/w.width),Pe=(se-ce/2)*(O/w.width);ie=c?w.height-xe:xe,Se=c?w.height-Pe:Pe}else{const ce=O*Z;ie=ce,Se=ce;const xe=(j-ce/2)*(P/w.height),Pe=(j+ce/2)*(P/w.height);ue=c?w.width-xe:xe,J=c?w.width-Pe:Pe}const le=this.getLabelText(W,G,r,"y",D,d,{datum:G,value:W,stageKey:n,valueKey:r}),fe={x:Y,y:oe,text:le,textAlign:"center",textBaseline:"middle",visible:$};F.push(fe),E.push({series:this,itemId:r,datum:G,datumIndex:V,index:V,xValue:K,yValue:W,x:Y,y:oe,top:ue,right:ie,bottom:J,left:Se,label:fe,enabled:$,midPoint:{x:Y,y:oe}}),B=X}),{itemId:e,nodeData:E,labelData:F,stageLabelData:I,bounds:w}}updateSelections(){this.nodeDataRefresh&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}update({seriesRect:e}){this.checkResize(e);const{datumSelection:t,labelSelection:i,stageLabelSelection:s,highlightDatumSelection:o}=this;this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let a=this.ctx.highlightManager?.getActiveHighlight();a!=null&&(a.series!==this||a.datum==null)&&(a=void 0);const n=this.contextNodeData?.nodeData??[],r=this.contextNodeData?.labelData??[],l=this.contextNodeData?.stageLabelData??[];this.datumSelection=this.updateDatumSelection({nodeData:n,datumSelection:t}),this.updateDatumNodes({datumSelection:t,isHighlight:!1}),this.labelSelection=this.updateLabelSelection({labelData:r,labelSelection:i}),this.updateLabelNodes({labelSelection:i,labelProperties:this.properties.label}),this.stageLabelSelection=this.updateStageLabelSelection({stageLabelData:l,stageLabelSelection:s}),this.updateLabelNodes({labelSelection:s,labelProperties:this.properties.stageLabel}),this.highlightDatumSelection=this.updateDatumSelection({nodeData:a!=null?[a]:[],datumSelection:o}),this.updateDatumNodes({datumSelection:o,isHighlight:!0}),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData)}getItemStyle({datumIndex:e,datum:t},i){const{id:s,properties:o}=this,{stageKey:a,valueKey:n,itemStyler:r,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:h}=o,u=this.getHighlightStyle(i,e),d=qh(u,o.getStyle(e));let g=nr(d,l,c,h);if(r!=null&&e!=null){const y=this.ctx.highlightManager?.getActiveHighlight(),f=this.cachedDatumCallback(KA(e,i?"highlight":"node"),()=>{const m=this.getHighlightStateString(y,i,e);return this.callWithContext(r,{seriesId:s,datum:t,stageKey:a,valueKey:n,highlighted:i,highlightState:m,...g})});f&&(g=nr(qh(f,g),l,c,h))}return g}updateDatumNodes(e){const{datumSelection:t,isHighlight:i}=e,{properties:s}=this,{shadow:o}=s,a=this.contextNodeData?.bounds,n=a?{series:a,axis:a}:void 0;t.each((r,l)=>{const c=this.getItemStyle(l,i);WA(r,c,n),Hh(r,l),r.fillShadow=o})}updateLabelSelection(e){return e.labelSelection.update(this.properties.label.enabled?e.labelData:[])}updateStageLabelSelection(e){return e.stageLabelSelection.update(e.stageLabelData)}updateLabelNodes(e){e.labelSelection.each((t,i,s)=>{const{visible:o,x:a,y:n,text:r,textAlign:l,textBaseline:c}=i,h=$A(this,void 0,this.properties,e.labelProperties),{color:u,fontSize:d,fontStyle:g,fontWeight:y,fontFamily:f}=h;t.visible=o,t.x=a,t.y=n,t.text=r,t.fill=u,t.fillOpacity=this.getHighlightStyle(!1,s).opacity??1,t.fontStyle=g,t.fontWeight=y,t.fontSize=d,t.fontFamily=f,t.textAlign=l,t.textBaseline=c,t.setBoxing(h)})}computeFocusBounds(e){const t=this.getNodeData()?.[e.datumIndex];if(t!==void 0){for(const i of this.datumSelection)if(i.datum===t)return i.node}}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:o}=this,{stageKey:a,valueKey:n,tooltip:r}=o;if(!i||!s)return;const l=s.dataSources.get(this.id)?.[e],c=i.resolveColumnById(this,"xValue",s)[e],h=i.resolveColumnById(this,"yValue",s)[e];if(c==null)return;const u=this.getLabelText(c,l,a,"x",i.getDomain(this,"xValue","value",s),this.properties.stageLabel,{datum:l,value:c,stageKey:a,valueKey:n}),d=this.getLabelText(h,l,n,"y",i.getDomain(this,"yValue","value",s),this.properties.stageLabel,{datum:l,value:h,stageKey:a,valueKey:n}),g=this.getItemStyle({datumIndex:e,datum:l},!1);return this.formatTooltipWithContext(r,{symbol:this.legendItemSymbol(e),data:[{label:u,value:d}]},{seriesId:t,datum:l,title:void 0,stageKey:a,valueKey:n,...g})}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}pickNodeClosestDatum({x:e,y:t}){let i=1/0,s;return this.datumSelection.each((o,a)=>{const n=o.distanceSquared(e,t);n<i&&(i=n,s=a)}),s!=null?{datum:s,distance:Math.sqrt(i)}:void 0}legendItemSymbol(e){const{fills:t,strokes:i,strokeWidth:s,fillOpacity:o,strokeOpacity:a,lineDash:n,lineDashOffset:r}=this.properties,l=t[e%t.length]??"black",c=i[e%i.length]??"black";return{marker:nr({fill:l,fillOpacity:o,stroke:c,strokeWidth:s,strokeOpacity:a,lineDash:n,lineDashOffset:r},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults)}}getLegendData(e){const{processedData:t,dataModel:i,id:s,ctx:{legendManager:o},visible:a}=this;if(!i||!t||e!=="category")return[];const{showInLegend:n}=this.properties,r=[],l=i.resolveColumnById(this,"xValue",t);return(t.dataSources.get(this.id)??[]).forEach((h,u)=>{const d=l[u];r.push({legendType:"category",id:s,itemId:u,seriesId:s,enabled:a&&o.getItemEnabled({seriesId:s,itemId:u}),label:{text:d},symbol:this.legendItemSymbol(u),hideInLegend:!n})}),r}animateReset(){this.ctx.animationManager.skipCurrentBatch(),this.ctx.animationManager.stopByAnimationGroupId(this.id)}animateEmptyUpdateReady(){const{datumSelection:e,labelSelection:t,properties:i}=this,s=FA(i.direction);zA(this.id,"nodes",this.ctx.animationManager,[e],s),HA(this,"labels",this.ctx.animationManager,t)}hasItemStylers(){return this.properties.itemStyler!=null}};rr.className="PyramidSeries",rr.type="pyramid";import{_ModuleSupport as XA}from"ag-charts-community";import{constant as YA,required as lr,string as jh}from"ag-charts-core";var{commonSeriesOptionsDefs:UA,pyramidSeriesThemeableOptionsDef:qA}=XA,jA={...qA,...UA,type:lr(YA("pyramid")),stageKey:lr(jh),valueKey:lr(jh)};import{_ModuleSupport as Di}from"ag-charts-community";var{ThemeSymbols:{DEFAULT_SHADOW_COLOUR:JA}}=Di,mC={series:{direction:"vertical",strokeWidth:{$isUserOption:["./strokes/0",2,0]},spacing:2,fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:Di.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:Di.FILL_PATTERN_DEFAULTS,fillImageDefaults:Di.FILL_IMAGE_DEFAULTS,label:{...Di.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},stageLabel:{...Di.LABEL_BOXING_DEFAULTS,enabled:!0,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:12},shadow:{enabled:!1,color:JA,xOffset:3,yOffset:3,blur:5},highlight:Di.singleSeriesHighlightStyle()}},Jh={type:"series",name:"pyramid",chartType:"standalone",enterprise:!0,options:jA,create:e=>new rr(e)};import{_ModuleSupport as ZA}from"ag-charts-community";import{_ModuleSupport as yt}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:QA}}=yt,Zh={series:{stroke:{$palette:"stroke"},label:{...yt.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},marker:{enabled:!0,fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:yt.FILL_GRADIENT_RADIAL_REVERSED_DEFAULTS,fillPatternDefaults:yt.FILL_PATTERN_DEFAULTS,fillImageDefaults:yt.FILL_IMAGE_DEFAULTS,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:{$isUserOption:["./stroke",1,0]}},highlight:yt.multiSeriesHighlightStyle(),tooltip:{range:{$path:["/tooltip/range","nearest"]}}},axes:{[QA.ANGLE_CATEGORY]:{label:{spacing:10}}}},eM=yt.mergeDefaults({series:{stroke:yt.SAFE_STROKE_FILL_OPERATION,strokeWidth:2}},Zh),tM=yt.mergeDefaults({series:{fill:{$palette:"fill"},fillGradientDefaults:yt.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:yt.FILL_PATTERN_DEFAULTS,fillImageDefaults:yt.FILL_IMAGE_DEFAULTS,fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},Zh);import{_ModuleSupport as Qh}from"ag-charts-community";import{_ModuleSupport as cr}from"ag-charts-community";import{isFiniteNumber as eu,isNumberEqual as tu}from"ag-charts-core";import{_ModuleSupport as iM}from"ag-charts-community";var{Label:sM,SeriesMarker:oM,SeriesProperties:aM,makeSeriesTooltip:nM,Property:at}=iM,Je=class extends aM{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new oM,this.label=new sM,this.tooltip=nM(),this.connectMissingData=!1}};p([at],Je.prototype,"angleKey",2),p([at],Je.prototype,"radiusKey",2),p([at],Je.prototype,"angleName",2),p([at],Je.prototype,"radiusName",2),p([at],Je.prototype,"stroke",2),p([at],Je.prototype,"strokeWidth",2),p([at],Je.prototype,"strokeOpacity",2),p([at],Je.prototype,"lineDash",2),p([at],Je.prototype,"lineDashOffset",2),p([at],Je.prototype,"rotation",2),p([at],Je.prototype,"marker",2),p([at],Je.prototype,"label",2),p([at],Je.prototype,"tooltip",2),p([at],Je.prototype,"connectMissingData",2);var{DEFAULT_POLAR_DIRECTION_KEYS:rM,DEFAULT_POLAR_DIRECTION_NAMES:lM,ChartAxisDirection:mt,PolarAxis:cM,SeriesNodePickMode:iu,valueProperty:su,fixNumericExtent:pM,seriesLabelFadeInAnimation:hM,markerFadeInAnimation:uM,resetMarkerFn:dM,animationValidation:gM,computeMarkerFocusBounds:fM,extent:yM,BBox:mM,Group:SM,Path:xM,PointerEvents:bM,Selection:ou,Text:DM,Marker:vM,mergeDefaults:kM,getShapeStyle:IM,updateLabelNode:AM}=cr,MM=class extends cr.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},pr=class extends cr.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"angleValue",propertyKeys:rM,propertyNames:lM,pickModes:[iu.NEAREST_NODE,iu.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:dM},clipFocusBox:!1}),this.properties=new Je,this.NodeEvent=MM,this.lineGroup=this.contentGroup.appendChild(new SM({name:"radar-line"})),this.lineSelection=ou.select(this.lineGroup,xM),this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0},this.lineGroup.zIndex=0,this.itemGroup.zIndex=1}nodeFactory(){return new vM}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===mt.Angle)return t.getDomain(this,"angleValue","value",i);{const s=t.getDomain(this,"radiusValue","value",i),o=yM(s.length===0?s:[0].concat(s));return pM(o)}}async processData(e){const{angleKey:t,radiusKey:i}=this.properties,s=[];this.ctx.animationManager.isSkipped()||s.push(gM());const o=this.axes[mt.Radius]?.scale.type,a=this.axes[mt.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[su(t,a,{id:"angleValue"}),su(i,o,{id:"radiusValue",invalidValue:void 0}),...s]}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e===s.r&&t===s.cx&&i===s.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[mt.Radius];return e instanceof cM?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=this.createNodeData()??{};this.nodeData=t,this.nodeDataRefresh=!1}createNodeData(){const{processedData:e,dataModel:t}=this;if(!e||!t)return;const{angleKey:i,radiusKey:s,angleName:o,radiusName:a,marker:n,label:r}=this.properties,l=this.axes[mt.Angle]?.scale,c=this.axes[mt.Radius]?.scale;if(!l||!c)return;const h=t.resolveColumnById(this,"angleValue",e),u=t.resolveColumnById(this,"radiusValue",e),d=this.getAxisInnerRadius(),g=this.getSeriesDomain(mt.Radius),f=(e.dataSources.get(this.id)??[]).map((m,S)=>{const D=h[S],b=u[S],x=l.convert(D),k=this.radius+d-c.convert(b),I=Math.cos(x),A=Math.sin(x),v=I*k,N=A*k;let L;if(r.enabled){const M=this.getLabelText(b,m,s,"radius",g,r,{value:b,datum:m,angleKey:i,radiusKey:s,angleName:o,radiusName:a});if(M){let R="right";tu(I,0)?R="center":I>0&&(R="left");let C="bottom";tu(A,0)?C="middle":A>0&&(C="top"),L={x:v+I*n.size,y:N+A*n.size,text:M,textAlign:R,textBaseline:C}}}return{series:this,datum:m,datumIndex:S,index:S,point:{x:v,y:N,size:n.size},midPoint:{x:v,y:N},label:L,angleValue:D,radiusValue:b,missing:!eu(x)||!eu(k)}});return{itemId:s,nodeData:f,labelData:f}}update({seriesRect:e}){const t=this.checkResize(e),i=!this.ctx.animationManager.isSkipped(),{series:s}=this.ctx.highlightManager?.getActiveHighlight()??{};this.highlightGroup.visible=(i||this.visible)&&s===this,this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updatePathSelections(),this.updateMarkerSelection(),this.updatePathNodes(),this.updateMarkers(this.itemSelection,!1),this.updateMarkers(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=ou.select(this.itemGroup,()=>this.nodeFactory(),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(e){return e?.fill??this.properties.marker.fill}getDatumStylerProperties(e){const{id:t,properties:i}=this,{angleKey:s,radiusKey:o}=i;return{seriesId:t,datum:e,angleKey:s,radiusKey:o}}updateMarkers(e,t){const{visible:i}=this,{marker:s,stroke:o,strokeWidth:a,strokeOpacity:n}=this.properties;let r=[];if(i&&s.shape&&s.enabled)if(t){const c=this.ctx.highlightManager?.getActiveHighlight();c?.datum&&(r=[c])}else r=this.nodeData;const l=this.getShapeFillBBox();e.update(r).each((c,h)=>{const u=this.getMarkerStyle(s,h,this.getDatumStylerProperties(h),t,void 0,{stroke:o,strokeWidth:a,strokeOpacity:n});this.applyMarkerStyle(u,c,h.point,l)})}updateLabels(){this.labelSelection.update(this.nodeData).each((e,t)=>{if(t.label){e.fillOpacity=this.getHighlightStyle(!1,t.datumIndex).opacity??1;const s=this.ctx.highlightManager?.getActiveHighlight(),o=this.getHighlightStateString(s,!1,t.datumIndex);AM(this,e,this.properties,this.properties.label,t.label,!1,o)}})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a}=this,{angleKey:n,angleName:r,radiusKey:l,radiusName:c,tooltip:h,marker:u}=a,d=o[mt.Angle],g=o[mt.Radius];if(!i||!s||!d||!g)return;const y=s.dataSources.get(this.id)?.[e],f=i.resolveColumnById(this,"angleValue",s)[e],m=i.resolveColumnById(this,"radiusValue",s)[e];if(f==null)return;const S=this.getMarkerStyle(u,{datum:y,datumIndex:e},this.getDatumStylerProperties(y),!1);return this.formatTooltipWithContext(h,{heading:this.getAxisValueText(d,"tooltip",f,y,n,void 0),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:this.getAxisValueText(g,"tooltip",m,y,l,void 0)}]},{seriesId:t,datum:y,title:r,angleKey:n,radiusKey:l,angleName:r,radiusName:c,...S})}legendItemSymbol(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:s,marker:o}=this.properties;return{marker:IM({shape:o.shape,enabled:o.enabled||t<=0,fill:this.getMarkerFill()??o.stroke??e??"rgba(0, 0, 0, 0)",stroke:o.stroke??e??"rgba(0, 0, 0, 0)",fillOpacity:o.fillOpacity,strokeOpacity:o.strokeOpacity,strokeWidth:o.strokeWidth,lineDash:o.lineDash,lineDashOffset:o.lineDashOffset},o.fillGradientDefaults,o.fillPatternDefaults,o.fillImageDefaults),line:{stroke:e,strokeOpacity:i,strokeWidth:t,lineDash:s}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{radiusKey:o,radiusName:a,showInLegend:n}=this.properties;return[{legendType:"category",id:t,itemId:o,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:o}),label:{text:a??o},symbol:this.legendItemSymbol(),hideInLegend:!n}]}pickNodeClosestDatum(e){const{nodeData:t,centerX:i,centerY:s}=this,{x:o,y:a}=e,n=this.radius;if(Math.sqrt((o-i)**2+(a-s)**2)>n+this.properties.marker.size)return;let l=1/0,c;for(const h of t){const{point:{x:u=NaN,y:d=NaN}={}}=h;if(isNaN(u)||isNaN(d))continue;const g=Math.sqrt((e.x-u-i)**2+(e.y-d-s)**2);g<l&&(l=g,c=h)}if(c){const h=Math.max(l-(c.point?.size??0),0);return{datum:c,distance:h}}}computeLabelsBBox(){const{label:e}=this.properties;this.maybeRefreshNodeData();const t=[],i=new DM;return this.nodeData.forEach(s=>{if(!e.enabled||!s.label)return;i.text=s.label.text,i.x=s.label.x,i.y=s.label.y,i.setFont(e),i.setAlign(s.label);const o=i.getBBox();t.push(o)}),t.length===0?null:mM.merge(t)}getLineNode(){return this.lineSelection?.at(0)}beforePathAnimation(){this.updatePathNodes()}updatePathNodes(){const e=this.getLineNode();if(!e)return;const{strokeWidth:t,stroke:i,strokeOpacity:s,lineDash:o,lineDashOffset:a,opacity:n}=kM(this.getHighlightStyle(),this.properties);e.setProperties({fill:void 0,lineJoin:"round",lineCap:"round",pointerEvents:bM.None,opacity:n,stroke:i,strokeWidth:t,strokeOpacity:s,lineDash:o,lineDashOffset:a})}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(e.length===0)return[];const s=this.axes[mt.Radius],a=this.axes[mt.Angle]?.isReversed(),r=s?.isReversed()&&!a?[...e].reverse():e,l=[];let c=!1,h;return r.forEach((u,d)=>{let{x:g,y}=u.point;const f=isNaN(g)||isNaN(y);f||(h??(h=u)),f&&!i&&(g=0,y=0);const m=d===0||!t&&!i&&(f||c);l.push({x:g,y,moveTo:m}),c=f}),h!==void 0&&l.push({x:h.point.x,y:h.point.y,moveTo:!1}),l}animateSinglePath(e,t,i){const{path:s}=e;s.clear(!0);const o=this.getAxisInnerRadius(),a=this.axes[mt.Radius],r=a?.isReversed()?this.radius+o-a?.scale.convert(0):o;t.forEach(l=>{const{x:c,y:h,arc:u,radius:d=0,startAngle:g=0,endAngle:y=0,moveTo:f}=l,m=Math.atan2(h,c),S=r*Math.cos(m),D=r*Math.sin(m),b=i,x=S*(1-b)+c*b,k=D*(1-b)+h*b;u?s.arc(c,h,d,g,y):f?s.moveTo(x,k):s.lineTo(x,k)}),e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints(),i=this.getLineNode();i&&this.animateSinglePath(i,t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:`${this.id}_'path`,groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:s=>this.animatePaths(s),onStop:()=>this.animatePaths(1)}),uM(this,i,"added",e),hM(this,"labels",i,t)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints();e.fill=void 0,e.stroke=this.properties.stroke,e.strokeWidth=this.properties.strokeWidth,e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,t.clear(!0);for(const{x:s,y:o,moveTo:a}of i)a?t.moveTo(s,o):t.lineTo(s,o);e.checkPathDirty()}}getFormattedMarkerStyle(e){const{angleKey:t,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,e,{angleKey:t,radiusKey:i},!0)}computeFocusBounds(e){return fM(this,e)}};pr.className="RadarSeries";import{_ModuleSupport as NM}from"ag-charts-community";var{FillGradientDefaults:LM,FillPatternDefaults:TM,FillImageDefaults:RM,Property:Os}=NM,Qi=class extends Je{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new LM,this.fillPatternDefaults=new TM,this.fillImageDefaults=new RM,this.fillOpacity=1}};p([Os],Qi.prototype,"fill",2),p([Os],Qi.prototype,"fillGradientDefaults",2),p([Os],Qi.prototype,"fillPatternDefaults",2),p([Os],Qi.prototype,"fillImageDefaults",2),p([Os],Qi.prototype,"fillOpacity",2);var{Group:PM,Path:CM,PointerEvents:_M,Selection:wM,ChartAxisDirection:au,applyShapeStyle:nu,getShapeFill:EM,getShapeStyle:OM,mergeDefaults:FM}=Qh,na=class extends pr{constructor(e){super(e),this.properties=new Qi,this.areaGroup=this.contentGroup.appendChild(new PM({name:"radar-area"})),this.areaSelection=wM.select(this.areaGroup,CM),this.resetInvalidToZero=!0,this.areaGroup.zIndex=-1}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.at(0)}getMarkerFill(e){return e?.fill??this.properties.marker.fill??this.properties.fill}updatePathNodes(){super.updatePathNodes();const{fill:e,fillOpacity:t,opacity:i}=FM(this.getHighlightStyle(),this.properties),{fill:s,fillOpacity:o}=OM({fill:e,fillOpacity:t},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),a=this.getAreaNode();a&&(nu(a,{fill:s,fillOpacity:o,stroke:void 0},this.getShapeFillBBox()),a.setProperties({lineJoin:"round",pointerEvents:_M.None,opacity:i}))}animatePaths(e){super.animatePaths(e);const t=this.getAreaNode();t&&this.animateSinglePath(t,this.getAreaPoints(),e)}getAreaPoints(){const e=this.getLinePoints(),t=n=>{const r=this.axes[n];return r instanceof Qh.PolarAxis?r:void 0},i=t(au.Radius),s=t(au.Angle);if(!i?.isReversed())return e;const a=s?.getAxisLinePoints()?.points??[];return e.concat(...a)}hasItemStylers(){return this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}resetPaths(){super.resetPaths();const e=this.getAreaNode();if(e){const{path:t}=e,i=this.getAreaPoints(),s=EM(this.properties.fill,this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults),o=this.getShapeFillBBox();nu(e,{fill:s,stroke:void 0,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset},o),e.lineJoin=e.lineCap="round",t.clear(!0),i.forEach(({x:a,y:n,moveTo:r,arc:l,radius:c=0,startAngle:h=0,endAngle:u=0})=>{l?t.arc(a,n,c,h,u):r?t.moveTo(a,n):t.lineTo(a,n)}),t.closePath(),e.checkPathDirty()}}};na.className="RadarAreaSeries",na.type="radar-area";import{_ModuleSupport as BM}from"ag-charts-community";import{constant as GM,required as hr,string as ra}from"ag-charts-core";var{commonSeriesOptionsDefs:VM,radarAreaSeriesThemeableOptionsDef:KM}=BM,WM={...VM,...KM,type:hr(GM("radar-area")),angleKey:hr(ra),radiusKey:hr(ra),angleName:ra,radiusName:ra},{ThemeConstants:{POLAR_AXIS_TYPE:ru}}=ZA,NC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",moduleFactory:e=>new na(e),defaultAxes:[{type:ru.ANGLE_CATEGORY},{type:ru.RADIUS_NUMBER}],themeTemplate:tM},lu={type:"series",name:"radar-area",chartType:"polar",enterprise:!0,options:WM,create:e=>new na(e)};import{_ModuleSupport as zM}from"ag-charts-community";var la=class extends pr{hasItemStylers(){return this.properties.marker.itemStyler!=null||this.properties.label.itemStyler!=null}updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};la.className="RadarLineSeries",la.type="radar-line";import{_ModuleSupport as HM}from"ag-charts-community";import{constant as $M,required as ur,string as ca}from"ag-charts-core";var{commonSeriesOptionsDefs:XM,radarLineSeriesThemeableOptionsDef:YM}=HM,UM={...XM,...YM,type:ur($M("radar-line")),angleKey:ur(ca),radiusKey:ur(ca),angleName:ca,radiusName:ca},{POLAR_AXIS_TYPE:cu}=zM.ThemeConstants,PC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",moduleFactory:e=>new la(e),defaultAxes:[{type:cu.ANGLE_CATEGORY},{type:cu.RADIUS_NUMBER}],themeTemplate:eM},pu={type:"series",name:"radar-line",chartType:"polar",enterprise:!0,options:UM,create:e=>new la(e)};import{_ModuleSupport as qM}from"ag-charts-community";import{_ModuleSupport as Fs}from"ag-charts-community";import{isDefined as jM}from"ag-charts-core";function JM(e){return typeof e?.datum=="object"?e.datum:null}import{_ModuleSupport as ZM}from"ag-charts-community";var{SeriesProperties:QM,FillGradientDefaults:e2,FillPatternDefaults:t2,FillImageDefaults:i2,makeSeriesTooltip:s2,Property:we,Label:o2}=ZM,Re=class extends QM{constructor(){super(...arguments),this.fill="black",this.fillGradientDefaults=new e2,this.fillPatternDefaults=new t2,this.fillImageDefaults=new i2,this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new o2,this.tooltip=s2()}getStyle(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,cornerRadius:r}=this;return{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:o,lineDash:a,lineDashOffset:n,cornerRadius:r,opacity:1}}};p([we],Re.prototype,"angleKey",2),p([we],Re.prototype,"radiusKey",2),p([we],Re.prototype,"angleName",2),p([we],Re.prototype,"radiusName",2),p([we],Re.prototype,"fill",2),p([we],Re.prototype,"fillGradientDefaults",2),p([we],Re.prototype,"fillPatternDefaults",2),p([we],Re.prototype,"fillImageDefaults",2),p([we],Re.prototype,"fillOpacity",2),p([we],Re.prototype,"stroke",2),p([we],Re.prototype,"strokeWidth",2),p([we],Re.prototype,"strokeOpacity",2),p([we],Re.prototype,"lineDash",2),p([we],Re.prototype,"lineDashOffset",2),p([we],Re.prototype,"cornerRadius",2),p([we],Re.prototype,"itemStyler",2),p([we],Re.prototype,"rotation",2),p([we],Re.prototype,"stackGroup",2),p([we],Re.prototype,"normalizedTo",2),p([we],Re.prototype,"label",2),p([we],Re.prototype,"tooltip",2);import{_ModuleSupport as a2}from"ag-charts-community";var{SectorBox:hu,motion:n2}=a2;function r2(e,t,i){if(i==="updated"){if(e.previousDatum==null||isNaN(e.previousDatum.innerRadius)||isNaN(e.previousDatum.outerRadius))return"added";if(isNaN(t.innerRadius)||isNaN(t.outerRadius))return"removed"}return i==="added"&&e.previousDatum!=null?"updated":i}function uu(e){return{toFn:(s,o,a)=>{let n,r,l,c,h;return a==="removed"?(n=e,r=e,l=o.innerRadius,c=o.outerRadius,h=new hu(n,r,l,c)):(n=o.startAngle,r=o.endAngle,l=isNaN(o.innerRadius)?s.innerRadius:o.innerRadius,c=isNaN(o.outerRadius)?s.outerRadius:o.outerRadius,h=o.clipSector),{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h}},fromFn:(s,o,a)=>{a=r2(s,o,a);let n,r,l,c,h;a==="removed"||a==="updated"?(n=s.startAngle,r=s.endAngle,l=s.innerRadius,c=s.outerRadius,h=s.clipSector):(n=e,r=e,l=o.innerRadius,c=o.outerRadius),h??(h=new hu(n,r,l,c));const u=n2.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a];return{startAngle:n,endAngle:r,innerRadius:l,outerRadius:c,clipSector:h,phase:u}}}}function l2(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle,clipSector:t.clipSector}}var{DEFAULT_POLAR_DIRECTION_KEYS:c2,DEFAULT_POLAR_DIRECTION_NAMES:p2,ChartAxisDirection:Nt,PolarAxis:h2,diff:u2,groupAccumulativeValueProperty:du,keyProperty:d2,normaliseGroupTo:g2,valueProperty:f2,fixNumericExtent:y2,resetLabelFn:m2,seriesLabelFadeInAnimation:S2,seriesLabelFadeOutAnimation:x2,animationValidation:b2,angleBetween:D2,createDatumId:gu,CategoryScale:v2,Sector:k2,SectorBox:I2,motion:fu,isGradientFill:A2,applyShapeStyle:M2,getShapeStyle:dr,updateLabelNode:N2,mergeDefaults:yu}=Fs,L2=class extends Fs.SeriesNodeEvent{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey}},pa=class extends Fs.PolarSeries{constructor(e){super({moduleCtx:e,categoryKey:"radiusValue",propertyKeys:c2,propertyNames:p2,canHaveAxes:!0,animationResetFns:{item:l2,label:m2}}),this.properties=new Re,this.NodeEvent=L2,this.groupScale=new v2,this.circleCache={r:0,cx:0,cy:0}}get defaultShapeStyle(){const e=this.axes[Nt.Angle]?.scale;return{...this.properties.fillGradientDefaults.toJson(),rotation:Fs.toDegrees(e.range[0])+90}}nodeFactory(){return new k2}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Nt.Angle){const s=t.getDomain(this,"angleValue-end","value",i),o=[s[0]>0?0:s[0],s[1]<0?0:s[1]];return y2(o)}else return t.getDomain(this,"radiusValue","key",i)}async processData(e){const{angleKey:t,radiusKey:i,normalizedTo:s}=this.properties,o=!this.ctx.animationManager.isSkipped(),a=this.getStackId(),n=`${a}-trailing`,r=[];jM(s)&&r.push(g2([a,n],Math.abs(s))),o&&(this.processedData&&r.push(u2(this.id,this.processedData)),r.push(b2()));const l=this.visible?{}:{forceValue:0},c=this.axes[Nt.Radius]?.scale.type,h=this.axes[Nt.Angle]?.scale.type;await this.requestDataModel(e,this.data,{props:[d2(i,c,{id:"radiusValue"}),f2(t,h,{id:"angleValue-raw",invalidValue:null,...l}),...du(t,"normal","current",{id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:a,separateNegative:!0,...l},h),...du(t,"trailing","current",{id:"angleValue-start",invalidValue:null,groupId:n,separateNegative:!0,...l},h),...r],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,s=this.circleCache;return e===s.r&&t===s.cx&&i===s.cy?!1:(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=this.createNodeData()??{};this.nodeData=t,this.nodeDataRefresh=!1}getAxisInnerRadius(){const e=this.axes[Nt.Radius];return e instanceof h2?this.radius*e.innerRadiusRatio:0}createNodeData(){const{processedData:e,dataModel:t}=this;if(!t||!e||e.type!=="grouped")return;const i=this.axes[Nt.Angle],s=this.axes[Nt.Radius],o=i?.scale,a=s?.scale;if(!o||!a)return;const n=t.resolveKeysById(this,"radiusValue",e),r=t.resolveColumnById(this,"angleValue-start",e),l=t.resolveColumnById(this,"angleValue-end",e),c=t.resolveColumnById(this,"angleValue-raw",e),h=t.resolveProcessedDataIndexById(this,"angleValue-range");let u=0;s instanceof ni&&(u=s.groupPaddingInner);const{groupScale:d}=this,{index:g,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);d.domain=Array.from({length:y}).map((_,P)=>String(P)),d.range=[0,Math.abs(a.bandwidth??0)],d.paddingInner=y>1?u:0;const f=d.bandwidth>=1?d.bandwidth:d.rawBandwidth,m=i.isReversed(),S=s.isReversed(),D=S?this.radius:this.getAxisInnerRadius(),x=(S?this.getAxisInnerRadius():this.radius)+D,k=this.getSeriesDomain(Nt.Angle),{angleKey:I,radiusKey:A,angleName:v,radiusName:N,label:L}=this.properties,M=(_,P,O,E)=>{const F=this.getLabelText(P,_,I,"angle",k,L,{value:P,datum:_,angleKey:I,radiusKey:A,angleName:v,radiusName:N});if(F)return{x:O,y:E,text:F,textAlign:"center",textBaseline:"middle"}},R=[],C={itemId:A,nodeData:R,labelData:R};if(!this.visible)return C;const{dataSources:w}=e,T=w.get(this.id)??[];for(const{datumIndex:_,group:P}of t.forEachGroupDatum(this,e)){const O=T[_],E=n[_];if(E==null)return;const F=c[_],B=r[_],G=l[_],V=F>=0&&!Object.is(F,-0),K=P.aggregation[h][V?1:0],W=V===m;let $=o.convert(B,{clamp:!0}),X=o.convert(G,{clamp:!0}),q=o.convert(0,{clamp:!0}),Z=o.convert(K,{clamp:!0});W&&([q,Z]=[Z,q],[$,X]=[X,$]);const j=x-a.convert(E)+d.convert(String(g)),Y=j+f,oe=(j+Y)/2,ue=$+D2($,X)/2,ie=Math.cos(ue)*oe,J=Math.sin(ue)*oe,Se=this.properties.label.enabled?M(O,F,ie,J):void 0,le=new I2($,X,j,Y);R.push({series:this,datum:O,datumIndex:_,point:{x:ie,y:J,size:0},midPoint:{x:ie,y:J},label:Se,angleValue:F,radiusValue:E,innerRadius:j,outerRadius:Y,startAngle:q,endAngle:Z,clipSector:le,reversed:W,index:_})}return C}update({seriesRect:e}){const t=this.checkResize(e);this.maybeRefreshNodeData(),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),this.updateSectorSelection(this.itemSelection,!1),this.updateSectorSelection(this.highlightSelection,!0),this.updateLabels(),t&&this.animationState.transition("resize"),this.animationState.transition("update")}getItemStyle(e,t){const{id:i,properties:s}=this,{angleKey:o,radiusKey:a,itemStyler:n,fillGradientDefaults:r,fillPatternDefaults:l,fillImageDefaults:c}=s,h=this.getHighlightStyle(t,e.datumIndex),u=yu(h,s.getStyle());let d=dr(u,r,l,c);if(n!=null&&e!=null){const g=this.cachedDatumCallback(gu(this.getDatumId(e),t?"highlight":"node"),()=>{const y=this.ctx.highlightManager?.getActiveHighlight(),f=this.getHighlightStateString(y,t,e.datumIndex);return this.callWithContext(n,{seriesId:i,datum:e.datum,highlighted:t,highlightState:f,angleKey:o,radiusKey:a,...d})});g&&(d=dr(yu(g,d),r,l,c))}return d}updateSectorSelection(e,t){let i=[];if(t){const o=this.ctx.highlightManager?.getActiveHighlight();o?.datum&&o.series===this&&i.push(o)}else i=this.nodeData;const s=this.getShapeFillBBox();e.update(i,void 0,o=>this.getDatumId(o)).each((o,a)=>{const n=JM(a);if(n==null)return;const r=this.getItemStyle(a,t),l=r.cornerRadius,c=r.fill,h=Fs.isGradientFill(c)&&c.bounds!=="item"?{centerX:0,centerY:0}:void 0;M2(o,r,s,h),o.lineJoin="round",o.inset=o.stroke!=null?o.strokeWidth/2:0,o.startInnerCornerRadius=n.reversed?l:0,o.startOuterCornerRadius=n.reversed?l:0,o.endInnerCornerRadius=n.reversed?0:l,o.endOuterCornerRadius=n.reversed?0:l,t&&(o.startAngle=a.startAngle,o.endAngle=a.endAngle,o.clipSector=a.clipSector,o.innerRadius=a.innerRadius,o.outerRadius=a.outerRadius)})}updateLabels(){this.labelSelection.update(this.nodeData).each((e,t)=>{const s=this.ctx.highlightManager?.getActiveHighlight(),o=this.getHighlightStateString(s,!1,t.datumIndex);N2(this,e,this.properties,this.properties.label,t.label,!1,o),e.fillOpacity=this.getHighlightStyle(!1,t.datumIndex).opacity??1})}getBarTransitionFunctions(){const e=this.axes[Nt.Angle]?.scale;let t=0;if(!e)return uu(t);const i=Math.min(e.domain[0],e.domain[1]),s=Math.max(e.domain[0],e.domain[1]);return i<=0&&s>=0&&(t=e.convert(0)),uu(t)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();fu.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),S2(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();fu.fromToMotion(this.id,"datums",t,[e],i),x2(this,"labels",t,this.labelSelection)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:o,properties:a}=this,{angleKey:n,angleName:r,radiusKey:l,radiusName:c,tooltip:h}=a,u=o[Nt.Angle],d=o[Nt.Radius],g=this.nodeData?.[e];if(!i||!s||!u||!d||!g)return;const y=s.dataSources.get(this.id)?.[e],f=i.resolveKeysById(this,"radiusValue",s)[e],m=i.resolveColumnById(this,"angleValue-raw",s)[e];if(f==null)return;const S=this.getItemStyle(g,!1);return this.formatTooltipWithContext(h,{heading:this.getAxisValueText(d,"tooltip",f,y,l,void 0),symbol:this.legendItemSymbol(),data:[{label:r,fallbackLabel:n,value:this.getAxisValueText(u,"tooltip",m,y,n,void 0)}]},{seriesId:t,datum:y,title:r,angleKey:n,angleName:r,radiusKey:l,radiusName:c,...S})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:n,fillPatternDefaults:r,fillImageDefaults:l}=this.properties,c=dr({fill:e??"rgba(0, 0, 0, 0)",stroke:t??"rgba(0, 0, 0, 0)",fillOpacity:i,strokeOpacity:s,strokeWidth:o,lineDash:a,lineDashOffset:n},this.defaultShapeStyle,r,l);return A2(c.fill)&&(c.fill={...c.fill,gradient:"linear",rotation:0,reverse:!1}),{marker:c}}getLegendData(e){if(e!=="category")return[];const{id:t,visible:i}=this,{angleKey:s,angleName:o,showInLegend:a}=this.properties;return[{legendType:"category",id:t,itemId:s,seriesId:t,enabled:i,label:{text:o??s},symbol:this.legendItemSymbol(),hideInLegend:!a}]}getDatumId(e){return gu(e.radiusValue)}computeLabelsBBox(){return null}getStackId(){return`radialBar-stack-${this.seriesGrouping?.groupIndex??this.id}-xValues`}hasItemStylers(){return this.properties.itemStyler!=null}};pa.className="RadialBarSeries",pa.type="radial-bar";import{_ModuleSupport as T2}from"ag-charts-community";import{boolean as mu,constant as R2,number as P2,required as gr,string as Bs}from"ag-charts-core";var{commonSeriesOptionsDefs:C2,radialBarSeriesThemeableOptionsDef:_2}=T2,w2={...C2,..._2,type:gr(R2("radial-bar")),angleKey:gr(Bs),radiusKey:gr(Bs),angleName:Bs,radiusName:Bs,grouped:mu,stacked:mu,stackGroup:Bs,normalizedTo:P2};import{_ModuleSupport as es}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:E2}}=es,O2={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:es.FILL_GRADIENT_CONIC_DEFAULTS,fillPatternDefaults:es.FILL_PATTERN_DEFAULTS,fillImageDefaults:es.FILL_IMAGE_DEFAULTS,strokeWidth:{$isUserOption:["./stroke",1,0]},label:{...es.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"}},highlight:es.multiSeriesHighlightStyle()},axes:{[E2.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},{POLAR_AXIS_TYPE:Su}=qM.ThemeConstants,VC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",moduleFactory:e=>new pa(e),defaultAxes:[{type:Su.ANGLE_NUMBER},{type:Su.RADIUS_CATEGORY}],themeTemplate:O2,stackable:!0,groupable:!0},xu={type:"series",name:"radial-bar",chartType:"polar",enterprise:!0,options:w2,create:e=>new pa(e)};import{_ModuleSupport as F2}from"ag-charts-community";import{_ModuleSupport as B2}from"ag-charts-community";import{_ModuleSupport as G2}from"ag-charts-community";var{Property:bu}=G2,fr=class extends Ae{};p([bu],fr.prototype,"columnWidthRatio",2),p([bu],fr.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:V2,PolarAxis:K2,RadialColumnShape:W2,getRadialColumnWidth:z2}=B2,ha=class extends wh{constructor(e){super(e,{animationResetFns:{item:yA}}),this.properties=new fr}getStackId(){return`radarColumn-stack-${this.seriesGrouping?.groupIndex??this.id}-yValues`}nodeFactory(){return new W2}getColumnTransitionFunctions(){const e=this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius();return fA(e)}isRadiusAxisCircle(){const e=this.axes[V2.Radius];return e instanceof K2?e.shape==="circle":!1}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),e.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:s=.5}=this.properties;return z2(e,t,this.radius,i,s)}hasItemStylers(){return this.properties.itemStyler!=null}};ha.className="RadialColumnSeries",ha.type="radial-column";import{_ModuleSupport as H2}from"ag-charts-community";import{boolean as Du,constant as $2,number as X2,required as yr,string as Gs}from"ag-charts-core";var{commonSeriesOptionsDefs:Y2,radialColumnSeriesThemeableOptionsDef:U2}=H2,q2={...Y2,...U2,type:yr($2("radial-column")),angleKey:yr(Gs),radiusKey:yr(Gs),angleName:Gs,radiusName:Gs,grouped:Du,stacked:Du,stackGroup:Gs,normalizedTo:X2};import{_ModuleSupport as ts}from"ag-charts-community";var{ThemeConstants:{POLAR_AXIS_TYPE:vu,POLAR_AXIS_SHAPE:ku}}=ts,j2={series:{fill:{$palette:"fill"},stroke:{$palette:"stroke"},fillGradientDefaults:ts.FILL_GRADIENT_RADIAL_SERIES_DEFAULTS,fillPatternDefaults:ts.FILL_PATTERN_DEFAULTS,fillImageDefaults:ts.FILL_IMAGE_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:{$isUserOption:["./stroke",1,0]},label:{...ts.LABEL_BOXING_DEFAULTS,enabled:!1,fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"}},highlight:ts.multiSeriesHighlightStyle()},axes:{[vu.ANGLE_CATEGORY]:{shape:{$findFirstSiblingNotOperation:ku.CIRCLE},groupPaddingInner:0,paddingInner:0,label:{spacing:10}},[vu.RADIUS_NUMBER]:{shape:{$findFirstSiblingNotOperation:ku.CIRCLE},innerRadiusRatio:.5}}},{POLAR_AXIS_TYPE:Iu}=F2.ThemeConstants,YC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",moduleFactory:e=>new ha(e),defaultAxes:[{type:Iu.ANGLE_CATEGORY},{type:Iu.RADIUS_NUMBER}],themeTemplate:j2,stackable:!0,groupable:!0},Au={type:"series",name:"radial-column",chartType:"polar",enterprise:!0,options:q2,create:e=>new ha(e)};import{_ModuleSupport as is}from"ag-charts-community";import{_ModuleSupport as vi}from"ag-charts-community";import{_ModuleSupport as J2}from"ag-charts-community";var{SvgPath:Z2,Rotatable:Q2,Translatable:eN,Scalable:tN}=J2,mr=class extends Q2(tN(eN(Z2))){constructor(){super(...arguments),this.scalingCenterX=.5,this.scalingCenterY=.5,this.rotationCenterX=.5,this.rotationCenterY=.5}};mr.defaultPathData="M0.50245 0.53745C0.481767 0.53745 0.465 0.520683 0.465 0.5C0.465 0.479317 0.481767 0.46255 0.50245 0.46255L1 0.500012L0.50245 0.53745Z";import{_ModuleSupport as Sr}from"ag-charts-community";var{BaseProperties:Vs,makeSeriesTooltip:iN,SeriesProperties:sN,PropertiesArray:xr,AxisLabel:oN,Property:z,Label:aN}=Sr,Mu=class extends aN{};p([z],Mu.prototype,"spacing",2);var Xe=class extends Vs{constructor(){super(...arguments),this.label=new Mu}};p([z],Xe.prototype,"text",2),p([z],Xe.prototype,"value",2),p([z],Xe.prototype,"shape",2),p([z],Xe.prototype,"placement",2),p([z],Xe.prototype,"spacing",2),p([z],Xe.prototype,"size",2),p([z],Xe.prototype,"rotation",2),p([z],Xe.prototype,"fill",2),p([z],Xe.prototype,"fillOpacity",2),p([z],Xe.prototype,"stroke",2),p([z],Xe.prototype,"strokeWidth",2),p([z],Xe.prototype,"strokeOpacity",2),p([z],Xe.prototype,"lineDash",2),p([z],Xe.prototype,"lineDashOffset",2),p([z],Xe.prototype,"label",2);var Lt=class extends Vs{constructor(){super(...arguments),this.enabled=!0,this.fills=new xr(Sr.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([z],Lt.prototype,"enabled",2),p([z],Lt.prototype,"fills",2),p([z],Lt.prototype,"fillMode",2),p([z],Lt.prototype,"fill",2),p([z],Lt.prototype,"fillOpacity",2),p([z],Lt.prototype,"stroke",2),p([z],Lt.prototype,"strokeWidth",2),p([z],Lt.prototype,"strokeOpacity",2),p([z],Lt.prototype,"lineDash",2),p([z],Lt.prototype,"lineDashOffset",2);var Ks=class extends Vs{constructor(){super(...arguments),this.values=void 0,this.step=void 0,this.minSpacing=0,this.maxSpacing=1e3}};p([z],Ks.prototype,"values",2),p([z],Ks.prototype,"step",2),p([z],Ks.prototype,"minSpacing",2),p([z],Ks.prototype,"maxSpacing",2);var nN=class extends oN{},tt=class extends Vs{constructor(){super(...arguments),this.min=0,this.max=1,this.fills=new xr(Sr.StopProperties),this.fillMode="continuous",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.defaultFill="black",this.interval=new Ks,this.label=new nN}};p([z],tt.prototype,"min",2),p([z],tt.prototype,"max",2),p([z],tt.prototype,"fills",2),p([z],tt.prototype,"fillMode",2),p([z],tt.prototype,"fill",2),p([z],tt.prototype,"fillOpacity",2),p([z],tt.prototype,"stroke",2),p([z],tt.prototype,"strokeWidth",2),p([z],tt.prototype,"strokeOpacity",2),p([z],tt.prototype,"lineDash",2),p([z],tt.prototype,"lineDashOffset",2),p([z],tt.prototype,"defaultFill",2),p([z],tt.prototype,"interval",2),p([z],tt.prototype,"label",2);var Tt=class extends Vs{constructor(){super(...arguments),this.enabled=!0,this.spacing=0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=0,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};p([z],Tt.prototype,"enabled",2),p([z],Tt.prototype,"radiusRatio",2),p([z],Tt.prototype,"spacing",2),p([z],Tt.prototype,"fill",2),p([z],Tt.prototype,"fillOpacity",2),p([z],Tt.prototype,"stroke",2),p([z],Tt.prototype,"strokeWidth",2),p([z],Tt.prototype,"strokeOpacity",2),p([z],Tt.prototype,"lineDash",2),p([z],Tt.prototype,"lineDashOffset",2);var Nu=class extends wt{};p([z],Nu.prototype,"text",2);var Lu=class extends Ds{};p([z],Lu.prototype,"text",2);var Ee=class extends sN{constructor(){super(...arguments),this.startAngle=0,this.endAngle=0,this.segmentation=new Rs,this.defaultColorRange=[],this.targets=new xr(Xe),this.defaultTarget=new Xe,this.outerRadiusRatio=1,this.innerRadiusRatio=1,this.cornerRadius=0,this.cornerMode="container",this.spacing=0,this.scale=new tt,this.bar=new Lt,this.needle=new Tt,this.label=new Nu,this.secondaryLabel=new Lu,this.tooltip=iN()}};p([z],Ee.prototype,"value",2),p([z],Ee.prototype,"startAngle",2),p([z],Ee.prototype,"endAngle",2),p([z],Ee.prototype,"segmentation",2),p([z],Ee.prototype,"defaultColorRange",2),p([z],Ee.prototype,"targets",2),p([z],Ee.prototype,"defaultTarget",2),p([z],Ee.prototype,"outerRadiusRatio",2),p([z],Ee.prototype,"innerRadiusRatio",2),p([z],Ee.prototype,"outerRadius",2),p([z],Ee.prototype,"innerRadius",2),p([z],Ee.prototype,"cornerRadius",2),p([z],Ee.prototype,"cornerMode",2),p([z],Ee.prototype,"spacing",2),p([z],Ee.prototype,"scale",2),p([z],Ee.prototype,"bar",2),p([z],Ee.prototype,"needle",2),p([z],Ee.prototype,"label",2),p([z],Ee.prototype,"secondaryLabel",2),p([z],Ee.prototype,"tooltip",2);import{_ModuleSupport as rN}from"ag-charts-community";var{SectorBox:br}=rN;function lN(e){const{startAngle:t,endAngle:i,clipStartAngle:s,clipEndAngle:o,innerRadius:a,outerRadius:n}=e;if(!(s==null||o==null))return new br(Math.max(s,t),Math.min(o,i),a,n)}function Tu(e,t,i){return Math.max(e,i.startAngle)<=Math.min(t,i.endAngle)}function Dr(e){return e.clipStartAngle!=null&&e.clipEndAngle!=null}function vr(e,t){const{clipStartAngle:i,clipEndAngle:s,innerRadius:o,outerRadius:a}=e;return new br(i,t?i:s,o,a)}function Ru(e,t){const i=e?"initial":"update";return{node:{fromFn(a,n){const r=a.previousDatum;let{startAngle:l,endAngle:c}=r??n;const h=r!=null&&Dr(r)?vr(r,e):void 0,u=Dr(n)?vr(n,e):void 0;let d;return h!=null&&u!=null?d=h:h==null&&u!=null?(d=u,l=n.startAngle,c=n.endAngle):h!=null&&u==null?(d=void 0,l=n.startAngle,c=n.endAngle):e&&(c=l),{startAngle:l,endAngle:c,clipSector:d,phase:i}},toFn(a,n){const{startAngle:r,endAngle:l}=n;let c;return Dr(n)&&(c=vr(n,!1)),{startAngle:r,endAngle:l,clipSector:c}},applyFn(a,n){const{startAngle:r,endAngle:l}=n;let{clipSector:c}=n;c!=null&&(c=new br(Math.max(r,c.startAngle),Math.min(l,c.endAngle),c.innerRadius,c.outerRadius));const h=c==null||Tu(r,l,c);a.startAngle=r,a.endAngle=l,a.clipSector=c,a.visible=h}},needle:{fromFn(a){let{angle:n}=a.previousDatum??a.datum;return e&&(n=t),{rotation:n,phase:i}},toFn(a,n){const{angle:r}=n;return{rotation:r}}}}}function kr(e,t){const{startAngle:i,endAngle:s}=t,o=lN(t),a=o==null||Tu(i,s,o);return{startAngle:i,endAngle:s,clipSector:o,visible:a}}function Pu(e,t){const{angle:i}=t;return{rotation:i}}var cN={top:0,middle:.5,bottom:1};function pN(e,t,i,s,o,a){const{padding:n,textAlign:r,verticalAlign:l}=s;let c,h;if(i.each((k,I)=>{I.label==="primary"?c=I:I.label==="secondary"&&(h=I)}),c==null)return;const u=Ts(e.id,t,c,a?.label);if(u==null)return;const d=h!=null?Ts(e.id,t,h,a?.secondaryLabel):void 0,g={padding:n},y=r==="center"?2:1,f=l==="middle"?2:1,m=k=>({width:Math.sqrt(Math.max(o**2-(k/f)**2,0))*y,height:Math.min(k,f*o),meta:null});let S,D,b;if(h!=null&&d!=null){const k=ic(u,c,d,h,g,m);S=k?.label,D=k?.secondaryLabel,b=k?.height??0}else{const k=xs(u,c,g,m);S=k?.[0],D=void 0,b=k?.[0].height??0}const x=b*cN[l];i.each((k,I)=>{let A;if(I.label==="primary"?A=S:I.label==="secondary"&&(A=D),A==null){k.visible=!1;return}k.visible=!0,k.text=A.text,k.fontSize=A.fontSize,k.lineHeight=A.lineHeight,k.textAlign=r,k.textBaseline="middle";const v=I.label==="primary"?A.height/2:b-A.height/2;k.y=I.centerY+v-x,k.x=I.centerX})}var{fromToMotion:Ws,resetMotion:Cu,CachedTextMeasurerPool:hN,SeriesNodePickMode:_u,StateMachine:uN,createDatumId:Ir,normalizeAngle360:wu,normalizeAngle360Inclusive:Ar,isBetweenAngles:ua,sectorBox:dN,toDegrees:gN,toRadians:da,BBox:fN,Group:Qt,PointerEvents:ga,Selection:ei,Sector:yN,SectorBox:mN,Text:Eu,Marker:SN,getColorStops:xN,tickFormat:bN,applyShapeStyle:DN,mergeDefaults:vN}=vi,kN={inside:90,middle:0,outside:-90},IN=[{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"},{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"}],AN=[{textAlign:"right",textBaseline:"bottom"},{textAlign:"left",textBaseline:"bottom"},{textAlign:"left",textBaseline:"top"},{textAlign:"right",textBaseline:"top"}],fa=class extends vi.Series{constructor(e){super({moduleCtx:e,pickModes:[_u.EXACT_SHAPE_MATCH,_u.NEAREST_NODE]}),this.centerX=0,this.centerY=0,this.radius=0,this.textAlign="center",this.verticalAlign="middle",this.properties=new Ee,this.scale=new $r,this.scaleGroup=this.contentGroup.appendChild(new Qt({name:"scaleGroup"})),this.itemGroup=this.contentGroup.appendChild(new Qt({name:"itemGroup"})),this.itemNeedleGroup=this.contentGroup.appendChild(new Qt({name:"itemNeedleGroup"})),this.itemTargetGroup=this.contentGroup.appendChild(new Qt({name:"itemTargetGroup"})),this.itemTargetLabelGroup=this.contentGroup.appendChild(new Qt({name:"itemTargetLabelGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Qt({name:"itemLabelGroup"})),this.highlightTargetGroup=this.highlightGroup.appendChild(new Qt({name:"itemTargetLabelGroup"})),this.tickGroup=this.contentGroup.appendChild(new Qt({name:"tickGroup"})),this.scaleSelection=ei.select(this.scaleGroup,()=>this.nodeFactory()),this.datumSelection=ei.select(this.itemGroup,()=>this.nodeFactory()),this.needleSelection=ei.select(this.itemNeedleGroup,mr),this.targetSelection=ei.select(this.itemTargetGroup,()=>this.markerFactory()),this.targetLabelSelection=ei.select(this.itemTargetLabelGroup,Eu),this.labelSelection=ei.select(this.itemLabelGroup,Eu),this.highlightTargetSelection=ei.select(this.highlightTargetGroup,()=>this.markerFactory()),this.tickSelection=ei.select(this.tickGroup,vi.TransformableText),this.datumUnion=new Rp,this.animationState=new uN("empty",{empty:{update:{target:"ready",action:()=>this.animateEmptyUpdateReady()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.animateReadyResize(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateWaitingUpdateReady()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty"},reset:"empty",skip:"ready"}}),this.scaleGroup.pointerEvents=ga.None,this.tickGroup.pointerEvents=ga.None,this.itemNeedleGroup.pointerEvents=ga.None,this.itemLabelGroup.pointerEvents=ga.None}get hasData(){return this.properties.value!=null}nodeFactory(){return new yN}markerFactory(){const e=new SN;return e.size=1,e}processData(){this.nodeDataRefresh=!0,this.animationState.transition("updateData")}formatLabel(e){const{min:t,max:i}=this.properties.scale;return Cp(e,{min:t,max:i})}layoutScale(){const{scale:e,properties:t}=this,{seriesRectWidth:i,seriesRectHeight:s}=this.nodeDataDependencies,{scale:o,outerRadius:a}=this.properties,{min:n,max:r,label:l,interval:c}=o,h=da(t.startAngle-90),u=da(t.endAngle-90),g=Ar(u-h)>Math.PI,y=g||ua(1.5*Math.PI,h,u),f=g||ua(0*Math.PI,h,u),m=g||ua(.5*Math.PI,h,u),S=g||ua(1*Math.PI,h,u);let D;S&&!f?D="right":!S&&f?D="left":D="center";let b;y&&!m?b="bottom":!y&&m?b="top":b="middle";const x=dN({startAngle:h,endAngle:u,innerRadius:0,outerRadius:.5}),k=-(x.x+x.width/2)*2,I=-(x.y+x.height/2)*2,A=Math.min(i/x.width,s/x.height);e.domain=[n,r],e.range=[h,u],e.arcLength=A/2;const{maxSpacing:v,minSpacing:N}=c,{arcLength:L}=e,M=v?Math.floor(L/v):1,R=N?Math.floor(L/N):1/0,C=Math.floor(4/Math.PI*Math.abs(e.range[0]-e.range[1])),w=Math.max(M,Math.min(R,C)),T=c.values??e.ticks({nice:!1,interval:c.step,minTickCount:M,maxTickCount:R,tickCount:w})?.ticks??[],_=bN(T,typeof l.format=="string"?l.format:void 0),P=hN.getMeasurer({font:l}),O=T.map((K,W)=>{let $;if(l.formatter&&($=_n(this.ctx,l.formatter,{value:K,index:W,domain:e.domain,boundSeries:void 0})),$??($=_?.(K)),$==null)return;const{width:X,height:q}=P.measureText($);return{index:W,value:K,text:$,width:X,height:q}}).filter(K=>K!=null),E=O.reduce((K,W)=>Math.max(K,W.width),0),F=O.reduce((K,W)=>Math.max(K,W.height),0),B=l.enabled?Math.max(E,F)+l.spacing:0,G=Math.max(.5*A-B,0),V=a??G;return this.centerX=i/2+k*V,this.centerY=s/2+I*V,this.radius=V,this.textAlign=D,this.verticalAlign=b,O}createConicGradient(e,t){const{scale:i}=this,{domain:s,range:o}=i,[a,n]=o,{defaultColorRange:r}=this.properties,l=wu((a+n)/2+Math.PI),c=Ar(n-a);return{type:"gradient",gradient:"conic",colorSpace:"oklch",colorStops:xN(e,r,s,t).map(({color:u,stop:d})=>(d=Math.min(Math.max(d,0),1),d=(a+c*d-l)/(2*Math.PI),d=(d%1+1)%1,{stop:d,color:u})),rotation:gN(l)+90}}getShapeFillBBox(){const{centerX:e,centerY:t,radius:i}=this;return new fN(e-i,t-i,2*i,2*i)}getTargets(){const{properties:e}=this,t=e.defaultTarget;return Array.from(e.targets).map(i=>{const{text:s=t.text,value:o=t.value??0,shape:a=t.shape??"triangle",rotation:n=t.rotation??0,strokeWidth:r=t.strokeWidth??0,placement:l=t.placement??"middle",spacing:c=t.spacing??0,size:h=t.size??0,fill:u=t.fill??"black",fillOpacity:d=t.fillOpacity??1,stroke:g=t.stroke??"black",strokeOpacity:y=t.strokeOpacity??1,lineDash:f=t.lineDash??[0],lineDashOffset:m=t.lineDashOffset??0}=i,{enabled:S=t.label.enabled,color:D=t.label.color??"black",fontStyle:b=t.label.fontStyle??"normal",fontWeight:x=t.label.fontWeight??"normal",fontSize:k=t.label.fontSize,fontFamily:I=t.label.fontFamily,spacing:A=t.label.spacing??0}=i.label;return{text:s,value:o,shape:a,placement:l,spacing:c,size:h,rotation:n,fill:u,fillOpacity:d,stroke:g,strokeWidth:r,strokeOpacity:y,lineDash:f,lineDashOffset:m,label:{enabled:S,color:D,fontStyle:b,fontWeight:x,fontSize:k,fontFamily:I,spacing:A}}})}getTargetRadius(e){const{radius:t,properties:i}=this,{innerRadiusRatio:s,outerRadiusRatio:o}=i,{placement:a,spacing:n,size:r}=e,l=t*o,c=t*s;switch(a){case"inside":return Math.max(c-n-r/2,0);case"outside":return l+n+r/2;default:return(c+l)/2}}getTargetLabel(e){const{scale:t}=this,{value:i,size:s,placement:o,label:a}=e,{spacing:n,color:r,fontStyle:l,fontWeight:c,fontSize:h,fontFamily:u}=a,d=void 0,g=t.convert(i),y=wu(g)/(Math.PI/2)|0,f=s/2+n;let m,S,D,b;switch(o){case"outside":({textAlign:m,textBaseline:S}=IN[y]),D=f*Math.cos(g),b=f*Math.sin(g);break;case"inside":({textAlign:m,textBaseline:S}=AN[y]),D=-f*Math.cos(g),b=-f*Math.sin(g);break;default:m="center",S="bottom",D=0,b=-f;break}return{offsetX:D,offsetY:b,fill:r,textAlign:m,textBaseline:S,fontStyle:l,fontWeight:c,fontSize:h,fontFamily:u,lineHeight:d}}createNodeData(){const e=this.layoutScale(),{id:t,scale:i,properties:s,radius:o,centerX:a,centerY:n}=this,{value:r,innerRadiusRatio:l,outerRadiusRatio:c,segmentation:h,cornerRadius:u,cornerMode:d,needle:g,bar:y,scale:f,label:m,secondaryLabel:S}=s,{outerRadius:D=o*c,innerRadius:b=o*l}=s,x=this.getTargets(),k=[],I=[],A=[],v=[],N=[],L=d==="item",M=i.convert(i.domain[0]),R=i.convert(r),C=Math.ceil(Ar(R-M)*o);let w=h.enabled?h.interval.getSegments(i,C):void 0;const T=y.enabled?y.fill??this.createConicGradient(y.fills,y.fillMode):"rgba(0,0,0,0)",_=f.fill??(y.enabled&&f.fills.length===0?f.defaultFill:void 0)??this.createConicGradient(f.fills,f.fillMode);if(w==null&&L){const P=Math.min(...i.domain),O=Math.max(...i.domain),E={value:r,segmentStart:P,segmentEnd:O},B=Math.min(u,(D-b)/2)/((b+D)/2);k.push({series:this,itemId:"value",datum:E,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:D,innerRadius:b,startAngle:M-B,endAngle:R+B,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,fill:T}),N.push({series:this,itemId:"scale",datum:E,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:D,innerRadius:b,startAngle:i.range[0]-B,endAngle:i.range[1]+B,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:u,endCornerRadius:u,fill:_})}else{w??(w=i.domain);for(let P=0;P<w.length-1;P++){const O=w[P],E=w[P+1],F={value:r,segmentStart:O,segmentEnd:E},B=P===0,G=P===w.length-2,V=i.convert(O),K=i.convert(E);k.push({series:this,itemId:`value-${P}`,datum:F,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:D,innerRadius:b,startAngle:V,endAngle:K,clipStartAngle:M,clipEndAngle:R,startCornerRadius:L||B?u:0,endCornerRadius:L||G?u:0,fill:T}),N.push({series:this,itemId:`scale-${P}`,datum:F,datumIndex:{type:0},type:0,centerX:a,centerY:n,outerRadius:D,innerRadius:b,startAngle:V,endAngle:K,clipStartAngle:void 0,clipEndAngle:void 0,startCornerRadius:L||B?u:0,endCornerRadius:L||G?u:0,fill:_})}}if(!g.enabled&&m.enabled){const{text:P,color:O,fontSize:E,minimumFontSize:F,fontStyle:B,fontWeight:G,fontFamily:V,lineHeight:K,formatter:W=$=>this.formatLabel($.value)}=m;v.push({label:"primary",centerX:a,centerY:n,text:P,value:r,fill:O,fontSize:E,minimumFontSize:F,fontStyle:B,fontWeight:G,fontFamily:V,lineHeight:K,formatter:W})}if(!g.enabled&&S.enabled){const{text:P,color:O,fontSize:E,minimumFontSize:F,fontStyle:B,fontWeight:G,fontFamily:V,lineHeight:K,formatter:W}=S;v.push({label:"secondary",centerX:a,centerY:n,text:P,value:r,fill:O,fontSize:E,minimumFontSize:F,fontStyle:B,fontWeight:G,fontFamily:V,lineHeight:K,formatter:W})}if(g.enabled){let P=g.radiusRatio!=null?o*g.radiusRatio:b;P=Math.max(P-g.spacing,0);const O=i.convert(r);A.push({centerX:a,centerY:n,radius:P,angle:O,series:this})}for(let P=0;P<x.length;P+=1){const O=x[P],{value:E,text:F,size:B,shape:G,fill:V,fillOpacity:K,stroke:W,strokeWidth:$,strokeOpacity:X,lineDash:q,lineDashOffset:Z}=O;if(E<Math.min(...i.domain)||E>Math.max(...i.domain))continue;const se=this.getTargetRadius(O),j=i.convert(E),Y=da(O.rotation+kN[O.placement]);I.push({series:this,itemId:`target-${P}`,midPoint:{x:se*Math.cos(j)+a,y:se*Math.sin(j)+n},datum:{value:E},datumIndex:{type:1,index:P},type:1,value:E,text:F,centerX:a,centerY:n,shape:G,radius:se,angle:j,rotation:Y,size:B,fill:V,fillOpacity:K,stroke:W,strokeOpacity:X,strokeWidth:$,lineDash:q,lineDashOffset:Z,label:this.getTargetLabel(O)})}return{itemId:t,nodeData:k,needleData:A,targetData:I,labelData:v,scaleData:N,tickData:e}}updateSelections(e){(this.nodeDataRefresh||e)&&(this.contextNodeData=this.createNodeData(),this.nodeDataRefresh=!1)}highlightDatum(e){if(e!=null&&e.series===this&&e.type===1)return e}update({seriesRect:e}){const{datumSelection:t,labelSelection:i,needleSelection:s,targetSelection:o,targetLabelSelection:a,scaleSelection:n,highlightTargetSelection:r,tickSelection:l}=this,c=this.checkResize(e);this.updateSelections(c),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();const h=this.contextNodeData?.nodeData??[],u=this.contextNodeData?.labelData??[],d=this.contextNodeData?.needleData??[],g=this.contextNodeData?.targetData??[],y=this.contextNodeData?.scaleData??[],f=this.contextNodeData?.tickData??[],m=this.highlightDatum(this.ctx.highlightManager.getActiveHighlight());this.scaleSelection=this.updateScaleSelection({scaleData:y,scaleSelection:n}),this.updateScaleNodes({scaleSelection:n}),this.needleSelection=this.updateNeedleSelection({needleData:d,needleSelection:s}),this.updateNeedleNodes({needleSelection:s}),this.targetSelection=this.updateTargetSelection({targetData:g,targetSelection:o}),this.updateTargetNodes({targetSelection:o,isHighlight:!1}),this.targetLabelSelection=this.updateTargetLabelSelection({targetData:g,targetLabelSelection:a}),this.updateTargetLabelNodes({targetLabelSelection:a}),this.datumSelection=this.updateDatumSelection({nodeData:h,datumSelection:t}),this.updateDatumNodes({datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:u,labelSelection:i}),this.updateLabelNodes({labelSelection:i}),this.highlightTargetSelection=this.updateTargetSelection({targetData:m!=null?[m]:[],targetSelection:r}),this.updateTargetNodes({targetSelection:r,isHighlight:!0}),this.tickSelection=this.updateTickSelection({tickData:f,tickSelection:l}),this.updateTickNodes({tickSelection:l}),c&&this.animationState.transition("resize"),this.animationState.transition("update")}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>Ir(e.nodeData.length,t.itemId))}updateDatumNodes(e){const{datumSelection:t}=e,{ctx:i,properties:s}=this,{bar:o,segmentation:a}=s,n=a.spacing??0,{fillOpacity:r,stroke:l,strokeOpacity:c,lineDash:h,lineDashOffset:u}=o,d=o.strokeWidth,g=i.animationManager.isSkipped(),y=this.getShapeFillBBox();t.each((f,m)=>{const{centerX:S,centerY:D,innerRadius:b,outerRadius:x,startCornerRadius:k,endCornerRadius:I,fill:A}=m;f.centerX=S,f.centerY=D,f.innerRadius=b,f.outerRadius=x,f.pointerEvents=this.properties.bar.enabled?vi.PointerEvents.All:vi.PointerEvents.None,f.fill=A,f.fillBBox=y,f.fillOpacity=r,f.stroke=l,f.strokeOpacity=c,f.strokeWidth=d,f.lineDash=h,f.lineDashOffset=u,f.startOuterCornerRadius=k,f.startInnerCornerRadius=k,f.endOuterCornerRadius=I,f.endInnerCornerRadius=I,f.radialEdgeInset=(n+f.strokeWidth)/2,f.concentricEdgeInset=f.strokeWidth/2,(g||f.previousDatum==null)&&f.setProperties(kr(f,m))}),this.datumUnion.update(t,this.itemGroup,vi.Sector,(f,m,S)=>{f.clipSector??(f.clipSector=new mN(NaN,NaN,NaN,NaN)),f.centerX=m.centerX,f.centerY=m.centerY,f.outerRadius=f.clipSector.outerRadius=m.outerRadius,f.innerRadius=f.clipSector.innerRadius=m.innerRadius,f.startAngle=f.clipSector.startAngle=m.startAngle,f.startInnerCornerRadius=m.startInnerCornerRadius,f.startOuterCornerRadius=m.startOuterCornerRadius,f.endAngle=S.endAngle,f.clipSector.endAngle=S.clipSector?.endAngle??S.endAngle,f.endInnerCornerRadius=S.endInnerCornerRadius,f.endOuterCornerRadius=S.endOuterCornerRadius,f.pointerEvents=vi.PointerEvents.None})}updateScaleSelection(e){return e.scaleSelection.update(e.scaleData,void 0,t=>Ir(e.scaleData.length,t.itemId))}updateScaleNodes(e){const{scaleSelection:t}=e,{scale:i,segmentation:s}=this.properties,o=s.spacing??0,{fillOpacity:a,stroke:n,strokeOpacity:r,strokeWidth:l,lineDash:c,lineDashOffset:h}=i,u=this.getShapeFillBBox();t.each((d,g)=>{const{centerX:y,centerY:f,innerRadius:m,outerRadius:S,startCornerRadius:D,endCornerRadius:b,fill:x}=g;d.centerX=y,d.centerY=f,d.innerRadius=m,d.outerRadius=S,d.fill=x,d.fillBBox=u,d.fillOpacity=a,d.stroke=n,d.strokeOpacity=r,d.strokeWidth=l,d.lineDash=c,d.lineDashOffset=h,d.startOuterCornerRadius=D,d.startInnerCornerRadius=D,d.endOuterCornerRadius=b,d.endInnerCornerRadius=b,d.radialEdgeInset=(o+d.strokeWidth)/2,d.concentricEdgeInset=d.strokeWidth/2,d.setProperties(kr(d,g))})}updateNeedleSelection(e){return e.needleSelection.update(e.needleData,void 0,()=>Ir([]))}updateNeedleNodes(e){const{needleSelection:t}=e,{fill:i,fillOpacity:s,stroke:o,strokeOpacity:a,strokeWidth:n,lineDash:r,lineDashOffset:l}=this.properties.needle,c=this.ctx.animationManager.isSkipped();t.each((h,u)=>{const{centerX:d,centerY:g,radius:y}=u,f=y*2;h.d=mr.defaultPathData,h.fill=i,h.fillOpacity=s,h.stroke=o,h.strokeOpacity=a,h.strokeWidth=n/f,h.lineDash=r.map(m=>m/f),h.lineDashOffset=l/f,h.translationX=d,h.translationY=g,h.scalingX=f,h.scalingY=f,c&&h.setProperties(Pu(h,u))})}updateTargetSelection(e){return e.targetSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetNodes(e){const{targetSelection:t,isHighlight:i}=e;t.each((s,o)=>{const{centerX:a,centerY:n,angle:r,radius:l,shape:c,size:h,rotation:u,fill:d,fillOpacity:g,stroke:y,strokeOpacity:f,strokeWidth:m,lineDash:S,lineDashOffset:D}=o,b=this.getHighlightStyle(i,o.datumIndex),x=vN(b,{fill:d,fillOpacity:g,stroke:y,strokeOpacity:f,strokeWidth:m,lineDash:S,lineDashOffset:D,opacity:1});DN(s,x),s.size=h,s.shape=c==="line"?_p:c,s.translationX=a+l*Math.cos(r),s.translationY=n+l*Math.sin(r),s.rotation=r+u})}updateTargetLabelSelection(e){return e.targetLabelSelection.update(e.targetData,void 0,t=>t.itemId)}updateTargetLabelNodes(e){const{targetLabelSelection:t}=e;t.each((i,s)=>{const{centerX:o,centerY:a,radius:n,angle:r,text:l}=s,{offsetX:c,offsetY:h,fill:u,fontStyle:d,fontWeight:g,fontSize:y,fontFamily:f,textAlign:m,textBaseline:S}=s.label;if(l==null){i.visible=!1;return}i.visible=!0,i.x=o+n*Math.cos(r)+c,i.y=a+n*Math.sin(r)+h,i.text=l,i.fill=u,i.fontStyle=d,i.fontWeight=g,i.fontSize=y,i.fontFamily=f,i.textAlign=m,i.textBaseline=S})}updateLabelSelection(e){return e.labelSelection.update(e.labelData,void 0,t=>t.label)}updateLabelNodes(e){const{labelSelection:t}=e,i=this.ctx.animationManager.isSkipped();t.each((s,o)=>{s.fill=o.fill,s.fontStyle=o.fontStyle,s.fontWeight=o.fontWeight,s.fontFamily=o.fontFamily}),(i||this.labelsHaveExplicitText())&&this.formatLabelText()}updateTickSelection(e){return e.tickSelection.update(e.tickData,void 0,t=>t.index)}updateTickNodes(e){const{scale:t,radius:i,centerX:s,centerY:o,properties:a}=this,{enabled:n,color:r,fontFamily:l,fontSize:c,fontStyle:h,fontWeight:u,spacing:d}=a.scale.label,g=da(a.scale.label.rotation??0);e.tickSelection.each((y,f)=>{if(!n){y.visible=!1;return}y.visible=!0,y.text=f.text,y.fill=r,y.fontFamily=l,y.fontSize=c,y.fontStyle=h,y.fontWeight=u,y.textAlign="center",y.textBaseline="middle";const m=t.convert(f.value),{width:S,height:D}=f,b=Math.abs(i*Math.cos(m)),x=Math.abs(i*Math.sin(m)),k=Math.min(Math.max(Math.abs(i/Math.tan(m)),b-S/2),b+S/2),I=Math.min(Math.max(Math.abs(i*Math.tan(m)),x-D/2),x+D/2),A=Math.hypot(k,I),v=s+(A+d)*Math.cos(m),N=o+(A+d)*Math.sin(m);y.x=v,y.y=N,y.rotationCenterX=v,y.rotationCenterY=N,y.rotation=g})}labelsHaveExplicitText(){for(const{datum:e}of this.labelSelection)if(e.text==null)return!1;return!0}formatLabelText(e){const{labelSelection:t,radius:i,textAlign:s,verticalAlign:o}=this,{spacing:a,innerRadiusRatio:n}=this.properties;pN(this,this.ctx,t,{padding:a,textAlign:s,verticalAlign:o},i*n,e)}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),Cu([this.datumSelection],kr),Cu([this.needleSelection],Pu),this.formatLabelText()}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}animateLabelText(e={}){const{animationManager:t}=this.ctx;let i,s,o,a;if(this.labelSelection.each((n,r)=>{n.opacity=1,r.label==="primary"?(i=n.previousDatum?.value??e.from??r.value,s=r.value):r.label==="secondary"&&(o=n.previousDatum?.value??e.from??r.value,a=r.value)}),!this.labelsHaveExplicitText())if(s==null||a==null)this.formatLabelText();else if(i===s&&o===a)this.formatLabelText({label:s,secondaryLabel:a});else{const n=`${this.id}_labels`;t.animate({id:n,groupId:"label",from:{label:i,secondaryLabel:o},to:{label:s,secondaryLabel:a},phase:e.phase??"update",onUpdate:r=>this.formatLabelText(r),onStop:()=>this.formatLabelText({label:s,secondaryLabel:a})})}}animateEmptyUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=Ru(!0,this.scale.range[0]);Ws(this.id,"node",e,[this.datumSelection],t,(s,o)=>o.itemId),Ws(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),Ws(this.id,"label",e,[this.labelSelection],Pp,(s,o)=>o.label),this.animateLabelText({from:this.properties.scale.min,phase:"initial"})}animateWaitingUpdateReady(){const{animationManager:e}=this.ctx,{node:t,needle:i}=Ru(!1,this.scale.range[0]);Ws(this.id,"node",e,[this.datumSelection],t,(s,o)=>o.itemId),Ws(this.id,"needle",e,[this.needleSelection],i,()=>"needle"),this.animateLabelText()}animateReadyResize(){this.resetAllAnimation()}dataCount(){return NaN}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(){return[]}getTooltipContent(e){const{id:t,properties:i}=this,{tooltip:s}=i;let o,a;if(e.type===0?(o=i.value,a=i.label.text):{value:o,text:a}=i.targets[e.index],o!=null)return this.formatTooltipWithContext(s,{data:[{label:a,fallbackLabel:"Value",value:this.formatLabel(o)}]},{seriesId:t,title:void 0,datum:void 0,value:o})}pickNodeClosestDatum(e){return Ep(this,e)}pickFocus(e){return Op(this,e)}getCaptionText(){const{value:e}=this.properties,t=[];return t.push(this.formatLabel(e)),this.labelSelection.each((i,s)=>{const o=Ts(this.id,this.ctx,s);o!=null&&t.push(o)}),t.join(". ")}getCategoryValue(e){}datumIndexForCategoryValue(e){}hasItemStylers(){return!1}};fa.className="RadialGaugeSeries",fa.type="radial-gauge";var{FONT_SIZE_RATIO:MN}=is,QC={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"radial-gauge",moduleFactory:e=>new fa(e),themeTemplate:{minWidth:200,minHeight:200,tooltip:{enabled:!1},series:{outerRadiusRatio:1,innerRadiusRatio:.8,startAngle:270,endAngle:450,defaultColorRange:{$if:[{$eq:[{$palette:"type"},"inbuilt"]},{$interpolate:[{$palette:"secondDivergingColors"},5]},is.SAFE_RANGE2_OPERATION]},scale:{defaultFill:{$path:["/1",{$palette:"fill"},{$palette:"hierarchyColors"}]},stroke:{$path:["/2",is.SAFE_STROKE_FILL_OPERATION,{$palette:"hierarchyColors"}]},strokeWidth:{$isUserOption:["./stroke",2,0]},label:{fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:12}},bar:{strokeWidth:{$isUserOption:["./stroke",2,0]}},segmentation:{enabled:!1,interval:{},spacing:2},defaultTarget:{fill:{$ref:"foregroundColor"},stroke:{$ref:"foregroundColor"},size:10,shape:"triangle",placement:"outside",spacing:5,label:{enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"},spacing:5}},needle:{enabled:!1,fill:{$ref:"foregroundColor"},spacing:10},label:{...is.LABEL_BOXING_DEFAULTS,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:56,minimumFontSize:18/56,fontFamily:{$ref:"fontFamily"},color:{$ref:"textColor"}},secondaryLabel:{...is.LABEL_BOXING_DEFAULTS,enabled:!0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:MN.LARGE},minimumFontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},color:{$ref:"subtleTextColor"}},tooltip:{range:{$path:["/tooltip/range",10]}}}}},Ou={type:"series",name:"radial-gauge",chartType:"standalone",enterprise:!0,options:is.radialGaugeSeriesOptionsDef,create:e=>new fa(e)};import{_ModuleSupport as ss}from"ag-charts-community";import{_ModuleSupport as NN}from"ag-charts-community";import{Logger as LN}from"ag-charts-core";function Fu(e){e.nodes.sort((t,i)=>Math.round((t.datum.y-i.datum.y)*100)/100||-(t.datum.size-i.datum.size))}function TN({nodes:e,size:t},{seriesRectHeight:i,nodeSpacing:s,sizeScale:o}){const a=i*t*o;let n=(i-(a+s*(e.length-1)))/2;e.forEach(({datum:r})=>{const l=i*r.size*o;r.y=n,r.height=l,n+=l+s})}function RN(e,t){const{nodes:i}=e,{seriesRectHeight:s,nodeSpacing:o}=t;Fu(e);let a=0,n=0;for(const{datum:c}of i){const h=Math.max(n-c.y,0);c.y+=h,a+=h,n=c.y+c.height+o}if(n-o<s)return a>0;let l=s;for(let c=i.length-1;c>=0;c-=1){const{datum:h}=i[c],u=h.y+h.height,d=Math.min(l-u,0);h.y+=d,a+=d,l=h.y-o}return!0}function Mr(e,t,i,s,o,a,n,r){const l=(i-e)/(s-t),c=(n-o)/(r-a),h=((a-t)*(l*c)+e*c-o*l)/(c-l);return e<i?h>e&&h<Math.min(i,n):h<e&&h>Math.max(i,n)}function Bu(e,t){let i=!1;const s=e.nodes.filter(a=>t(a).length===1);let o=!0;for(let a=0;o&&a<s.length;a+=1){o=!1;for(let n=0;n<s.length-1;n+=1){const{datum:r}=s[n],l=t(s[n])[0].node.datum,{datum:c}=s[n+1],h=t(s[n+1])[0].node.datum;if(!(Mr(r.x,r.y,l.x,l.y,c.x,c.y,h.x,h.y)||Mr(r.x,r.y+r.height/2,l.x,l.y+l.height/2,c.x,c.y+c.height/2,h.x,h.y+h.height/2)||Mr(r.x,r.y+r.height,l.x,l.y+l.height,c.x,c.y+c.height,h.x,h.y+h.height)))continue;const d=s[n];s[n]=s[n+1],s[n+1]=d;const g=r.y;r.y=c.y+c.height-r.height,c.y=g,i=!0,o=!0}}return i}function PN(e){let t=!1;return Fu(e),t=Bu(e,i=>i.linksBefore)||t,t=Bu(e,i=>i.linksAfter)||t,t}function CN(e){if(e.length===0)return;let t=0,i=0;for(const{node:{datum:s}}of e)t+=s.y*s.size,i+=s.size;return t/i}function Gu(e,t,i,s){return e.nodes.forEach(({datum:o,linksBefore:a,linksAfter:n})=>{const r=s===1?a:n,l=s===1?n:a,c=CN(r);if(c!=null){const h=l.length!==0?i:1;o.y=o.y+(c-o.y)*h}}),RN(e,t)}function Vu(e,t,i){let s=!1;for(const o of e)s=Gu(o,t,i,1)||s;return s}function _N(e,t,i){let s=!1;for(let o=e.length-1;o>=0;o-=1)s=Gu(e[o],t,i,-1)||s;return s}function Ku(e){let t=!1;for(let i=e.length-1;i>=0;i-=1)t=PN(e[i])||t;return t}function wN(e,t){e.forEach(s=>{TN(s,t)});let i=!1;for(let s=0;s<6;s+=1){const o=Vu(e,t,1);i=_N(e,t,.5);const a=Ku(e);if(!o&&!i&&!a)break}i&&(Vu(e,t,1),Ku(e))}import{_ModuleSupport as EN}from"ag-charts-community";var{BBox:ON,Path:FN,SceneChangeDetection:os,splitBezier2D:BN}=EN;function ya(e,t,i,s,o,a,n,r,l,c){let h,u;if(o!==i&&l!==n){const I=-(s-t)/(o-i),A=-(r-a)/(l-n);h=(n-i+I*t-A*a)/(I-A),u=I*(h-t)+i}else if(o===i&&l!==n)h=t,u=-(r-a)/(l-n)*(h-r)+l;else if(o!==i&&l===n)h=r,u=-(s-t)/(o-i)*(h-t)+i;else throw new Error("Offsetting flat bezier curve");const d=Math.hypot(i-u,t-h),g=(d+c)/d,y=Math.hypot(l-u,r-h),f=(y+c)/y,m=h+(s-h)*g,S=u+(o-u)*g,D=h+(a-h)*f,b=u+(n-u)*f,x=h+(r-h)*f,k=u+(l-u)*f;e.cubicCurveTo(m,S,D,b,x,k)}var ki=class extends FN{constructor(){super(...arguments),this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.height=0,this.inset=0}computeBBox(){const e=Math.min(this.x1,this.x2),t=Math.max(this.x1,this.x2)-e,i=Math.min(this.y1,this.y2),s=Math.max(this.y1,this.y2)-i+this.height;return new ON(e,i,t,s)}updatePath(){const{path:e,inset:t}=this;e.clear();const i=this.x1+t,s=this.x2-t,o=this.y1+t,a=this.y2+t,n=this.height-2*t;if(n<0||i>s)return;const r=i,l=o+n/2,c=(i+s)/2,h=o+n/2,u=(i+s)/2,d=a+n/2,g=s,y=a+n/2;if(e.moveTo(r,l-n/2),Math.abs(this.y2-this.y1)<1||this.x2-this.x1<this.height*Math.SQRT2)e.cubicCurveTo(c,h-n/2,u,d-n/2,g,y-n/2),e.lineTo(g,y+n/2),e.cubicCurveTo(u,d+n/2,c,h+n/2,r,l+n/2);else{const[f,m]=BN(r,l,c,h,u,d,g,y,.5),S=(a>o?1:-1)*n/2;ya(e,f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y,S),ya(e,m[0].x,m[0].y,m[1].x,m[1].y,m[2].x,m[2].y,m[3].x,m[3].y,-S),e.lineTo(g,y+n/2),ya(e,m[3].x,m[3].y,m[2].x,m[2].y,m[1].x,m[1].y,m[0].x,m[0].y,S),ya(e,f[3].x,f[3].y,f[2].x,f[2].y,f[1].x,f[1].y,f[0].x,f[0].y,-S)}e.closePath()}};p([os()],ki.prototype,"x1",2),p([os()],ki.prototype,"x2",2),p([os()],ki.prototype,"y1",2),p([os()],ki.prototype,"y2",2),p([os()],ki.prototype,"height",2),p([os()],ki.prototype,"inset",2);import{_ModuleSupport as GN}from"ag-charts-community";var{BaseProperties:Wu,FillGradientDefaults:VN,FillPatternDefaults:KN,FillImageDefaults:WN,makeSeriesTooltip:zN,SeriesProperties:HN,Property:Q,Label:$N}=GN,zu=class extends $N{constructor(){super(...arguments),this.spacing=1}};p([Q],zu.prototype,"spacing",2);var zt=class extends Wu{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};p([Q],zt.prototype,"fill",2),p([Q],zt.prototype,"fillOpacity",2),p([Q],zt.prototype,"stroke",2),p([Q],zt.prototype,"strokeOpacity",2),p([Q],zt.prototype,"strokeWidth",2),p([Q],zt.prototype,"lineDash",2),p([Q],zt.prototype,"lineDashOffset",2),p([Q],zt.prototype,"itemStyler",2);var St=class extends Wu{constructor(){super(...arguments),this.spacing=1,this.width=1,this.alignment="justify",this.fill=void 0,this.fillOpacity=1,this.stroke=void 0,this.strokeOpacity=1,this.strokeWidth=1,this.lineDash=[0],this.lineDashOffset=0}};p([Q],St.prototype,"spacing",2),p([Q],St.prototype,"width",2),p([Q],St.prototype,"alignment",2),p([Q],St.prototype,"fill",2),p([Q],St.prototype,"fillOpacity",2),p([Q],St.prototype,"stroke",2),p([Q],St.prototype,"strokeOpacity",2),p([Q],St.prototype,"strokeWidth",2),p([Q],St.prototype,"lineDash",2),p([Q],St.prototype,"lineDashOffset",2),p([Q],St.prototype,"itemStyler",2);var Oe=class extends HN{constructor(){super(),this.nodes=void 0,this.idKey="",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.sizeKey=void 0,this.sizeName=void 0,this.fillGradientDefaults=new VN,this.fillPatternDefaults=new KN,this.fillImageDefaults=new WN,this.defaultColorRange=[],this.defaultPatternFills=[],this.fills=[],this.strokes=[],this.label=new zu,this.link=new zt,this.node=new St,this.tooltip=zN(),this.highlightStyle.deprecated=!1}getStyle(e,t,i,s){const{fillOpacity:o,strokeWidth:a,strokeOpacity:n,lineDash:r,lineDashOffset:l,fill:c=t[s%t.length],stroke:h=i[s%t.length]}=e?this.link:this.node;return{fill:c,fillOpacity:o,stroke:h,strokeWidth:a,strokeOpacity:n,lineDash:r,lineDashOffset:l}}};p([Q],Oe.prototype,"nodes",2),p([Q],Oe.prototype,"fromKey",2),p([Q],Oe.prototype,"toKey",2),p([Q],Oe.prototype,"idKey",2),p([Q],Oe.prototype,"idName",2),p([Q],Oe.prototype,"labelKey",2),p([Q],Oe.prototype,"labelName",2),p([Q],Oe.prototype,"sizeKey",2),p([Q],Oe.prototype,"sizeName",2),p([Q],Oe.prototype,"fillGradientDefaults",2),p([Q],Oe.prototype,"fillPatternDefaults",2),p([Q],Oe.prototype,"fillImageDefaults",2),p([Q],Oe.prototype,"defaultColorRange",2),p([Q],Oe.prototype,"defaultPatternFills",2),p([Q],Oe.prototype,"fills",2),p([Q],Oe.prototype,"strokes",2),p([Q],Oe.prototype,"label",2),p([Q],Oe.prototype,"link",2),p([Q],Oe.prototype,"node",2),p([Q],Oe.prototype,"tooltip",2);var{Transformable:XN,applyShapeStyle:Hu,SeriesNodePickMode:$u,CachedTextMeasurerPool:YN,TextWrapper:Xu,TextUtils:Yu,createDatumId:ma,getShapeStyle:Uu,getLabelStyles:UN,Rect:qu,BBox:ju,mergeDefaults:Sa}=NN,xa=class extends ep{constructor(e){super({moduleCtx:e,pickModes:[$u.NEAREST_NODE,$u.EXACT_SHAPE_MATCH]}),this.properties=new Oe}isLabelEnabled(){return(this.properties.labelKey!=null||this.nodes==null)&&this.properties.label.enabled}linkFactory(){return new ki}nodeFactory(){return new qu}createNodeData(){const{id:e,_nodeDataDependencies:{seriesRectWidth:t,seriesRectHeight:i}={seriesRectWidth:0,seriesRectHeight:0}}=this,{fromKey:s,toKey:o,sizeKey:a,labelKey:n,label:{spacing:r},node:{spacing:l,width:c,alignment:h}}=this.properties,{nodeGraph:u,links:d,maxPathLength:g}=this.getNodeGraph(v=>({...v,x:NaN,y:NaN,width:c,height:NaN}),v=>({...v,x1:NaN,x2:NaN,y1:NaN,y2:NaN,height:NaN}),{includeCircularReferences:!1}),y=u,f=this.isLabelEnabled()?(t-c)*(1-g/(g+1)):0,m=(t-c-2*f)/(g-1),S=[];for(let v=0;v<g;v+=1){const N=f+v*m;S.push({index:v,size:0,nodes:[],x:N})}y.forEach(v=>{const{datum:N,linksBefore:L,linksAfter:M,maxPathLengthBefore:R,maxPathLengthAfter:C}=v,w=Math.max(L.reduce((O,{link:E})=>O+E.size,0),M.reduce((O,{link:E})=>O+E.size,0));if(L.length===0&&M.length===0||w===0){v.columnIndex=-1;return}let T;switch(h){case"left":T=S[R];break;case"right":T=S[g-1-C];break;case"center":{if(L.length!==0)T=S[R];else if(M.length!==0){const O=M.reduce((E,F)=>Math.min(E,F.node.maxPathLengthBefore),g)-1;T=S[O]}else T=S[0];break}case"justify":{T=M.length===0?S[g-1]:S[R];break}}N.x=T.x,N.size=w;const{label:_}=this.properties,P=_.enabled?this.getLabelText(N.label,N.datum,n,"label",[],this.properties.label,{datum:N.datum,value:N.label,fromKey:s,toKey:o,sizeKey:a,size:w}):void 0;N.label=P,T.nodes.push(v),T.size+=w,v.columnIndex=T.index}),y.forEach(v=>{let N=1/0,L=0;v.linksAfter.forEach(M=>{const R=M.node,{columnIndex:C}=R;C<N?(N=C,L=R.datum.size):C===N&&(L=Math.max(L,R.datum.size))}),v.closestColumnIndex=N,v.maxSizeOfClosestNodesAfter=L});const D=S.reduce((v,{size:N,nodes:L})=>{const M=(1-(L.length-1)*(l/i))/N;return Math.min(v,M)},1/0);for(let v=S.length-1;v>=0;v-=1)S[v].nodes.sort((L,M)=>L.closestColumnIndex-M.closestColumnIndex||L.maxSizeOfClosestNodesAfter-M.maxSizeOfClosestNodesAfter||L.datum.size-M.datum.size);wN(S,{seriesRectHeight:i,nodeSpacing:l,sizeScale:D});let b=!1;if(y.forEach(({datum:v,linksBefore:N,linksAfter:L})=>{b||(b=v.height<0);const M=v.y+v.height,R=T=>T.sort((_,P)=>{const O=_.node.datum,E=P.node.datum,F=O.y+O.height,B=E.y+E.height,G=Math.atan2(O.y-v.y,Math.abs(O.x-v.x))-Math.atan2(E.y-v.y,Math.abs(E.x-v.x)),V=Math.atan2(F-M,Math.abs(O.x-v.x))-Math.atan2(B-M,Math.abs(E.x-v.x));return G+V});let C=v.y;R(N).forEach(({link:T})=>{T.y2=C,C+=T.size*i*D});let w=v.y;R(L).forEach(({link:T})=>{T.y1=w,w+=T.size*i*D})}),b){LN.warnOnce("There was insufficient space to display the Sankey Series. Reduce the node spacing, or provide a larger container.");return}const x=[],k=[],{fontSize:I}=this.properties.label,A=YN.getMeasurer({font:this.properties.label});return S.forEach((v,N)=>{const L=N===0,M=N===S.length-1;let R=-1/0;v.nodes.sort((C,w)=>C.datum.y-w.datum.y),v.nodes.forEach(({datum:C})=>{if(C.midPoint={x:C.x+C.width/2,y:C.y+C.height/2},x.push(C),C.label==null)return;const w=L?C.x-r:C.x+C.width+r,T=C.y+C.height/2;let _;if(!L&&!M){const F=T-Yu.getLineHeight(I),B=T+Yu.getLineHeight(I);let G=t;y.forEach(({datum:K})=>{K.x>C.x&&Math.max(K.y,F)<=Math.min(K.y+K.height,B)&&(G=Math.min(G,K.x-r))});const V=G-C.x-2*r;_=Xu.wrapText(C.label,{maxWidth:V,maxHeight:C.height,font:this.properties.label,textWrap:"never",overflow:"hide"})}if(_==null||_===""){const F=L||M?r:r*2;_=Xu.wrapText(C.label,{maxWidth:m-F,maxHeight:C.height,font:this.properties.label,textWrap:"never"})}if(_==="")return;const{height:P}=A.measureText(_),O=T-P/2,E=T+P/2;O>=R&&(k.push({x:w,y:T,leading:L,text:_,size:C.size}),R=E)})}),d.forEach(v=>{const{fromNode:N,toNode:L,size:M}=v;v.height=i*M*D,v.x1=N.x+c,v.x2=L.x,v.midPoint={x:(v.x1+v.x2)/2,y:(v.y1+v.y2)/2+v.height/2},x.push(v)}),{itemId:e,nodeData:x,labelData:k}}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}updateLabelNodes(e){e.labelSelection.each((t,i)=>{const{x:s,y:o,leading:a,text:n}=i,l=UN(this,void 0,i,this.properties.label),{color:c,fontStyle:h,fontWeight:u,fontSize:d,fontFamily:g}=l;t.visible=!0,t.x=s,t.y=o,t.text=n,t.fill=c,t.fontStyle=h,t.fontWeight=u,t.fontSize=d,t.fontFamily=g,t.textAlign=a?"right":"left",t.textBaseline="middle",t.setBoxing(l)})}updateNodeSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>ma([t.type,t.id]))}getNodeStyle({datumIndex:e,datum:t,size:i=0,label:s},o,a){const{id:n,properties:r}=this,{fills:l,strokes:c,defaultColorRange:h,defaultPatternFills:u,fillGradientDefaults:d,fillPatternDefaults:g,fillImageDefaults:y}=r,{itemStyler:f}=r.node,m=h[o%h.length].map(I=>({color:I})),S=u[o%u.length],D=this.getHighlightStyle(a,e),b=Sa(D,r.getStyle(!1,l,c,o)),x=r.node.fill!=null;let k=Uu(b,x?d:{...d.toJson(),colorStops:m},x?g:{...g.toJson(),fill:S,stroke:S},y);if(f!=null&&e!=null){const I=this.cachedDatumCallback(ma(e.index,"node",a?"highlight":"node"),()=>{const A=this.ctx.highlightManager?.getActiveHighlight(),v=this.getHighlightStateString(A,a,e);return this.callWithContext(f,{seriesId:n,datum:t,highlighted:a,highlightState:v,...k,size:i,label:s})});I&&(k=Sa(I,k,{...d.toJson(),colorStops:m},{...g.toJson(),fill:S,stroke:S},y))}return k.opacity=1,k}updateNodeNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getShapeFillBBox();t.each((o,a)=>{const{datumIndex:n}=a,r=this.getNodeStyle(a,n.index,i);o.x=a.x,o.y=a.y,o.width=Math.max(a.width,0),o.height=Math.max(a.height,0),Hu(o,r,s)})}getShapeFillBBox(){const e=this._nodeDataDependencies?.seriesRectWidth??0,t=this._nodeDataDependencies?.seriesRectHeight??0,i=new ju(0,0,e,t);return{series:i,axis:i}}updateLinkSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>ma([t.type,t.index,t.fromNode.id,t.toNode.id]))}getLinkStyle({datumIndex:e,datum:t},i,s){const{id:o,properties:a}=this,{fills:n,strokes:r,defaultColorRange:l,defaultPatternFills:c,fillGradientDefaults:h,fillPatternDefaults:u,fillImageDefaults:d}=a,{itemStyler:g}=a.link,y=l[i%l.length].map(x=>({color:x})),f=c[i%c.length],m=this.getHighlightStyle(s,e),S=Sa(m,a.getStyle(!0,n,r,i)),D=a.link.fill!=null;let b=Uu(S,D?h:{...h.toJson(),colorStops:y},D?u:{...u.toJson(),fill:f,stroke:f},d);if(g!=null&&e!=null){const x=this.cachedDatumCallback(ma(e.index,"link",s?"highlight":"node"),()=>{const k=this.ctx.highlightManager?.getActiveHighlight(),I=this.getHighlightStateString(k,s,e);return this.callWithContext(g,{seriesId:o,datum:t,highlighted:s,highlightState:I,...b})});x&&(b=Sa(x,b,{...h.toJson(),colorStops:y},{...u.toJson(),fill:f,stroke:f},d))}return b.opacity=1,b}updateLinkNodes(e){const{datumSelection:t,isHighlight:i}=e,s=this.getShapeFillBBox();t.each((o,a)=>{const n=a.fromNode.datumIndex.index,r=this.getLinkStyle(a,n,i);o.x1=a.x1,o.y1=a.y1,o.x2=a.x2,o.y2=a.y2,o.height=a.height,Hu(o,r,s),o.inset=o.strokeWidth/2})}getTooltipContent(e){const{id:t,linksProcessedData:i,nodesProcessedData:s,properties:o,ctx:{formatManager:a}}=this,{fromKey:n,toKey:r,sizeKey:l,sizeName:c,tooltip:h}=o,u=this.contextNodeData?.nodeData.find(D=>D.datumIndex.type===e.type&&D.datumIndex.index===e.index);if(u==null)return;const d=u.type===0?u.fromNode.index:u.index,g=u.type===0?`${u.fromNode.label} - ${u.toNode.label}`:u.label,y=e.type===0?i?.dataSources.get(this.id)?.[e.index]:s?.dataSources.get(this.id)?.[e.index],f=u.size;let m;if(u.type===0){const D=u.fromNode.datumIndex;m=this.getLinkStyle({datumIndex:e,datum:y},D.index,!1)}else m=this.getNodeStyle({datumIndex:e,datum:y},e.index,!1);const S=[];if(l!=null){const D=a.format(this.callWithContext.bind(this),{type:"number",value:f,datum:y,seriesId:t,legendItemName:void 0,key:l,source:"tooltip",property:"size",domain:[],boundSeries:this.getFormatterContext("size"),fractionDigits:void 0});S.push({label:c,fallbackLabel:l,value:D??String(f)})}return this.formatTooltipWithContext(h,{title:g,symbol:this.legendItemSymbol(u.type,d,m),data:S},{seriesId:t,datum:y,title:g,fromKey:n,toKey:r,sizeKey:l,sizeName:c,size:f,...m})}computeFocusBounds(e){if(e instanceof qu){const{x:t,y:i,width:s,height:o}=e,a=new ju(t,i,s,o);return XN.toCanvas(this.contentGroup,a)}return e}hasItemStylers(){return this.properties.node.itemStyler!=null||this.properties.link.itemStyler!=null}};xa.className="SankeySeries",xa.type="sankey";import{_ModuleSupport as qN}from"ag-charts-community";import{arrayOf as Nr,color as Ju,constant as jN,fillGradientDefaults as JN,fillImageDefaults as ZN,fillPatternDefaults as QN,required as Lr,string as ba,undocumented as zs}from"ag-charts-core";var{commonSeriesOptionsDefs:eL,sankeySeriesThemeableOptionsDef:tL}=qN,as={...tL,...eL,type:Lr(jN("sankey")),fromKey:Lr(ba),toKey:Lr(ba),sizeKey:ba,sizeName:ba};as.fillGradientDefaults=zs(JN),as.fillPatternDefaults=zs(QN),as.fillImageDefaults=zs(ZN),as.defaultColorRange=zs(Nr(Nr(Ju))),as.defaultPatternFills=zs(Nr(Ju));var r_={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],solo:!0,identifier:"sankey",moduleFactory:e=>new xa(e),themeTemplate:{seriesArea:{padding:{top:10,bottom:10}},series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},fillGradientDefaults:ss.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:ss.FILL_PATTERN_DEFAULTS,fillImageDefaults:ss.FILL_IMAGE_DEFAULTS,defaultColorRange:{$palette:"gradients"},defaultPatternFills:ss.SAFE_FILLS_OPERATION,highlightStyle:{series:{dimOpacity:.2}},highlight:{...ss.singleSeriesHighlightStyle()},label:{...ss.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$ref:"fontSize"},fontWeight:{$ref:"fontWeight"},color:{$ref:"textColor"},spacing:10},node:{spacing:20,width:10,strokeWidth:{$isUserOption:["./stroke",2,0]}},link:{fillOpacity:.5,strokeWidth:{$isUserOption:["./stroke",2,0]}}},legend:{enabled:!1,toggleSeries:!1}}},Zu={type:"series",name:"sankey",chartType:"standalone",enterprise:!0,options:as,create:e=>new xa(e)};import{_ModuleSupport as Ii}from"ag-charts-community";import{_ModuleSupport as Hs}from"ag-charts-community";import{_ModuleSupport as iL}from"ag-charts-community";var{HierarchySeriesProperties:sL,HighlightStyle:oL,makeSeriesTooltip:aL,Property:Fe}=iL,ti=class extends oL{constructor(){super(!1),this.label=new wt,this.secondaryLabel=new wt}};p([Fe],ti.prototype,"fill",2),p([Fe],ti.prototype,"fillOpacity",2),p([Fe],ti.prototype,"stroke",2),p([Fe],ti.prototype,"strokeWidth",2),p([Fe],ti.prototype,"strokeOpacity",2),p([Fe],ti.prototype,"label",2),p([Fe],ti.prototype,"secondaryLabel",2);var it=class extends sL{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new ti,this.label=new wt,this.secondaryLabel=new Ds,this.tooltip=aL()}getStyle(e){const{fills:t,strokes:i,fillOpacity:s,strokeWidth:o,strokeOpacity:a}=this;return{fill:t[e%t.length],fillOpacity:s,stroke:i[e%i.length],strokeWidth:o,strokeOpacity:a,opacity:1}}};p([Fe],it.prototype,"sizeName",2),p([Fe],it.prototype,"labelKey",2),p([Fe],it.prototype,"secondaryLabelKey",2),p([Fe],it.prototype,"fillOpacity",2),p([Fe],it.prototype,"strokeWidth",2),p([Fe],it.prototype,"strokeOpacity",2),p([Fe],it.prototype,"cornerRadius",2),p([Fe],it.prototype,"sectorSpacing",2),p([Fe],it.prototype,"padding",2),p([Fe],it.prototype,"itemStyler",2),p([Fe],it.prototype,"highlightStyle",2),p([Fe],it.prototype,"label",2),p([Fe],it.prototype,"secondaryLabel",2),p([Fe],it.prototype,"tooltip",2);var{fromToMotion:nL,normalizeAngle360:rL,createDatumId:lL,PointerEvents:cL,Sector:Qu,Group:Da,ScalableGroup:pL,Selection:Tr,TransformableText:Rr,BBox:ed,applyShapeStyle:hL,getShapeStyle:Pr,mergeDefaults:td}=Hs,uL=class extends Hs.HierarchyNode{constructor(){super(...arguments),this.label=void 0,this.secondaryLabel=void 0,this.contentHeight=0,this.bbox=void 0,this.startAngle=0,this.endAngle=0}};function id(e,t=0,i=2*Math.PI/e.sumSize){for(const s of e.children){const o=t+s.sumSize*i;s.startAngle=t,s.endAngle=o,id(s,t,i),t=o}}var va=class extends Hs.HierarchySeries{constructor(e){super(e),this.NodeClass=uL,this.properties=new it,this.scalingGroup=this.contentGroup.appendChild(new pL),this.sectorGroup=this.scalingGroup.appendChild(new Da),this.sectorLabelGroup=this.scalingGroup.appendChild(new Da),this.highlightSectorGroup=this.scalingGroup.appendChild(new Da),this.datumSelection=Tr.select(this.sectorGroup,Qu),this.labelSelection=Tr.select(this.sectorLabelGroup,Da),this.highlightSelection=Tr.select(this.highlightSectorGroup,Qu),this.sectorLabelGroup.pointerEvents=cL.None}processData(){super.processData(),id(this.rootNode)}updateSelections(){const e=this.ctx.highlightManager?.getActiveHighlight();if(this.highlightSelection.update(e!=null?[e]:[],void 0,a=>this.getDatumId(a)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:t}=this;if(t==null||t.seriesRect==null)return;const s=Array.from(this.rootNode),o=a=>{a.append([new Rr({tag:0}),new Rr({tag:1})])};this.datumSelection.update(s,void 0,a=>this.getDatumId(a)),this.labelSelection.update(s,o,a=>this.getDatumId(a))}getItemStyle(e,t){const{id:i,properties:s,colorScale:o}=this,{itemStyler:a,fillGradientDefaults:n,fillPatternDefaults:r,fillImageDefaults:l}=s,c=e.datumIndex?.[0]??0,h=t?s.highlightStyle:void 0,u=td(h,s.getStyle(c));!t&&e.colorValue!=null&&(u.fill=o.convert(e.colorValue));let d=Pr(u,n,r,l);if(a!=null&&e!=null){const g=this.ctx.highlightManager?.getActiveHighlight(),y=this.cachedDatumCallback(lL(this.getDatumId(e),t?"highlight":"node"),()=>{const f=this.getHighlightStateString(g,t,e.datumIndex);return this.callWithContext(a,{seriesId:i,datum:e.datum,depth:e.depth??0,highlighted:t,highlightState:f,...d})});y&&(d=Pr(td(y,d),n,r,l))}return d}updateNodes(){const{chart:e,data:t,maxDepth:i}=this;if(e==null||t==null)return;const{width:s,height:o}=e.seriesRect,{sectorSpacing:a=0,padding:n=0,cornerRadius:r,childrenKey:l,colorKey:c,colorName:h,labelKey:u,secondaryLabelKey:d,sizeKey:g,sizeName:y}=this.properties;this.contentGroup.translationX=s/2,this.contentGroup.translationY=o/2;const f=a*.5,m=Math.min(s,o)/2,S=m/(i+1),D=-Math.PI/2,b={series:new ed(-m,-m,2*m,2*m),axis:new ed(-m,-m,2*m,2*m)};this.rootNode?.walk(A=>{const{startAngle:v,endAngle:N}=A;if(A.depth!=null){const L=(v+N)/2+D,M=(A.depth+.5)*S;A.midPoint.x=Math.cos(L)*M,A.midPoint.y=Math.sin(L)*M}}),this.rootNode?.walk(A=>{const{datum:v,depth:N,startAngle:L,endAngle:M,parent:R,sumSize:C}=A;A.label=void 0,A.secondaryLabel=void 0,A.contentHeight=0;let w;if(v!=null&&N!=null&&u!=null){const le=v[u];w=this.getLabelText(le,v,u,"label",[],this.properties.label,{depth:N,datum:v,childrenKey:l,colorKey:c,colorName:h,labelKey:u,secondaryLabelKey:d,sizeKey:g,sizeName:y,value:le})}w===""&&(w=void 0);let T;if(v!=null&&N!=null&&d!=null){const le=v[d];T=this.getLabelText(le,v,d,"secondaryLabel",[],this.properties.secondaryLabel,{depth:N,datum:v,childrenKey:l,colorKey:c,colorName:h,labelKey:u,secondaryLabelKey:d,sizeKey:g,sizeName:y,value:le})}if(T===""&&(T=void 0),N==null)return;const _=N*S+f,P=(N+1)*S-f,O=_>f?f/_:f,E=P>f?f/P:f,F=L+O,G=M+O-F,V=L+E,W=M+E-V,$=le=>{if(N===0&&R?.sumSize===C)return{width:2*Math.sqrt(P**2-(le*.5)**2),height:le,meta:0};const ce=le,xe=2*Math.sqrt(P**2-(_+ce)**2),Pe=G<Math.PI?2*_*Math.tan(G*.5):1/0,Ze=Math.min(xe,Pe),bt=Math.PI/4;let nt,Pt;return N===0?(nt=le,Pt=Math.sqrt(P**2-(nt/2)**2)-le/(2*Math.tan(W*.5))):rL(G)<bt?(nt=2*_*Math.tan(G*.5),Pt=Math.sqrt(P**2-(nt/2)**2)-_):(Pt=0,nt=0),Ze>=Pt?{width:Ze,height:ce,meta:1}:{width:Pt,height:nt,meta:2}},X=on(w,this.properties.label,T,this.properties.secondaryLabel,{padding:n},$);if(X==null)return;const{width:q,height:Z,meta:se,label:j,secondaryLabel:Y}=X,oe=D+(L+M)/2,ue=Math.sin(oe)>=0,ie=Math.cos(oe)>=0,J=(ue?3:12)&(ie?6:9);let Se;switch(se){case 0:Se=0;break;case 1:{const fe=P-(S-Z)*.58,ce=Math.sqrt((P-n)**2-(q/2)**2);Se=Math.min(fe,ce);break}case 2:if(N===0){const le=Z/(2*Math.tan(G*.5))+q*.5,fe=Math.sqrt(P**2-(Z*.5)**2)-q*.5;Se=(le+fe)*.5}else Se=(_+P)*.5;break}if(j!=null){const{fontStyle:le="normal",fontFamily:fe,fontWeight:ce="normal",color:xe="black"}=this.properties.label;A.label={...j,fontStyle:le,fontFamily:fe,fontWeight:ce,color:xe,labelPlacement:se,circleQuarter:J,radius:Se,theta:oe}}if(Y!=null){const{fontStyle:le="normal",fontFamily:fe,fontWeight:ce="normal",color:xe="black"}=this.properties.secondaryLabel;A.secondaryLabel={...Y,fontStyle:le,fontFamily:fe,fontWeight:ce,color:xe,labelPlacement:se,circleQuarter:J,radius:Se,theta:oe}}A.contentHeight=X.height});const x=(A,v,N)=>{const{depth:L,startAngle:M,endAngle:R}=A;if(L==null){v.visible=!1;return}v.visible=!0;const C=this.getItemStyle(A,N),w=C.fill,T=C.strokeWidth,_=Hs.isGradientFill(w)&&w.bounds!=="item"?b:void 0;hL(v,C,_),v.centerX=0,v.centerY=0,v.innerRadius=L*S,v.outerRadius=(L+1)*S,v.startAngle=M+D,v.endAngle=R+D,v.inset=f+T*.5,v.cornerRadius=r};this.datumSelection.each((A,v)=>{x(v,A,!1)}),this.highlightSelection.each((A,v)=>{x(v,A,!0)});const k=(A,v,N,L)=>{const{depth:M,contentHeight:R}=A,C=N===0,w=C?A.label:A.secondaryLabel;if(M==null||w==null){v.visible=!1;return}const{labelPlacement:T,circleQuarter:_,radius:P,theta:O}=w;let E;switch(L&&(E=(C?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),v.text=w.text,v.fontSize=w.fontSize,v.lineHeight=w.lineHeight,v.fontStyle=w.fontStyle,v.fontFamily=w.fontFamily,v.fontWeight=w.fontWeight,v.fill=E??w.color,v.fillOpacity=this.getHighlightStyle(L,A.datumIndex)?.opacity??1,T){case 0:v.textAlign="center",v.textBaseline="top",v.translationX=0,v.translationY=(C?0:R-w.height)-R*.5,v.rotation=0;break;case 1:{const F=(_&3)!==0,B=C===!F?P:P-(R-w.height);v.textAlign="center",v.textBaseline=F?"bottom":"top",v.translationX=Math.cos(O)*B,v.translationY=Math.sin(O)*B,v.rotation=F?O-Math.PI*.5:O+Math.PI*.5;break}case 2:{const F=(_&6)!==0,B=C===!F?(R-w.height)*.5:(w.height-R)*.5;v.textAlign="center",v.textBaseline="middle",v.translationX=Math.cos(O)*P+Math.cos(O+Math.PI/2)*B,v.translationY=Math.sin(O)*P+Math.sin(O+Math.PI/2)*B,v.rotation=F?O:O+Math.PI;break}}v.visible=!0},I=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(Rr).forEach(A=>{const v=A.closestDatum();k(v,A,A.tag,v===I)})}getTooltipContent(e){const{id:t,properties:i}=this,{labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:n,sizeName:r,colorKey:l,colorName:c,tooltip:h}=i,u=e.reduce((x,k)=>x?.children[k],this.rootNode);if(u==null)return;const{datum:d,depth:g}=u;if(d==null||g==null)return;const y=[],f=n!=null?d[n]:void 0;f!=null&&y.push({label:r,fallbackLabel:n,value:f});const m=l!=null?d[l]:void 0;m!=null&&y.push({label:c,fallbackLabel:l,value:m});const S=this.getItemStyle({...u,colorValue:m??u.colorValue},!1),D=S.fill,b=Pr({shape:"square",fill:D,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},i.fillGradientDefaults,i.fillPatternDefaults,i.fillImageDefaults);return Hs.isGradientFill(b.fill)&&(b.fill={...b.fill,gradient:"linear",rotation:0,reverse:!1}),this.formatTooltipWithContext(h,{title:s!=null?d[s]:void 0,symbol:{marker:b},data:y},{seriesId:t,datum:d,title:void 0,depth:g,labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:n,sizeName:r,colorKey:l,colorName:c,...S})}createNodeData(){}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}animateEmptyUpdateReady(){nL(this.id,"nodes",this.ctx.animationManager,[this.scalingGroup],{toFn(){return{scalingX:1,scalingY:1}},fromFn(){return{scalingX:0,scalingY:0}}})}computeFocusBounds(e){return e}hasItemStylers(){return this.properties.itemStyler!=null}};va.className="SunburstSeries",va.type="sunburst";import{_ModuleSupport as dL}from"ag-charts-community";import{constant as gL,required as fL,string as Ai}from"ag-charts-core";var{commonSeriesOptionsDefs:yL,sunburstSeriesThemeableOptionsDef:mL,without:SL}=dL,xL={...mL,...SL(yL,["highlightStyle","highlight","showInLegend"]),type:fL(gL("sunburst")),labelKey:Ai,secondaryLabelKey:Ai,childrenKey:Ai,sizeKey:Ai,colorKey:Ai,sizeName:Ai,colorName:Ai},{BASE_FONT_SIZE:sd,FONT_SIZE_RATIO:od}=Ii,d_={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"sunburst",moduleFactory:e=>new va(e),solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:Ii.FILL_GRADIENT_RADIAL_REVERSED_SERIES_DEFAULTS,fillPatternDefaults:Ii.FILL_PATTERN_DEFAULTS,fillImageDefaults:Ii.FILL_IMAGE_DEFAULTS,strokeWidth:{$isUserOption:["./strokes/0",2,0]},label:{...Ii.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$rem:od.LARGE},minimumFontSize:{$rem:9/sd},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{...Ii.LABEL_BOXING_DEFAULTS,fontFamily:{$ref:"fontFamily"},fontSize:{$rem:od.SMALLEST},minimumFontSize:{$rem:7/sd},fontWeight:{$ref:"fontWeight"},color:{$ref:"chartBackgroundColor"},overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:{$ref:"chartBackgroundColor"}},secondaryLabel:{color:{$ref:"chartBackgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0,...Ii.LEGEND_CONTAINER_THEME}}},ad={type:"series",name:"sunburst",chartType:"standalone",enterprise:!0,options:xL,create:e=>new va(e)};import{_ModuleSupport as ii}from"ag-charts-community";import{_ModuleSupport as $s}from"ag-charts-community";import{isNumberEqual as bL}from"ag-charts-core";import{_ModuleSupport as DL}from"ag-charts-community";var{BaseProperties:ka,HierarchySeriesProperties:vL,HighlightStyle:kL,makeSeriesTooltip:IL,Property:U,Label:AL}=DL,nd=class extends AL{constructor(){super(...arguments),this.spacing=0}};p([U],nd.prototype,"spacing",2);var xt=class extends ka{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new nd}};p([U],xt.prototype,"fill",2),p([U],xt.prototype,"fillOpacity",2),p([U],xt.prototype,"stroke",2),p([U],xt.prototype,"strokeWidth",2),p([U],xt.prototype,"strokeOpacity",2),p([U],xt.prototype,"cornerRadius",2),p([U],xt.prototype,"textAlign",2),p([U],xt.prototype,"gap",2),p([U],xt.prototype,"padding",2),p([U],xt.prototype,"interactive",2),p([U],xt.prototype,"label",2);var ut=class extends ka{constructor(){super(...arguments),this.fill=void 0,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new wt,this.secondaryLabel=new Ds}};p([U],ut.prototype,"fill",2),p([U],ut.prototype,"fillOpacity",2),p([U],ut.prototype,"stroke",2),p([U],ut.prototype,"strokeWidth",2),p([U],ut.prototype,"strokeOpacity",2),p([U],ut.prototype,"cornerRadius",2),p([U],ut.prototype,"textAlign",2),p([U],ut.prototype,"verticalAlign",2),p([U],ut.prototype,"gap",2),p([U],ut.prototype,"padding",2),p([U],ut.prototype,"label",2),p([U],ut.prototype,"secondaryLabel",2);var Mi=class extends ka{constructor(){super(...arguments),this.label=new wt}};p([U],Mi.prototype,"fill",2),p([U],Mi.prototype,"fillOpacity",2),p([U],Mi.prototype,"stroke",2),p([U],Mi.prototype,"strokeWidth",2),p([U],Mi.prototype,"strokeOpacity",2),p([U],Mi.prototype,"label",2);var si=class extends ka{constructor(){super(...arguments),this.label=new wt,this.secondaryLabel=new Ds}};p([U],si.prototype,"fill",2),p([U],si.prototype,"fillOpacity",2),p([U],si.prototype,"stroke",2),p([U],si.prototype,"strokeWidth",2),p([U],si.prototype,"strokeOpacity",2),p([U],si.prototype,"label",2),p([U],si.prototype,"secondaryLabel",2);var Cr=class extends kL{constructor(){super(!1),this.group=new Mi,this.tile=new si}getStyle(e){return e?this.tile:this.group}};p([U],Cr.prototype,"group",2),p([U],Cr.prototype,"tile",2);var Rt=class extends vL{constructor(){super(...arguments),this.highlightStyle=new Cr,this.tooltip=IL(),this.group=new xt,this.tile=new ut,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}getStyle(e,t,i,s){const{fillOpacity:o,strokeWidth:a,strokeOpacity:n,fill:r=e?t[s%t.length]:t[Math.min(s,t.length)],stroke:l=e?i[s%t.length]:i[Math.min(s,i.length)]}=e?this.tile:this.group;return{fill:r,fillOpacity:o,stroke:l,strokeWidth:a,strokeOpacity:n,opacity:1}}};p([U],Rt.prototype,"sizeName",2),p([U],Rt.prototype,"labelKey",2),p([U],Rt.prototype,"secondaryLabelKey",2),p([U],Rt.prototype,"itemStyler",2),p([U],Rt.prototype,"highlightStyle",2),p([U],Rt.prototype,"tooltip",2),p([U],Rt.prototype,"group",2),p([U],Rt.prototype,"tile",2),p([U],Rt.prototype,"undocumentedGroupFills",2),p([U],Rt.prototype,"undocumentedGroupStrokes",2);var{TextUtils:ML,TextWrapper:NL,createDatumId:LL,Rect:rd,Group:ld,BBox:ns,Selection:_r,Text:Ia,Transformable:TL,applyShapeStyle:RL,getShapeStyle:wr,getLabelStyles:PL,mergeDefaults:cd}=$s,CL=class extends $s.HierarchyNode{constructor(){super(...arguments),this.labelValue=void 0,this.secondaryLabelValue=void 0,this.label=void 0,this.secondaryLabel=void 0,this.bbox=void 0,this.padding=void 0}},pd=new Ia;function _L(e,t){const{fontStyle:i,fontWeight:s,fontSize:o,fontFamily:a}=t;pd.setProperties({text:e,fontStyle:i,fontWeight:s,fontSize:o,fontFamily:a,textAlign:"left",textBaseline:"top"});const{width:n,height:r}=pd.getBBox();return{width:n,height:r}}function oi(e){return e.children.length>0?e.sumSize-e.sizeValue:e.sizeValue}var hd={left:0,center:.5,right:1},wL={top:0,middle:.5,bottom:1},S_=class extends $s.Group{distanceSquared(e,t){return this.getBBox().distanceSquared(e,t)}},Aa=class extends $s.HierarchySeries{constructor(){super(...arguments),this.NodeClass=CL,this.properties=new Rt,this.rectGroup=this.contentGroup.appendChild(new ld),this.datumSelection=_r.select(this.rectGroup,rd),this.labelSelection=_r.select(this.labelGroup,ld),this.highlightSelection=_r.select(this.rectGroup,rd)}groupTitleHeight(e,t){const{labelValue:i}=e,{label:s}=this.properties.group,o=3;if(i!=null){if(s.fontSize>t.width/o||s.fontSize>t.height/o)return;{const{height:a}=_L(i,s);return Math.max(a,s.fontSize)}}}getNodePadding(e,t){if(e.parent==null)return{top:0,right:0,bottom:0,left:0};if(e.children.length===0){const{padding:n}=this.properties.tile;return{top:n,right:n,bottom:n,left:n}}const{label:{spacing:i},padding:s}=this.properties.group,o=this.groupTitleHeight(e,t),a=o!=null?o+i:0;return{top:s+a,right:s,bottom:s,left:s}}sortChildren({children:e}){const t=Array.from(e,(s,o)=>o).filter(s=>oi(e[s])>0).sort((s,o)=>oi(e[o])-oi(e[s]));return{sortedChildrenIndices:t,childAt:s=>{const o=t[s];return e[o]}}}squarify(e,t){const{datum:i,children:s}=e;if(t.width<=0||t.height<=0){e.bbox=void 0,e.padding=void 0,e.midPoint.x=NaN,e.midPoint.y=NaN;return}const o=i!=null?this.getNodePadding(e,t):{top:0,right:0,bottom:0,left:0};e.parent==null?(e.bbox=void 0,e.padding=void 0,e.midPoint.x=NaN,e.midPoint.y=NaN):(e.bbox=t,e.padding=o,e.midPoint.x=t.x+t.width/2,e.midPoint.y=t.y);const{sortedChildrenIndices:a,childAt:n}=this.sortChildren(e),r=a.every(k=>s[k].children.length===0),l=1,c=t.width-o.left-o.right,h=t.height-o.top-o.bottom;if(c<=0||h<=0)return;const u=a.length;let d=0,g=0,y=1/0,f=a.reduce((k,I)=>k+oi(s[I]),0);const m=new ns(t.x+o.left,t.y+o.top,c,h),S=m.clone();let D=0;for(;D<u;){const k=oi(n(D)),I=oi(n(g)),A=S.width<S.height;d+=k;const v=A?S.height:S.width,N=A?S.width:S.height,L=N*I/d;let M=v*d/f;const R=Math.max(L,M)/Math.min(L,M),C=Math.abs(l-R);if(C<y){y=C,D++;continue}d-=k,M=v*d/f;let w=A?S.x:S.y;for(let T=g;T<D;T++){const _=n(T),P=oi(_),O=A?w:S.x,E=A?S.y:w,F=N*P/d,B=A?F:M,G=A?M:F,V=new ns(O,E,B,G);this.applyGap(m,V,r),this.squarify(_,V),f-=P,w+=F}A?(S.y+=M,S.height-=M):(S.x+=M,S.width-=M),g=D,d=0,y=1/0}const b=S.width<S.height;let x=b?S.x:S.y;for(let k=g;k<u;k++){const I=n(k),A=b?x:S.x,v=b?S.y:x,N=oi(I)/f,L=S.width*(b?N:1),M=S.height*(b?1:N),R=new ns(A,v,L,M);this.applyGap(m,R,r),this.squarify(I,R),x+=b?L:M}}applyGap(e,t,i){const s=i?this.properties.tile.gap*.5:this.properties.group.gap*.5,o=l=>({left:l.x,top:l.y,right:l.x+l.width,bottom:l.y+l.height}),a=o(e),n=o(t);["top","right","bottom","left"].forEach(l=>{bL(a[l],n[l])||t.shrink(s,l)})}createNodeData(){}getItemStyle(e,t,i){const{id:s,properties:o,colorScale:a,ctx:n}=this,{itemStyler:r,fillGradientDefaults:l,fillPatternDefaults:c,fillImageDefaults:h}=o,u=e.datumIndex?.[0]??0,d=t?o.fills:o.undocumentedGroupFills,g=t?o.strokes:o.undocumentedGroupStrokes,y=t?u:e.depth??-1,f=i?o.highlightStyle.getStyle(t):void 0,m=cd(f,o.getStyle(t,d,g,y));!i&&t&&e.colorValue!=null&&(m.fill=a.convert(e.colorValue));let S=wr(m,l,c,h);if(r!=null&&e!=null){const D=this.cachedDatumCallback(LL(this.getDatumId(e),i?"highlight":"node"),()=>{const b=n.highlightManager?.getActiveHighlight(),x=this.getHighlightStateString(b,i,e.datumIndex);return this.callWithContext(r,{seriesId:s,datum:e.datum,depth:e.depth??-1,highlighted:i,highlightState:x,...S})});D&&(S=wr(cd(D,S),l,c,h))}return S}updateSelections(){let e=this.ctx.highlightManager?.getActiveHighlight();if(e!=null&&!this.properties.group.interactive&&e.children.length!==0&&(e=void 0),this.highlightSelection.update(e!=null?[e]:[],void 0,o=>this.getDatumId(o)),!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:t}=this.chart??{};if(!t)return;const i=Array.from(this.rootNode),s=o=>{o.append([new Ia({tag:0}),new Ia({tag:1})])};this.datumSelection.update(i,void 0,o=>this.getDatumId(o)),this.labelSelection.update(i,s,o=>this.getDatumId(o))}updateNodes(){const{rootNode:e,data:t}=this,{childrenKey:i,colorKey:s,colorName:o,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,highlightStyle:c,tile:h,group:u}=this.properties,{seriesRect:d}=this.chart??{};if(!d||!t)return;this.rootNode?.walk(b=>{const{datum:x,depth:k,children:I}=b,A=I.length===0,v=A?h.label:u.label;let N;if(v.enabled&&x!=null&&k!=null&&a!=null){const M=x[a];N=this.getLabelText(M,x,a,"label",[],v,{depth:k,datum:x,childrenKey:i,colorKey:s,colorName:o,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:M})}N===""&&(N=void 0);let L;if(h.secondaryLabel.enabled&&A&&x!=null&&k!=null&&n!=null){const M=x[n];L=this.getLabelText(M,x,n,"secondaryLabel",[],h.secondaryLabel,{depth:k,datum:x,childrenKey:i,colorKey:s,colorName:o,labelKey:a,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:M})}L===""&&(L=void 0),b.labelValue=N,b.secondaryLabelValue=L});const{width:g,height:y}=d;this.squarify(e,new ns(0,0,g,y)),this.rootNode?.walk(b=>{const{bbox:x,children:k,labelValue:I,secondaryLabelValue:A}=b;if(b.label=void 0,b.secondaryLabel=void 0,x!=null)if(k.length===0){const v={width:x.width,height:x.height,meta:null},N=on(I,this.properties.tile.label,A,this.properties.tile.secondaryLabel,{padding:h.padding},()=>v);if(N==null)return;const{height:L,label:M,secondaryLabel:R}=N,{textAlign:C,verticalAlign:w,padding:T}=h,_=hd[C]??.5,P=x.x+T+(x.width-2*T)*_,O=wL[w]??.5,E=x.y+T+L*.5+(x.height-2*T-L)*O;if(M!=null){const{fontStyle:F="normal",fontFamily:B,fontWeight:G="normal",color:V="black"}=this.properties.tile.label;b.label={text:M.text,fontSize:M.fontSize,lineHeight:M.lineHeight,fontStyle:F,fontFamily:B,fontWeight:G,color:V,textAlign:C,verticalAlign:"middle",x:P,y:E-(L-M.height)*.5}}if(R!=null){const{fontStyle:F="normal",fontFamily:B,fontWeight:G="normal",color:V="black"}=this.properties.tile.secondaryLabel;b.secondaryLabel={text:R.text,fontSize:R.fontSize,lineHeight:R.fontSize,fontStyle:F,fontFamily:B,fontWeight:G,color:V,textAlign:C,verticalAlign:"middle",x:P,y:E+(L-R.height)*.5}}}else{if(I==null)return;{const{padding:v,textAlign:N}=u,L=this.groupTitleHeight(b,x);if(L==null)return;const M=x.width-2*v,R=NL.wrapText(I,{maxWidth:x.width-2*v,font:u.label,textWrap:"never"}),C=hd[N]??.5,{fontStyle:w="normal",fontFamily:T,fontWeight:_="normal",color:P="black"}=this.properties.group.label;b.label={text:R,fontSize:u.label.fontSize,lineHeight:ML.getLineHeight(u.label.fontSize),fontStyle:w,fontFamily:T,fontWeight:_,color:P,textAlign:N,verticalAlign:"middle",x:x.x+v+M*C,y:x.y+v+L*.5}}}});const f={series:new ns(0,0,g,y),axis:new ns(0,0,g,y)},m=(b,x,k)=>{const{bbox:I}=b;if(I==null){x.visible=!1;return}const{depth:A=-1}=b,v=b.children.length===0,N=this.getItemStyle(b,v,k);x.crisp=!0,RL(x,N,f),x.cornerRadius=v?h.cornerRadius:u.cornerRadius,x.zIndex=[0,A,k?1:0];const L=b.parent?.children.every(C=>C.children.length===0),M=b.parent!=null?b.parent.bbox:void 0,R=b.parent!=null?b.parent.padding:void 0;L===!0&&M!=null&&R!=null?(x.clipBBox=I,x.x=M.x+R.left,x.y=M.y+R.top,x.width=M.width-(R.left+R.right),x.height=M.height-(R.top+R.bottom)):(x.clipBBox=void 0,x.x=I.x,x.y=I.y,x.width=I.width,x.height=I.height),x.visible=!0};this.datumSelection.each((b,x)=>m(x,b,!1)),this.highlightSelection.each((b,x)=>{m(x,b,!0)});const S=(b,x,k,I)=>{const A=b.children.length===0,v=k===0?b.label:b.secondaryLabel;if(v==null){x.visible=!1;return}const N=k===0?h.label:h.secondaryLabel;let L;if(I){const{tile:T,group:_}=c;L=T.secondaryLabel.color,A?k===0&&(L=T.label.color):L=_.label.color}const M={childrenKey:this.properties.childrenKey,colorKey:this.properties.colorKey,colorName:this.properties.colorName??this.properties.colorKey,depth:b.depth??NaN,labelKey:this.properties.labelKey,secondaryLabelKey:this.properties.secondaryLabelKey,sizeKey:this.properties.sizeKey,sizeName:this.properties.sizeName??this.properties.sizeKey},R=this.ctx.highlightManager?.getActiveHighlight(),C=this.getHighlightStateString(R,I,b.datumIndex),w=PL(this,b,M,N,I,C);x.text=v.text,x.fontSize=v.fontSize,x.lineHeight=v.lineHeight,x.fontStyle=v.fontStyle,x.fontFamily=v.fontFamily,x.fontWeight=v.fontWeight,x.fill=L??v.color,x.fillOpacity=this.getHighlightStyle(I,b.datumIndex)?.opacity??1,x.textAlign=v.textAlign,x.textBaseline=v.verticalAlign,x.x=v.x,x.y=v.y,x.setBoxing(w),x.visible=!0,x.zIndex=1},D=this.ctx.highlightManager?.getActiveHighlight();this.labelSelection.selectByClass(Ia).forEach(b=>{const x=b.closestDatum();S(x,b,b.tag,x===D)})}pickNodesExactShape(e){const t=super.pickNodesExactShape(e);return t.sort((i,s)=>s.datumIndex.length-i.datumIndex.length),t}pickNodeClosestDatum(e){const t=this.pickNodesExactShape(e);return t.length!==0?{datum:t[0],distance:0}:this.pickNodeNearestDistantObject(e,this.datumSelection.nodes())}getTooltipContent(e){const{id:t,properties:i}=this,{labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:n,sizeName:r,colorKey:l,colorName:c,tooltip:h}=i,u=e.reduce((A,v)=>A?.children[v],this.rootNode);if(u==null)return;const{datum:d,depth:g,children:y}=u;if(d==null||g==null)return;const f=y.length===0,m=[],S=n!=null?d[n]:void 0;S!=null&&m.push({label:r,fallbackLabel:n,value:S});const D=l!=null?d[l]:void 0;D!=null&&m.push({label:c,fallbackLabel:l,value:D});const b=this.getItemStyle({...u,colorValue:D??u.colorValue},f,!1),x=b.fill,k=wr({shape:"square",fill:x,fillOpacity:1,stroke:void 0,strokeWidth:0,strokeOpacity:1,lineDash:[0],lineDashOffset:0},this.properties.fillGradientDefaults,this.properties.fillPatternDefaults,this.properties.fillImageDefaults);$s.isGradientFill(k.fill)&&(k.fill={...k.fill,gradient:"linear",rotation:0,reverse:!1});const I=f?{marker:k}:void 0;return this.formatTooltipWithContext(h,{title:s!=null?d[s]:void 0,symbol:I,data:m},{seriesId:t,datum:d,title:void 0,depth:g,labelKey:s,secondaryLabelKey:o,childrenKey:a,sizeKey:n,sizeName:r,colorKey:l,colorName:c,...b})}computeFocusBounds(e){return TL.toCanvas(this.contentGroup,e.getBBox())}hasItemStylers(){return this.properties.itemStyler!=null}};Aa.className="TreemapSeries",Aa.type="treemap";import{_ModuleSupport as EL}from"ag-charts-community";import{arrayOf as ud,color as dd,constant as OL,fillGradientDefaults as FL,fillImageDefaults as BL,fillPatternDefaults as GL,required as VL,string as Ni,undocumented as Xs}from"ag-charts-core";var{commonSeriesOptionsDefs:KL,treemapSeriesThemeableOptionsDef:WL,without:zL}=EL,rs={...WL,...zL(KL,["highlightStyle","highlight","showInLegend"]),type:VL(OL("treemap")),labelKey:Ni,secondaryLabelKey:Ni,childrenKey:Ni,sizeKey:Ni,colorKey:Ni,sizeName:Ni,colorName:Ni};rs.fillGradientDefaults=Xs(FL),rs.fillPatternDefaults=Xs(GL),rs.fillImageDefaults=Xs(BL),rs.undocumentedGroupFills=Xs(ud(dd)),rs.undocumentedGroupStrokes=Xs(ud(dd));var{FONT_SIZE_RATIO:gd}=ii,D_={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["standalone"],identifier:"treemap",moduleFactory:e=>new Aa(e),solo:!0,themeTemplate:{series:{fills:{$palette:"fills"},strokes:{$palette:"strokes"},colorRange:{$palette:"divergingColors"},fillGradientDefaults:ii.FILL_GRADIENT_LINEAR_DEFAULTS,fillPatternDefaults:ii.FILL_PATTERN_DEFAULTS,fillImageDefaults:ii.FILL_IMAGE_DEFAULTS,undocumentedGroupFills:{$palette:"hierarchyColors"},undocumentedGroupStrokes:{$palette:"secondHierarchyColors"},group:{label:{...ii.LABEL_BOXING_DEFAULTS,enabled:!0,color:{$ref:"textColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$ref:"fontSize"},fontFamily:{$ref:"fontFamily"},spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{...ii.LABEL_BOXING_DEFAULTS,enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:{$ref:"fontWeight"},fontSize:{$rem:1.5},minimumFontSize:{$rem:gd.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{...ii.LABEL_BOXING_DEFAULTS,enabled:!0,color:{$ref:"chartBackgroundColor"},fontStyle:void 0,fontWeight:void 0,fontSize:{$ref:"fontSize"},minimumFontSize:{$rem:gd.SMALLER},fontFamily:{$ref:"fontFamily"},wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:{$isUserOption:["../strokes/0",2,{$isUserOption:["./stroke",2,0]}]},padding:3,gap:1},highlightStyle:{group:{label:{color:{$ref:"textColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:{$ref:"chartBackgroundColor"}},secondaryLabel:{color:{$ref:"chartBackgroundColor"}},fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0,...ii.LEGEND_CONTAINER_THEME}}},fd={type:"series",name:"treemap",chartType:"standalone",enterprise:!0,options:rs,create:e=>new Aa(e)},HL=vd.ModuleRegistry,yd=[rl,Xa,sn,bp,Tp,rn,cn,gn,Sn,vn],md=[ll,cl,pl,hl,Kh,lu,pu,xu,Au],Sd=[ul,Jh,Xp,Ou,ad,fd,np,Zu],xd=[yl,sh,ah,fh,Ah,Nh],$L=[...yd,...md,...Sd,...xd,Eb,Ob,Fb];export{yd as AllCartesianEnterpriseModules,$L as AllEnterpriseModules,md as AllPolarEnterpriseModules,Sd as AllStandaloneEnterpriseModules,xd as AllTopologyEnterpriseModules,cl as AngleCategoryAxisModule,ll as AngleNumberAxisModule,Xa as BoxPlotSeriesModule,sn as CandlestickSeriesModule,np as ChordSeriesModule,bp as ConeFunnelSeriesModule,Tp as FunnelSeriesModule,rn as HeatmapSeriesModule,Xp as LinearGaugeSeriesModule,ah as MapLineBackgroundSeriesModule,sh as MapLineSeriesModule,fh as MapMarkerSeriesModule,Nh as MapShapeBackgroundSeriesModule,Ah as MapShapeSeriesModule,HL as ModuleRegistry,Kh as NightingaleSeriesModule,cn as OhlcSeriesModule,rl as OrdinalTimeAxisModule,Jh as PyramidSeriesModule,lu as RadarAreaSeriesModule,pu as RadarLineSeriesModule,xu as RadialBarSeriesModule,Au as RadialColumnSeriesModule,Ou as RadialGaugeSeriesModule,hl as RadiusCategoryAxisModule,pl as RadiusNumberAxisModule,gn as RangeAreaSeriesModule,Sn as RangeBarSeriesModule,Zu as SankeySeriesModule,ul as StandaloneChartModule,ad as SunburstSeriesModule,yl as TopologyChartModule,fd as TreemapSeriesModule,vn as WaterfallSeriesModule};
